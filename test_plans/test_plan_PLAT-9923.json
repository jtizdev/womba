{
  "story": {
    "key": "PLAT-9923",
    "summary": "(3.9) - PORCH - Generic - Policy conditions - enforce condition type limit per policy in the UI",
    "description": "<jira.resources.PropertyHolder object at 0x10701be00>",
    "issue_type": "Story",
    "status": "Product Backlog",
    "priority": "Low",
    "assignee": "Tal Agam",
    "reporter": "Tal Agam",
    "created": "2024-04-03 12:14:38.809000+03:00",
    "updated": "2025-11-03 10:52:49.420000+02:00",
    "labels": [
      "Adaptive",
      "Mgmt-Q3",
      "PORCH",
      "UI\\UX",
      "managment"
    ],
    "components": [],
    "acceptance_criteria": "2|i04r97:",
    "linked_issues": [],
    "attachments": [],
    "custom_fields": {
      "customfield_10100": "2|i04r97:",
      "customfield_10102": "PLAT-6059",
      "customfield_10200": [
        "Not Deployed"
      ],
      "customfield_10401": [],
      "customfield_10403": [],
      "customfield_10416": [
        "Test"
      ],
      "customfield_10500": "{}",
      "customfield_10525": "Low",
      "customfield_10590": "Functional",
      "customfield_10597": 0.0,
      "customfield_10598": 0.0,
      "customfield_10610": "NO",
      "customfield_10641": "Low",
      "customfield_10644": "Low",
      "customfield_10645": [],
      "customfield_10705": [
        "No"
      ],
      "customfield_10712": [
        "BE",
        "FE"
      ],
      "customfield_10735": [
        "No"
      ],
      "customfield_10743": [
        "No"
      ],
      "customfield_10776": "Management",
      "customfield_10784": "Arel"
    }
  },
  "test_cases": [
    {
      "id": null,
      "title": "Verify UI displays error when attempting to add more than allowed condition types in a policy",
      "description": "Verify that the UI prevents users from exceeding the maximum allowed condition types per policy as defined in the PAP.",
      "preconditions": "User is logged into the management console and is on the 'Create Policy' screen.",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to the 'Create Policy' screen.",
          "expected_result": "The 'Create Policy' screen is displayed with options to add conditions.",
          "test_data": null
        },
        {
          "step_number": 2,
          "action": "Add 6 condition types to the policy (e.g., 'DateCondition', 'IPCondition', etc.) in the UI.",
          "expected_result": "The UI allows the addition of 6 condition types without error.",
          "test_data": "Condition types: ['DateCondition', 'IPCondition', 'RoleCondition', 'TimeCondition', 'GeoLocationCondition', 'AttributeCondition']"
        },
        {
          "step_number": 3,
          "action": "Attempt to add a 7th condition type by clicking the 'Add Condition' button.",
          "expected_result": "An error message is displayed: 'Limit of 6 condition types exceeded.'",
          "test_data": null
        }
      ],
      "expected_result": "User is prevented from exceeding the limit and receives a clear error message.",
      "priority": "high",
      "test_type": "functional",
      "tags": [
        "policy-conditions",
        "UI-validation",
        "error-handling"
      ],
      "estimated_time": null,
      "automation_candidate": true,
      "risk_level": "medium",
      "related_existing_tests": []
    },
    {
      "id": null,
      "title": "Verify API returns error when policy created with excess condition types",
      "description": "Ensure the API rejects a policy creation request when it exceeds the maximum condition type limits.",
      "preconditions": "User has Management API credentials.",
      "steps": [
        {
          "step_number": 1,
          "action": "Send POST request to /policies with body {'name': 'Excess Conditions Policy', 'conditions': [{'type': 'DateCondition'}, {'type': 'IPCondition'}, {'type': 'RoleCondition'}, {'type': 'TimeCondition'}, {'type': 'GeoLocationCondition'}, {'type': 'AttributeCondition'}, {'type': 'ExtraCondition'}]}",
          "expected_result": "HTTP 400 Bad Request with error: 'Maximum limit of 6 condition types exceeded'",
          "test_data": "Payload: {'name': 'Excess Conditions Policy', 'conditions': [{'type': 'DateCondition'}, {'type': 'IPCondition'}, {'type': 'RoleCondition'}, {'type': 'TimeCondition'}, {'type': 'GeoLocationCondition'}, {'type': 'AttributeCondition'}, {'type': 'ExtraCondition'}]}"
        }
      ],
      "expected_result": "API prevents policy creation and provides a clear error message.",
      "priority": "high",
      "test_type": "negative",
      "tags": [
        "policy-conditions",
        "API-validation",
        "error-handling"
      ],
      "estimated_time": null,
      "automation_candidate": true,
      "risk_level": "high",
      "related_existing_tests": []
    },
    {
      "id": null,
      "title": "Verify policy created with allowed condition types functions correctly in enforcement",
      "description": "Verify that a policy with the maximum allowed condition types successfully enforces the rules defined within it.",
      "preconditions": "User has created a policy with exactly 6 conditions without errors.",
      "steps": [
        {
          "step_number": 1,
          "action": "Send POST request to /policies with body {'name': 'Valid Policy', 'conditions': [{'type': 'DateCondition'}, {'type': 'IPCondition'}, {'type': 'RoleCondition'}, {'type': 'TimeCondition'}, {'type': 'GeoLocationCondition'}, {'type': 'AttributeCondition'}]}",
          "expected_result": "Policy is created successfully.",
          "test_data": "Payload: {'name': 'Valid Policy', 'conditions': [{'type': 'DateCondition'}, {'type': 'IPCondition'}, {'type': 'RoleCondition'}, {'type': 'TimeCondition'}, {'type': 'GeoLocationCondition'}, {'type': 'AttributeCondition'}]}"
        },
        {
          "step_number": 2,
          "action": "Deploy the policy using POST /policies/{id}/deploy where {id} is the ID of the created policy.",
          "expected_result": "Policy is deployed successfully.",
          "test_data": "Deployment request: POST /policies/valid-policy-id/deploy"
        },
        {
          "step_number": 3,
          "action": "Verify that the enforcement of conditions takes place as expected by accessing the relevant system logs.",
          "expected_result": "Logs indicate that policy conditions are being evaluated and enforced correctly.",
          "test_data": null
        }
      ],
      "expected_result": "The policy functions correctly within the defined limits.",
      "priority": "critical",
      "test_type": "integration",
      "tags": [
        "policy-conditions",
        "integration",
        "enforcement"
      ],
      "estimated_time": null,
      "automation_candidate": true,
      "risk_level": "high",
      "related_existing_tests": []
    },
    {
      "id": null,
      "title": "Verify import of policy with valid condition types does not generate errors",
      "description": "Ensure that importing a policy with valid condition types works without issues.",
      "preconditions": "A policy with valid condition types JSON is available.",
      "steps": [
        {
          "step_number": 1,
          "action": "Export a policy from an existing environment with valid conditions using GET /policies/{id}/export.",
          "expected_result": "Exported policy contains the correct condition types.",
          "test_data": "GET /policies/valid-policy-id/export"
        },
        {
          "step_number": 2,
          "action": "Import the policy using the POST /policies/import with the previously exported policy JSON.",
          "expected_result": "Policy is imported successfully without any validation errors.",
          "test_data": "POST /policies/import with body {'policy': <exported_policy_JSON>}"
        }
      ],
      "expected_result": "The imported policy retains its condition types and functions correctly.",
      "priority": "high",
      "test_type": "integration",
      "tags": [
        "policy-conditions",
        "import-export",
        "integration"
      ],
      "estimated_time": null,
      "automation_candidate": true,
      "risk_level": "medium",
      "related_existing_tests": []
    }
  ],
  "metadata": {
    "generated_at": "2025-11-03 09:11:10.219870",
    "ai_model": "gpt-4o-mini",
    "source_story_key": "PLAT-9923",
    "total_test_cases": 4,
    "edge_case_count": 0,
    "integration_test_count": 2,
    "confidence_score": 0.9
  },
  "summary": "These tests verify the enforcement of condition type limits per policy and ensure that the UI behaves correctly when users attempt to exceed these limits.",
  "coverage_analysis": null,
  "risk_assessment": null,
  "regression_risks": null,
  "side_effects": null,
  "dependencies": [],
  "estimated_execution_time": null,
  "suggested_folder": "PAP/Policy Management"
}