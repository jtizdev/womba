
================================================================================

üö® CRITICAL: READ AND UNDERSTAND THIS STORY FIRST üö®

================================================================================

DO NOT PATTERN MATCH FROM EXAMPLES!

DO NOT MAKE UP GENERIC TESTS!

READ THIS STORY. UNDERSTAND THE FEATURE. TEST WHAT IT ACTUALLY DOES.

================================================================================


<story_to_test>


=== STORY: PLAT-15596 ===


--- PLAINID PLATFORM CONTEXT (Know the architecture) ---


<plainid_overview>

PlainID is a Policy-Based Access Control (PBAC) platform. You MUST use PlainID-specific terminology in ALL tests.

CORE ARCHITECTURE (use these exact terms):
- PAP (Policy Administration Point): Web UI where policies are authored, validated, and managed
- PDP (Policy Decision Point): Runtime engine that evaluates authorization requests
- PEP (Policy Enforcement Point): Client-side component in applications that calls PDP
- POP (Policy Object Point): Stores deployed policies for PDP runtime
- PIPs (Policy Information Points): Data sources that enrich policy evaluation context
- Authorizers: Data connectors (IDP, Database, API, File-based) that feed PIPs

HIERARCHY (always reference correctly):
Tenant ‚Üí Environment (dev/test/prod) ‚Üí Workspace ‚Üí Policy/Asset/Authorizer
- Tenants contain multiple environments
- Each environment has its own POPs, authorizers, API clients
- Policies are promoted across environments (dev ‚Üí test ‚Üí prod)

WORKSPACES (use correct workspace names):
- Identity Workspace: Manage identity sources, templates, matchers, token enrichment, dynamic groups
- Policy Workspace: Author policies, define assets, scopes, conditions, approval workflows
- Authorization Workspace: Configure POPs, policy overrides, deny reasons, runtime enforcement
- Orchestration Workspace: Manage deployments, vendor synchronization, environment coordination

KEY ENTITIES (use exact terminology):
- Policy: Authorization rules with conditions, subjects, resources, actions
- Asset: Resource being protected (e.g., API endpoint, document, data record)
- Asset Type: Category of assets with common attributes
- Subject: User or entity requesting access
- Resource: What is being accessed
- Action: What operation is being performed (read, write, delete, etc.)
- Scope: Logical grouping of policies
- Authorizer: Data source connector (IDP Authorizer, SQL Authorizer, API Authorizer, etc.)
- Vendor ID: Unique identifier for policy objects across environments
- Policy Promotion: Moving policies between environments while preserving vendor IDs
- Deny Reason: Structured explanation when access is denied
- Entitlement: Subject's permitted actions on resources
- Token Enrichment: Adding policy data to identity tokens (JWT, SAML)
- Cache Invalidation: Clearing cached identity/policy data after changes

RUNTIME FLOW (reference in integration tests):
1. PEP sends authorization request to PDP: {subject, resource, action, context}
2. PDP retrieves policies from POP
3. PDP enriches request with data from PIPs/Authorizers
4. PDP evaluates policies and returns decision: Permit/Deny with deny reasons
5. PEP enforces decision in application

APIS (use correct endpoint terminology):
- Runtime Authorization APIs: /permit-deny, /policy-resolution, /entitlements, /subject-list
- Management APIs: Policy CRUD, POP operations, Authorizer management, Vendor sync
- Identity APIs: Token enrichment, IDP webhooks, cache invalidation
- Promotion APIs: Export/import policies, override policies, validate policies

CRITICAL: Tests MUST demonstrate understanding of PlainID's PBAC model
- Don't say "user permissions" ‚Üí say "policy-based authorization" or "entitlements"
- Don't say "role" ‚Üí say "subject attribute" or "dynamic group"
- Don't say "database" generically ‚Üí specify "SQL Authorizer" or "data PIP"
- Don't say "configuration" ‚Üí specify workspace (Identity/Policy/Authorization)
- Always mention relevant workspace when testing features
- Reference POPs when testing runtime enforcement
- Mention policy promotion when testing across environments

PLAINID UI STRUCTURE (for writing UI test steps):

WORKSPACES & UI NAVIGATION:
- **Authorization Workspace** (Policy authoring, main workspace for policies/assets/applications):
  - Policies menu ‚Üí Policy list ‚Üí Create/Edit policy ‚Üí Policy 360¬∞ views
  - Applications menu ‚Üí Application list ‚Üí Application details ‚Üí (tabs: General, Policies, API Mappers)
  - Assets menu ‚Üí Asset Types ‚Üí Assets
  - Scopes menu
  
- **Identity Workspace** (Identity management):
  - Identity Sources menu ‚Üí IDP configuration
  - Dynamic Groups menu ‚Üí Group definitions
  - Attributes menu
  - Token Enrichment
  
- **Orchestration Workspace** (Vendor integration, POPs):
  - POPs menu ‚Üí POP details ‚Üí Discovery, Policies tabs
  - Discovery menu ‚Üí Vendor discovery status
  - Reconciliation ‚Üí Deployment/Override actions
  
- **Administration Workspace** (System admin):
  - Audit Events ‚Üí Activity logs
  - User Management ‚Üí Roles, permissions
  - Environment settings

UI TEST STEP REQUIREMENTS (CRITICAL):
- For UI tests, use UI navigation language: "Navigate to...", "Click...", "Select...", "Verify displays..."
- Always specify workspace: "In Authorization Workspace, navigate to Applications"
- Always specify menu/tab path: "Applications ‚Üí Select app-123 ‚Üí Click Policies tab"
- Verify UI elements: "Verify policy list displays with search bar and paging controls"
- NO API endpoints in UI test steps! (API calls go in separate backend/API tests)

</plainid_overview>


--------------------------------------------------------------------------------


--- PRD / REQUIREMENTS DOCUMENTATION (READ THIS FIRST) ---

This explains what the feature IS and what it DOES:



üìÑ Document: Policy 360¬∞ - Vendor Compare View

üîó URL: https://plainid.atlassian.net/wiki/spaces/PM/pages/4483022849


**Overview**:
none 1. Summary Policy 360&deg; introduces a dynamic, multi-view interface that delivers a comprehensive perspective on policy management. It empowers administrators and auditors with deep visibility and control, offering an interactive view of any policy along with related data, dependencies, and connections. As part of this initiative, we will introduce a new view focused on SaaS authorization management. This view will highlight relationship between policies managed within the platform and those in the vendor system including discrepancies, while enabling reconciliation operations. 2. Problem statment Currently, SaaS authorization management is fragmented across two catalogs in the platform, creating inefficiencies and poor visibility. In the Authorization Workspace , policy authors can create, update, and delete policies, but cannot view synchronization status. In the Orchestration Workspace , users see discrepancies between platform and vendor in a side-by-side view and can deploy or override policies - but must switch contexts. Complex many-to-many relationships between platform and vendor policies lack any visibility. This results in a non-intuitive, disjointed user experience. 3. High level solution Enhancing the policy management experience with deep visibility and seamless reconciliation: Visualize the relationship between PlainID policies and their vendor-native counterparts Gain transparency into policy synchronization status between plainid and the vendor Streamline authoring workflows by exposing side-by-side comparisons in vendor language within the Authorization Workspace Enable reconciliation operations such as policy deployment and override - all from a single, unified view 4. Detailed Requirements 4.1 Figma Design reference: Figma file Prototype: Figme file 4.2 Navigate to vendor compare view The Vendor Compare View will be available only for policies used in SaaS authorization management (orchestration). This includes both native and structured p

**Key Requirements & Features**:
‚Ä¢ none 1. Summary Policy 360&deg; introduces a dynamic, multi-view interface that delivers a comprehensive perspective on policy management. It empowers administrators and auditors with deep visibility and control, offering an interactive view of any policy along with related data, dependencies, and connections. As part of this initiative, we will introduce a new view focused on SaaS authorization management. This view will highlight relationship between policies managed within the platform and those in the vendor system including discrepancies, while enabling reconciliation operations. 2. Problem statment Currently, SaaS authorization management is fragmented across two catalogs in the platform, creating inefficiencies and poor visibility. In the Authorization Workspace , policy authors can create, update, and delete policies, but cannot view synchronization status. In the Orchestration Workspace , users see discrepancies between platform and vendor in a side-by-side view and can deploy or override policies - but must switch contexts. Complex many-to-many relationships between platform and vendor policies lack any visibility. This results in a non-intuitive, disjointed user experience. 3. High level solution Enhancing the policy management experience with deep visibility and seamless reconciliation: Visualize the relationship between PlainID policies and their vendor-native counterparts Gain transparency into policy synchronization status between plainid and the vendor Streamline authoring workflows by exposing side-by-side comparisons in vendor language within the Authorization Workspace Enable reconciliation operations such as policy deployment and override - all from a single, unified view 4. Detailed Requirements 4.1 Figma Design reference: Figma file Prototype: Figme file 4.2 Navigate to vendor compare view The Vendor Compare View will be available only for policies used in SaaS authorization management (orchestration). This includes both native and structured policies. When creating a new policy from wizard in case vendor compare view is available (any saas authorization management policy) user should land on vendor compare, if not then user should land on the map same as today 4.3 Overview on vendor compare view The view is designed to demonstrate the relationship between policies in the platform, vendor policies, and associated protected assets. Upon navigation, the user should see: Platform Policy &ndash; The selected policy, with a clear visual indication - &quot;Current&quot; Assets &ndash; A list of protected assets with counters, showing the actual single asset linked to the policy. (Rulesets should be ignored.) Relevant icons should be displayed as per the Figma design. logically behavior should be as follows in case policy is connected to multiple asset types some has direct asset connected some has only rulesets - only asset types with direct assets should be displayed on vendor compare along with the connected direct assets in case policy is connected to asset types but non of them is connected to a single asset - all asset types will be presented with logic described above, an generic state icon will be displayed the title below the icon should be the display name of the connected asset type in case policy is incomplete and what step is empty or policy is native a generic icon will be displayed, the title below the icon will be &ldquo;undefined&rdquo; Examples of behavior based on policy types: Masking Policy - Columns or tags linked to the policy. Row Access Policy - Associated table asset. (Currently uses empty state logic - to be resolved when table asset support is added.) General Policies with a direct asset - (e.g., Zscaler) Display connected assets. Vendor Policies &ndash; List of all vendor policies connected to the PlainID policy. Note: at this point should not display vendor icon on the card since we do not support reuse will always be the same icon Connecting Lines &ndash; Visualize relationships between policies and assets. Note that different assets may be connected to different vendor policies, and this should be considered as part of the solution. Currently, one-to-many relationships are not supported, so only one vendor policy will be displayed. However, both FE and BE infrastructure should prepare for this use case as it will be added Known limitations: There are a few scenarios when we will not be able to currently display the relationship between the object displayed on the asset and the vendor policy in case a new policy created using a new asset type generated by the user and not by discovery (databricks, snowflake) relationship can&rsquo;t be displayed before the deploy in case a policy is connected to action and asset type with no asset or ruleset (masking policy - snowflake and databricks) PBI - display connection to all asset types were true is displayed instead of actual dax Currently a fallback was done if we can&rsquo;t tell to what vendor policies an asset type is linked to, display links to all vendor policies. - this should be addressed when we will support one to many 4.4 Browsing Vendor Compare View Objects in the Vendor Compare View are clickable, allowing users to drill down for additional details. Assets as Filters Users can click an asset to highlight it. If additional policies are connected to that asset (e.g., multiple platform policies linked to a single vendor policy, common in data vendors with multiple case statements), all connected policies will appear, including incomplete or inactive ones (see Indications section). Multi-select is supported: clicking again unselects the asset, hiding non-current platform policies. Vendor policies and connected assets remain visible at all times. Hovering over the asset counter provides the option to Select All or Unselect All .


--------------------------------------------------------------------------------


--- FEATURE OVERVIEW ---

**Story: (2.3.2) - PAP - Policy 360¬∞ - Phase 2 - Add Vendor Compare View - Core capabilities**

**Full Description**:
PRD review recoding:

Share link: https://zoom.us/rec/share/PW7uM6pj0dgRQZAonIJ6av77JvSGiWydlxu5yjJLmK1gUJasHGJGEgNSVTDjUUOa.ckFTexIm5yew1giB 

Passcode: $@4q1Dex

Q&A session recording

Share link: https://zoom.us/rec/share/ws-rgum6o-DXGjaKoCkjslL9whIXUw9oNUAOCwmhNjZgmNUehDOwDU0RT2IMRpt4.Uzx3G9tao8eAKolT 

Passcode: pDw0.6Z3

PRD review recording take 2:

Share link: https://zoom.us/rec/share/5UFGcDQIvs3BlQ_h12lp4LB_3KWTKbnwmLrB9R0VwzRbnQLFD62OWBN9bACAlOkz.dFTuvbMV5-js9uvt 

Passcode: &Y3%7i9@

Story scope

Introducing Vendor compare view into policy 360.


	Visualize the relationship between PlainID policies and their vendor-native counterparts
	Gain transparency into policy synchronization status between plainid and the vendor
	Streamline authoring workflows by exposing side-by-side comparisons in vendor language within the Authorization Workspace
	Enable reconciliation operations such as policy deployment and override - all from a single, unified view



Detailed requirements

https://plainid.atlassian.net/wiki/spaces/PM/pages/4483022849/Policy+360+-+Vendor+Compare+View 


Shadow policies - detailed as part of 4.11 is not in scope for that story will be implemented in a designated story


FE Notes

list of functionalities which can be completed at the end:


	change order using drag and drop
	zoom in out and pinch
	Policy diff view will not open on a full screen - side menu will still be visible (unlike figma)



Acceptance criteria


	behavior validated on both new and existing POPs from different vendors
	behavior validated for different types of policies (masking, row, general)
	behavior validated for use cases when multiple platform policy are connected to single vendor policy
	behavior validated with large amount of polices in the display
	Updated behavior and terminology for audit and permissions validated
	Update pop details (including order) via UI or PAC works as expected
	no regression for flags, reconciliation actions, schedualer, etc'
	No regression for policies used for dynamic authorization service

Components: PAP

**PlainID Architecture**: PAP, PlainID Workspace, Policy Administration Point, Policy Management, Policy Object Provider

**Implementation** (37 engineering tasks):
- **Selecting Vendor Policy**: 
	Vendor Policies as Selectable Objects
	
		Selecting a vendor policy will also reveal additional connected platform policies (all platfrom policy connected to that vendor policy should be displayed).
		Where relevant, the order attribute will be displayed (details in designated section).
		All lines connected to the vendor policy are highlighted, while others are grayed out.
		Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of the policy authoring experience) full behavior details in designated section
		An option to navigate to the Policy Diff will be available (new terminology replacing today‚Äôs ‚Äúpolicy side-by-side‚Äù). Full behavior details are provided in the designated section.
	
	



4.5 Default view


	If only one vendor policy is available in the display, it should be automatically selected when the user enters this view.
	If multiple vendor policies are available, no filter will be selected by default.


- **Select all Assets**: Users have the option to select all assets by clicking over the Assets counter.
Make sure to add ‚ÄúSelect All‚Äù or ‚ÄúUnselect All‚Äù tooltip

+ Add assets relevant icons
- **To deleted**
- **Policies order**: fetch the order of the policies and sort them accordingly

Also add dropdown numbers for changing position



Order

When a vendor policy is selected, the Order attribute should be displayed alongside the related platform policies.


	Sorting ‚Äì Platform policies will be sorted in ascending order. The current policy will not necessarily appear at the top. Inactive policies have no order value but should still appear, listed last.
	Managing order ‚Äì Users should be able to adjust the order via drag-and-drop or a dropdown menu. The behavior, available values, and logic must remain consistent with the generic implementation defined here: Policy Schema ‚Äì Order Attribute.
	When to display order:
	
		If the anchor of the order attribute is the vendor policy id (e.g., Snowflake, Databricks), order should be shown and managed directly on the platform policy card, since it determines the internal sequence of those policies.
		If the anchor is any other option (e.g., in Zscaler, the anchor is the application), order should be displayed and managed in the vendor policy details.
		In some cases (e.g., PBI), no order attribute is defined as part of the vendor schema, and therefore it should not be displayed.
	
	


- **View controls implementation**: View controls implementation:
Users should be able to pinch, zoom in, and zoom out, with expected behavior matching the interactions demonstrated in the Figma design.
- **Assets icons by type**: Implement asset icon by types
- **Support arrows within the Dynamic Map View (zoom)**: Add support for the arrows within the view
- **Policy order -DnD**: Support policy order drag and drop
- **Implement Vendor Policy edit**: Vendor Policy details

When a vendor policy is selected in the display, its details (currently shown in the Details tab under POP details) will now appear.

Presenting POP details in the vendor policy context simplifies authoring, especially when supporting many-to-many relationships between platform and vendor policies.

This replaces the existing details presentation (only for edit), for create details will remain in the Details tab until further enhancements to the data policy authoring experience.


	Viewing and Editing ‚Äì Users will be able to view and manage all POP details directly. On edit, a popup form containing all fields will open. Behavior (e.g., editable fields, dropdowns) should follow the existing generic form logic managed at the policy schema level, consistent with vendor-specific PRDs.







	Implementation of Details View
	Implementation of edit Popup
	integration
	tests
	cr + fix


- **Implement new Vendor Compare tab in policy**: 
Look in PRD for restrictions for the tab + BE integration for status
- **Policy indicators**: Policy cards will display clear indicators to highlight synchronization status, policy type, and state, with consistent tooltips. The look, feel, and placement of these indicators should align with the experience already available in the policy catalog.

Platform Policy Cards:


	Incomplete policy indicator with tooltip
	Inactive policy indicator with tooltip
	Restrictive policy indicator with tooltip



Vendor Policy Cards:


	Pending deployment flag with tooltip
	Vendor change detected flag with tooltip
	Deployment failed flag with tooltip



Multiple flags may appear on a single vendor  policy. Precedence and behavior must follow the established flag logic already implemented and described here: Discovery & Reconciliation Flows. Additionally same as today if one of those flags exists than also the POP will be flag with ‚ÄúPolicy discrepancies‚Äù indication

Policy catalog

If a vendor policy card includes a flag, the same flag (with tooltip) is inherited and should also appear in the Vendor Compare View and in the Policy Catalog. This can result having a single flag with multiple tooltips in the policy catalog itself:


	In case there are two tooltips both should appear: https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1033-46505&p=f&t=8P3DIAELIDZnL66p-0
	In case there are 3 or more tooltips generic tooltip should appear ‚ÄúPolicy discrepancies‚Äù once user will navigate into the policy he will see the different flags on the different views with relevant tooltips


- **Code compare tab implementation**: Implement the top right ‚Äúlast updated at‚Ä¶‚Äù section and implement the following





	Compare Code Tab ‚Äì
	
		Platform policy (left) vs. vendor policy (right).
		Flags for Pending Deployment and Vendor Changes Detected shown when relevant.
		Indicators at the section and row level are demonstrated in the Figma but will not be implemented at this stage. [ FUTURE ]
		Options to Accept Platform Changes (Deploy) and Accept Vendor Changes (Override) will be available when POP is in manage mode.
		Option to accept changes at the section level  shown in Figma but not currently implemented. [ FUTURE ]
		Last operation performed with success or failure status and timestamp indication will be displayed in the top-right corner:
		
			Platform Changes Applied / Failed to Apply Platform Changes
			Vendor Changes Applied / Failed to Apply Vendor Changes
			On failure, users can view and copy the detailed error message.
		
		
		Code will be displayed in collapsible sections, allowing single or multi-section expand/collapse.
		Section titles will be unified between both sides with aligned scrolling.
		Section Titles ‚Äì Microcopy Updates ‚Äì Section titles should be updated to be more concise and user-friendly. Updates should be applied per vendor:
		
			Zscaler - https://plainid.atlassian.net/wiki/spaces/PM/pages/3039100929
			Power BI - https://plainid.atlassian.net/wiki/spaces/PM/pages/3038806026
			Snowflake
			
				Row - https://plainid.atlassian.net/wiki/spaces/PM/pages/3362914305
				Masking https://plainid.atlassian.net/wiki/spaces/PM/pages/3289612289 , https://plainid.atlassian.net/wiki/spaces/PM/pages/3563749377
			
			
			Databricks -
			
				Row - https://plainid.atlassian.net/wiki/spaces/PM/pages/4207477040
				Masking - https://plainid.atlassian.net/wiki/spaces/PM/pages/4207477092
			
			
		
		
		Policy Could Not Be Translated ‚Äì If a platform policy cannot be translated due to errors or incorrect authoring, user should still be able to navigate to the policy diff. The vendor policy should still display, and the platform side should have an error flag next to it tooltip should show the error: ‚ÄúPolicy could not be translated.‚Äù
	
	



- **Update vendor sections section in policy the details**: Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of the policy authoring experience) full behavior details in designated section
- **Audit Events view**: Implement the Audit Events view



https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1402-143201&t=fkHoKSOQvSsbLYvU-4
- **Platform Policy navigation**: Implement the policy navigation on policy hover


https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1315-55107&t=SWsoiuXSxSWf4pCb-4 



Clicking it navigates the user to that policy‚Äôs Vendor Compare View, with the relevant connected vendor policy/asset already selected based on the filter chosen in the original navigation that resulted in this policy being displayed.
- **FUTURE:Implement Vendor Policy drawer**: Implement Vendor Policy drawer - Implemented

Form + buttons need to be implemented
- **BE Vendor Compare Tech Design**: Write a tech design for:
1. new / existing internal APIs to support vendor compare tab core functionalities 
2. permission migration / changes (auth ws ‚Üê orchestration ws)
- **Vendor Compare - Core capabilities - Test Plan**: Vendor Compare - Core capabilities - Test Plan
- **Vendor Compare - Core capabilities - Manual Tests**: Vendor Compare - Core capabilities - Manual Tests
- **BE Vendor Compare OpenAPI spec**: document all new apis in the relevant service openAPI file (FB)
- **BE - Implement relations API**: Implement API 1: Get related Assets, Asset Types and Vendor Policy IDs by Platform Policy ID
{{GET /policy-mgmt/3.0/policies/
{policyId}
/policy-relations}}
In policy-mgmt by the tech design.

including unit test and integration tests
- **BE - Implement new vendor policies AMQP handlers**: Implement the new amqp handlers for the queues :


	orchestrator.v1.vendor-policy.list
	orchestrator.v1.policy-query-filters.generate/build



in orchestrator, by the tech design


including unit test and integration tests.
- **BE - Implement ordered platform policies API**: Implement API 2: Get Ordered List of Platform Policy IDs per Vendor Policy
POST /policy-mgmt/1.0/vendor-policies/ordered-platform-policies
 by the tech design


including unit test and integration tests.
- **BE - Implement enriched Assets API**: Implement API 2: Get multiple enriched assets by IDs
POST internal-assets/assets/v3/vendor-enriched
 by the tech design

and the corresponding amqp handler in orchestrator for fetching vendor object details by externalId
including unit test and integration tests.
- **BE - Implement Asset Types search API**: Implement API 4: Get multiple Asset types by IDs
POST internal-assets/1.0/asset-types-search
 by the tech design


including unit test and integration tests.
- **BE - Implement Vendor policies search API**: Implement API : Get multiple vendor policies by IDs
POST orchestrator/1.0/vendor-policies-search
 by the tech design

! pay attention to permission checks against Auth Ws.


including unit test and integration tests.
- **BE - Implement Platform policies search API**: Implement API : Get multiple platform policies by IDs
POST policy-mgmt/1.0/policies-search
 by the tech design


including unit test and integration tests.
- **BE - Implement patch Platform policy order API**: Implement API : Patch Platform policy order by policy ID and Application ID
{{PATCH /2.0/policies/
{polciyId}
/applications/
{applicationId}
}}
 by the tech design


including unit test and integration tests.
- **BE - Enhance Orch Deploy API  (Permissions & Audit)**: Internal APIs:
1. {{POST /orchestrator/1.0/pops/
{popId}/policies/{policyId}/pid-policy/deploy}}

changes:

*  add Auth ws Permissions checks 
* Audit ‚Äúdeploy‚Äù terminology - now it‚Äôs supposed to be   ‚ÄúAccept Platform Changes‚Äù
* Audit records should be sent with VENDOR_POLICY object type (new) instead of POP. including vendor policy itself (and it‚Äôs Id), audit happens in DeploySingleActivity.
* add deployed_at column to vendor_policy db table to keep track on last deployment timestamp.
* expose the deployed_at field in the vendor policy DTO (the one returning in {{/orchestrator/1.0/pops/{popId}
/policies/
{vendorPolicyId}}} endpoint response.

# {{POST /orchestrator/1.0/pops/{popId}/policies/{policyId}/discovery}}

changes:

*  add Auth ws Permissions checks 

Management (External) API:

{{POST /orchestrator/1.0/pop-operations/deploy/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
}}

changes:


	add Auth ws Permissions checks



*including unit test and integration tests.
- **BE - Enhance Orch Override API  (Permissions & Audit)**: Internal APIs:


	{{POST /orchestrator/1.0/pops/
{popId}/policies/{policyId}/vendor-policies/deploy}} 

changes:

*  add Auth ws Permissions checks 
* Audit ‚ÄúOverride‚Äù terminology - now it‚Äôs supposed to be   ‚ÄúAccept Vendor Changes‚Äù
* Audit records should be sent with VENDOR_POLICY object type (new) instead of POP. including vendor policy itself (and it‚Äôs Id), audit happens in OverrideSingleActivity.
* add overriden_at column to vendor_policy db table to keep track on last override timestamp.
* expose the overriden_at field in the vendor policy DTO (the one returning in {{/orchestrator/1.0/pops/{popId}
/policies/
{vendorPolicyId}}} endpoint response.

Management (External) API:

{{POST /orchestrator/1.0/pop-operations/override/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
}}



changes:


	add Auth ws Permissions checks



*including unit test and integration tests.
- **BE - Support policy vendor details new behavior**: https://plainid.atlassian.net/wiki/spaces/DEV/pages/4588503068/Vendor+Compare+View+Core+-+Tech+Design#2.3.2.3.-Changes-To-Support-Vendor-Policy-details-editing-in-%E2%80%9CVendor-Policy%E2%80%9D-context 
- **BE - Support vendor policy indicators in policy catalog**: 
	support fetching of vendor policy indicators by platform policies to display them on top of the policy cards in policy catalog.



enhance existing api:
GET /policy-mgmt/2.0/policies?offset=0&limit=20&sort&#91;name&#93;=ASC&filter&#91;ownerId&#93;=...
to include vendor policies indicators (per application in applications list), controlled by expand=indicators new query param.
by the tech design: https://plainid.atlassian.net/wiki/spaces/DEV/pages/4588503068/Vendor+Compare+View+Core+-+Tech+Design#2.3.3.2.-Policy-Management-Service 

notes: 
1. each platform policy can be linked to multiple vendor policies that each holds a list of indicators.
- **BE - Add limit to Snowflake/ Databricks order attribute**: we need to enforce limit on order attribute value in snowflake and databricks.

after speaking with Tal Agam , agreed to set the limit to 50. (50 platform policies can map to a single vendor policy)
- **In saas policy open vendor compare after creation**: In case of the Saas policy, open the vendor compare tab after the policy wizard creation
- **Vendor compare map stretch **: Vendor compare map should cover the entire width + ignore the header‚Äôs bottom margin.

Implementation Suggestion


	pass prop on selected tab to Page component ‚ÄúisFullScreenContent‚Äù
	pageV2 should use FlexibleWrapper instead of PageWrapper (and add the top margin manually)
	header margin-bottom style should move from header to page v2 style


- **BE - refactor deploy and override audit**: example for new audit event


{
  "id": "7b9c72dd-15e0-47e8-8bc0-75bbab00f2b3",
  "ownerType": "POLICY_ORCHESTRATION_POINT",
  "ownerId": "POP1234567890",
  "ownerName": "PowerBI-dev",
  "resource": "VENDOR_POLICY",
  "resourceId": "OCP0987654321",
  "resourceName": "allow-alexey-free-dayoff-policy",
  "userId": "SYSTEM_USER",
  "timestamp": 1762335325393,
  "action": "ACCEPT_PLATFORM_CHANGES", // enum: [ACCEPT_VENDOR_CHANGES, ACCEPT_PLATFORM_CHANGES]
  "entityType": "API",
  "additionalData": null,
  "value": "{\"id\":\"POP1X75EGUW4FVU\",\"name\":\"ZScaler\",\"orchestrationWorkspaceId\":\"3bf3e85c-e52d-42e5-adbd-411504105ed8\",\"identityWorkspaceId\":\"9462140b-5c72-4fd5-a1ba-005ec284c12a\",\"authorizationWorkspaceId\":\"b0df00da-6443-4cdc-92bf-a3cf4f10211b\",\"popConnectionCredentials\":{\"authenticationMethod\":\"client_credentials\",\"credentials\":{\"API Key\":\"NzIwNjM1MzgyNzI2NjU2MzYtYmI1ZjYxYjAtNGE2Yi00NmIxLWFhOGQtMGM0NjEyYTcxMjhj\",\"API Key Secret\":\"l;o]A7<e8;C/<NGcmuN|oDO:cyXpJ<X,\",\"Customer ID\":\"72063538272665600\",\"Customer based URI\":\"https://config.zpatwo.net\"}},\"vendorName\":\"ZScaler\",\"mode\":\"MANAGE\",\"state\":\"DISCOVERY_IN_PROGRESS\",\"discoveredAt\":\"2025-11-05T11:26:25+02:00\",\"createdAt\":\"2025-10-12T12:00:01.819276Z\",\"updatedAt\":\"2025-11-05T11:26:25.714918Z\"}",
  "prevValue": null
}

- **BE - authz workspace permissions check for new pop apis v2**: there should be a new permissions check on the authz workspace of the user in the following apis:


	POST {{/orchestrator/2.0/pop-operations/deploy/
{envId}/{popId}/{vendorPolicyId}}}
# POST {{/orchestrator/2.0/pop-operations/override/{envId}
/
{popId}
/
{vendorPolicyId}
}}




--- ACCEPTANCE CRITERIA (MANDATORY: Map each to test cases) ---

1. behavior validated on both new and existing POPs from different vendors

2. behavior validated for different types of policies (masking, row, general)

3. behavior validated for use cases when multiple platform policy are connected to single vendor policy

4. behavior validated with large amount of polices in the display

5. Updated behavior and terminology for audit and permissions validated

6. Update pop details (including order) via UI or PAC works as expected

7. no regression for flags, reconciliation actions, schedualer, etc'

8. No regression for policies used for dynamic authorization service


--- FUNCTIONALITY TO TEST (Derived from Story + PRD) ---

1. Introducing Vendor compare view into policy 360.

2. Enable reconciliation operations such as policy deployment and override - all from a single, unified view

3. change order using drag and drop

4. zoom in out and pinch

5. Policy diff view will not open on a full screen - side menu will still be visible (unlike figma)

6. behavior validated with large amount of polices in the display

7. Update pop details (including order) via UI or PAC works as expected

8. Selecting Vendor Policy: Vendor Policies as Selectable Objects
	
		Selecting a vendor policy will also reveal additional connected platform policies (all platfrom policy connected to that vendor policy should be displayed).
		Where relevant, the orde

9. Select all Assets: Users have the option to select all assets by clicking over the Assets counter.
Make sure to add ‚ÄúSelect All‚Äù or ‚ÄúUnselect All‚Äù tooltip

+ Add assets relevant icons

10. Policies order: fetch the order of the policies and sort them accordingly

Also add dropdown numbers for changing position



Order

When a vendor policy is selected, the Order attribute should be displayed alongside the related platform policies.




11. View controls implementation: View controls implementation:
Users should be able to pinch, zoom in, and zoom out, with expected behavior matching the interactions demonstrated in the Figma design.

12. Assets icons by type: Implement asset icon by types

13. Support arrows within the Dynamic Map View (zoom): Add support for the arrows within the view

14. Policy order -DnD: Support policy order drag and drop

15. Implement Vendor Policy edit: Vendor Policy details

When a vendor policy is selected in the display, its details (currently shown in the Details tab under POP details) will now appear.

Presenting POP details in the vendor policy context simplifies 

16. Implement new Vendor Compare tab in policy: Look in PRD for restrictions for the tab + BE integration for status

17. Policy indicators: Policy cards will display clear indicators to highlight synchronization status, policy type, and state, with consistent tooltips. The look, feel, and placement of these indicators should align with the experience already available 

18. Code compare tab implementation: Implement the top right ‚Äúlast updated at‚Ä¶‚Äù section and implement the following





	Compare Code Tab ‚Äì
	
		Platform policy (left) vs. vendor policy (right).
		Flags for Pending Deployment and Vendor Changes Detected 

19. Update vendor sections section in policy the details: Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of

20. Audit Events view: Implement the Audit Events view



https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1402-143201&t=fkHoKSOQvSsbLYvU-4

21. Platform Policy navigation: Implement the policy navigation on policy hover


https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1315-55107&t=SWsoiuXSxSWf4pCb-4 



Clicking it navigates the user to that policy‚Äôs Vendor Compa


--- API SPECIFICATIONS (Use EXACT endpoints/schemas) ---


Endpoint: ['GET'] /policy-mgmt/3.0/policies/

Service: Mentioned in story


Endpoint: ['POST', 'POST'] /orchestrator/1.0/pops/

Service: Mentioned in story


Endpoint: ['POST'] /policy-mgmt/1.0/vendor-policies/ordered-platform-policies

Service: Mentioned in story


Endpoint: ['POST'] /policy-mgmt/1.0/policies-search

Service: Mentioned in story


Endpoint: ['POST'] /internal-assets/1.0/asset-types-search

Service: Mentioned in story


--- PLAINID COMPONENTS INVOLVED ---

PAP, PlainID Workspace, Policy Administration Point, Policy Management, Policy Object Provider


--- RISK AREAS & TESTING FOCUS ---

‚Ä¢ API Integration: 5 endpoints involved - verify request/response formats, error handling, and auth

‚Ä¢ Multi-component interaction: 5 components - test data flow and consistency

‚Ä¢ Authorization logic: Verify policy evaluation, decision points, and enforcement

‚Ä¢ Data persistence: Test CRUD operations, data consistency, and rollback scenarios

‚Ä¢ User interface: Verify user workflows, form validation, and error messages



=== ENGINEERING TASKS FOR THIS STORY ===
(CRITICAL: Use these implementation details for test scenarios - they often contain API endpoints, UI behavior, and edge cases)

- PLAT-17078: Selecting Vendor Policy
  Details: 
	Vendor Policies as Selectable Objects
	
		Selecting a vendor policy will also reveal additional connected platform policies (all platfrom policy connected to that vendor policy should be displayed).
		Where relevant, the order attribute will be displayed (details in designated section).
		All lines connected to the vendor policy are highlighted, while others are grayed out.
		Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of the policy authoring experience) full behavior details in designated section
		An option to navigate to the Policy Diff will be available (new terminology replacing today‚Äôs ‚Äúpolicy side-by-side‚Äù). Full behavior details are provided in the designated section.
	
	



4.5 Default view


	If only one vendor policy is available in the display, it should be automatically selected when the user enters this view.
	If multiple vendor policies are available, no filter will be selected by default.


- PLAT-17079: Select all Assets
  Details: Users have the option to select all assets by clicking over the Assets counter.
Make sure to add ‚ÄúSelect All‚Äù or ‚ÄúUnselect All‚Äù tooltip

+ Add assets relevant icons
- PLAT-17083: To deleted
  Details: To deleted
- PLAT-17087: Policies order
  Details: fetch the order of the policies and sort them accordingly

Also add dropdown numbers for changing position



Order

When a vendor policy is selected, the Order attribute should be displayed alongside the related platform policies.


	Sorting ‚Äì Platform policies will be sorted in ascending order. The current policy will not necessarily appear at the top. Inactive policies have no order value but should still appear, listed last.
	Managing order ‚Äì Users should be able to adjust the order via drag-and-drop or a dropdown menu. The behavior, available values, and logic must remain consistent with the generic implementation defined here: Policy Schema ‚Äì Order Attribute.
	When to display order:
	
		If the anchor of the order attribute is the vendor policy id (e.g., Snowflake, Databricks), order should be shown and managed directly on the platform policy card, since it determines the internal sequence of those policies.
		If the anchor is any other option (e.g., in Zscaler, the anchor is the application), order should be displayed and managed in the vendor policy details.
		In some cases (e.g., PBI), no order attribute is defined as part of the vendor schema, and therefore it should not be displayed.
	
	


- PLAT-17084: View controls implementation
  Details: View controls implementation:
Users should be able to pinch, zoom in, and zoom out, with expected behavior matching the interactions demonstrated in the Figma design.
- PLAT-17392: Assets icons by type
  Details: Implement asset icon by types
- PLAT-17467: Support arrows within the Dynamic Map View (zoom)
  Details: Add support for the arrows within the view
- PLAT-17088: Policy order -DnD
  Details: Support policy order drag and drop
- PLAT-17081: Implement Vendor Policy edit
  Details: Vendor Policy details

When a vendor policy is selected in the display, its details (currently shown in the Details tab under POP details) will now appear.

Presenting POP details in the vendor policy context simplifies authoring, especially when supporting many-to-many relationships between platform and vendor policies.

This replaces the existing details presentation (only for edit), for create details will remain in the Details tab until further enhancements to the data policy authoring experience.


	Viewing and Editing ‚Äì Users will be able to view and manage all POP details directly. On edit, a popup form containing all fields will open. Behavior (e.g., editable fields, dropdowns) should follow the existing generic form logic managed at the policy schema level, consistent with vendor-specific PRDs.







	Implementation of Details View
	Implementation of edit Popup
	integration
	tests
	cr + fix


- PLAT-17619: Implement new Vendor Compare tab in policy
  Details: 
Look in PRD for restrictions for the tab + BE integration for status
- PLAT-17409: Policy indicators
  Details: Policy cards will display clear indicators to highlight synchronization status, policy type, and state, with consistent tooltips. The look, feel, and placement of these indicators should align with the experience already available in the policy catalog.

Platform Policy Cards:


	Incomplete policy indicator with tooltip
	Inactive policy indicator with tooltip
	Restrictive policy indicator with tooltip



Vendor Policy Cards:


	Pending deployment flag with tooltip
	Vendor change detected flag with tooltip
	Deployment failed flag with tooltip



Multiple flags may appear on a single vendor  policy. Precedence and behavior must follow the established flag logic already implemented and described here: Discovery & Reconciliation Flows. Additionally same as today if one of those flags exists than also the POP will be flag with ‚ÄúPolicy discrepancies‚Äù indication

Policy catalog

If a vendor policy card includes a flag, the same flag (with tooltip) is inherited and should also appear in the Vendor Compare View and in the Policy Catalog. This can result having a single flag with multiple tooltips in the policy catalog itself:


	In case there are two tooltips both should appear: https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1033-46505&p=f&t=8P3DIAELIDZnL66p-0
	In case there are 3 or more tooltips generic tooltip should appear ‚ÄúPolicy discrepancies‚Äù once user will navigate into the policy he will see the different flags on the different views with relevant tooltips


- PLAT-17406: Code compare tab implementation
  Details: Implement the top right ‚Äúlast updated at‚Ä¶‚Äù section and implement the following





	Compare Code Tab ‚Äì
	
		Platform policy (left) vs. vendor policy (right).
		Flags for Pending Deployment and Vendor Changes Detected shown when relevant.
		Indicators at the section and row level are demonstrated in the Figma but will not be implemented at this stage. [ FUTURE ]
		Options to Accept Platform Changes (Deploy) and Accept Vendor Changes (Override) will be available when POP is in manage mode.
		Option to accept changes at the section level  shown in Figma but not currently implemented. [ FUTURE ]
		Last operation performed with success or failure status and timestamp indication will be displayed in the top-right corner:
		
			Platform Changes Applied / Failed to Apply Platform Changes
			Vendor Changes Applied / Failed to Apply Vendor Changes
			On failure, users can view and copy the detailed error message.
		
		
		Code will be displayed in collapsible sections, allowing single or multi-section expand/collapse.
		Section titles will be unified between both sides with aligned scrolling.
		Section Titles ‚Äì Microcopy Updates ‚Äì Section titles should be updated to be more concise and user-friendly. Updates should be applied per vendor:
		
			Zscaler - https://plainid.atlassian.net/wiki/spaces/PM/pages/3039100929
			Power BI - https://plainid.atlassian.net/wiki/spaces/PM/pages/3038806026
			Snowflake
			
				Row - https://plainid.atlassian.net/wiki/spaces/PM/pages/3362914305
				Masking https://plainid.atlassian.net/wiki/spaces/PM/pages/3289612289 , https://plainid.atlassian.net/wiki/spaces/PM/pages/3563749377
			
			
			Databricks -
			
				Row - https://plainid.atlassian.net/wiki/spaces/PM/pages/4207477040
				Masking - https://plainid.atlassian.net/wiki/spaces/PM/pages/4207477092
			
			
		
		
		Policy Could Not Be Translated ‚Äì If a platform policy cannot be translated due to errors or incorrect authoring, user should still be able to navigate to the policy diff. The vendor policy should still display, and the platform side should have an error flag next to it tooltip should show the error: ‚ÄúPolicy could not be translated.‚Äù
	
	



- PLAT-17390: Update vendor sections section in policy the details
  Details: Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of the policy authoring experience) full behavior details in designated section
- PLAT-17391: Audit Events view
  Details: Implement the Audit Events view



https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1402-143201&t=fkHoKSOQvSsbLYvU-4
- PLAT-17082: Platform Policy navigation
  Details: Implement the policy navigation on policy hover


https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1315-55107&t=SWsoiuXSxSWf4pCb-4 



Clicking it navigates the user to that policy‚Äôs Vendor Compare View, with the relevant connected vendor policy/asset already selected based on the filter chosen in the original navigation that resulted in this policy being displayed.
- PLAT-17080: FUTURE:Implement Vendor Policy drawer
  Details: Implement Vendor Policy drawer - Implemented

Form + buttons need to be implemented
- PLAT-17222: BE Vendor Compare Tech Design
  Details: Write a tech design for:
1. new / existing internal APIs to support vendor compare tab core functionalities 
2. permission migration / changes (auth ws ‚Üê orchestration ws)
- PLAT-17266: Vendor Compare - Core capabilities - Test Plan
  Details: Vendor Compare - Core capabilities - Test Plan
- PLAT-17267: Vendor Compare - Core capabilities - Manual Tests
  Details: Vendor Compare - Core capabilities - Manual Tests
- PLAT-17280: BE Vendor Compare OpenAPI spec
  Details: document all new apis in the relevant service openAPI file (FB)
- PLAT-17422: BE - Implement relations API
  Details: Implement API 1: Get related Assets, Asset Types and Vendor Policy IDs by Platform Policy ID
{{GET /policy-mgmt/3.0/policies/
{policyId}
/policy-relations}}
In policy-mgmt by the tech design.

including unit test and integration tests
- PLAT-17423: BE - Implement new vendor policies AMQP handlers
  Details: Implement the new amqp handlers for the queues :


	orchestrator.v1.vendor-policy.list
	orchestrator.v1.policy-query-filters.generate/build



in orchestrator, by the tech design


including unit test and integration tests.
- PLAT-17424: BE - Implement ordered platform policies API
  Details: Implement API 2: Get Ordered List of Platform Policy IDs per Vendor Policy
POST /policy-mgmt/1.0/vendor-policies/ordered-platform-policies
 by the tech design


including unit test and integration tests.
- PLAT-17425: BE - Implement enriched Assets API
  Details: Implement API 2: Get multiple enriched assets by IDs
POST internal-assets/assets/v3/vendor-enriched
 by the tech design

and the corresponding amqp handler in orchestrator for fetching vendor object details by externalId
including unit test and integration tests.
- PLAT-17426: BE - Implement Asset Types search API
  Details: Implement API 4: Get multiple Asset types by IDs
POST internal-assets/1.0/asset-types-search
 by the tech design


including unit test and integration tests.
- PLAT-17427: BE - Implement Vendor policies search API
  Details: Implement API : Get multiple vendor policies by IDs
POST orchestrator/1.0/vendor-policies-search
 by the tech design

! pay attention to permission checks against Auth Ws.


including unit test and integration tests.
- PLAT-17428: BE - Implement Platform policies search API
  Details: Implement API : Get multiple platform policies by IDs
POST policy-mgmt/1.0/policies-search
 by the tech design


including unit test and integration tests.
- PLAT-17429: BE - Implement patch Platform policy order API
  Details: Implement API : Patch Platform policy order by policy ID and Application ID
{{PATCH /2.0/policies/
{polciyId}
/applications/
{applicationId}
}}
 by the tech design


including unit test and integration tests.
- PLAT-17430: BE - Enhance Orch Deploy API  (Permissions & Audit)
  Details: Internal APIs:
1. {{POST /orchestrator/1.0/pops/
{popId}/policies/{policyId}/pid-policy/deploy}}

changes:

*  add Auth ws Permissions checks 
* Audit ‚Äúdeploy‚Äù terminology - now it‚Äôs supposed to be   ‚ÄúAccept Platform Changes‚Äù
* Audit records should be sent with VENDOR_POLICY object type (new) instead of POP. including vendor policy itself (and it‚Äôs Id), audit happens in DeploySingleActivity.
* add deployed_at column to vendor_policy db table to keep track on last deployment timestamp.
* expose the deployed_at field in the vendor policy DTO (the one returning in {{/orchestrator/1.0/pops/{popId}
/policies/
{vendorPolicyId}}} endpoint response.

# {{POST /orchestrator/1.0/pops/{popId}/policies/{policyId}/discovery}}

changes:

*  add Auth ws Permissions checks 

Management (External) API:

{{POST /orchestrator/1.0/pop-operations/deploy/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
}}

changes:


	add Auth ws Permissions checks



*including unit test and integration tests.
- PLAT-17431: BE - Enhance Orch Override API  (Permissions & Audit)
  Details: Internal APIs:


	{{POST /orchestrator/1.0/pops/
{popId}/policies/{policyId}/vendor-policies/deploy}} 

changes:

*  add Auth ws Permissions checks 
* Audit ‚ÄúOverride‚Äù terminology - now it‚Äôs supposed to be   ‚ÄúAccept Vendor Changes‚Äù
* Audit records should be sent with VENDOR_POLICY object type (new) instead of POP. including vendor policy itself (and it‚Äôs Id), audit happens in OverrideSingleActivity.
* add overriden_at column to vendor_policy db table to keep track on last override timestamp.
* expose the overriden_at field in the vendor policy DTO (the one returning in {{/orchestrator/1.0/pops/{popId}
/policies/
{vendorPolicyId}}} endpoint response.

Management (External) API:

{{POST /orchestrator/1.0/pop-operations/override/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
}}



changes:


	add Auth ws Permissions checks



*including unit test and integration tests.
- PLAT-17544: BE - Support policy vendor details new behavior
  Details: https://plainid.atlassian.net/wiki/spaces/DEV/pages/4588503068/Vendor+Compare+View+Core+-+Tech+Design#2.3.2.3.-Changes-To-Support-Vendor-Policy-details-editing-in-%E2%80%9CVendor-Policy%E2%80%9D-context 
- PLAT-17682: BE - Support vendor policy indicators in policy catalog
  Details: 
	support fetching of vendor policy indicators by platform policies to display them on top of the policy cards in policy catalog.



enhance existing api:
GET /policy-mgmt/2.0/policies?offset=0&limit=20&sort&#91;name&#93;=ASC&filter&#91;ownerId&#93;=...
to include vendor policies indicators (per application in applications list), controlled by expand=indicators new query param.
by the tech design: https://plainid.atlassian.net/wiki/spaces/DEV/pages/4588503068/Vendor+Compare+View+Core+-+Tech+Design#2.3.3.2.-Policy-Management-Service 

notes: 
1. each platform policy can be linked to multiple vendor policies that each holds a list of indicators.
- PLAT-17838: BE - Add limit to Snowflake/ Databricks order attribute
  Details: we need to enforce limit on order attribute value in snowflake and databricks.

after speaking with Tal Agam , agreed to set the limit to 50. (50 platform policies can map to a single vendor policy)
- PLAT-17845: In saas policy open vendor compare after creation
  Details: In case of the Saas policy, open the vendor compare tab after the policy wizard creation
- PLAT-17846: Vendor compare map stretch 
  Details: Vendor compare map should cover the entire width + ignore the header‚Äôs bottom margin.

Implementation Suggestion


	pass prop on selected tab to Page component ‚ÄúisFullScreenContent‚Äù
	pageV2 should use FlexibleWrapper instead of PageWrapper (and add the top margin manually)
	header margin-bottom style should move from header to page v2 style


- PLAT-17859: BE - refactor deploy and override audit
  Details: example for new audit event


{
  "id": "7b9c72dd-15e0-47e8-8bc0-75bbab00f2b3",
  "ownerType": "POLICY_ORCHESTRATION_POINT",
  "ownerId": "POP1234567890",
  "ownerName": "PowerBI-dev",
  "resource": "VENDOR_POLICY",
  "resourceId": "OCP0987654321",
  "resourceName": "allow-alexey-free-dayoff-policy",
  "userId": "SYSTEM_USER",
  "timestamp": 1762335325393,
  "action": "ACCEPT_PLATFORM_CHANGES", // enum: [ACCEPT_VENDOR_CHANGES, ACCEPT_PLATFORM_CHANGES]
  "entityType": "API",
  "additionalData": null,
  "value": "{\"id\":\"POP1X75EGUW4FVU\",\"name\":\"ZScaler\",\"orchestrationWorkspaceId\":\"3bf3e85c-e52d-42e5-adbd-411504105ed8\",\"identityWorkspaceId\":\"9462140b-5c72-4fd5-a1ba-005ec284c12a\",\"authorizationWorkspaceId\":\"b0df00da-6443-4cdc-92bf-a3cf4f10211b\",\"popConnectionCredentials\":{\"authenticationMethod\":\"client_credentials\",\"credentials\":{\"API Key\":\"NzIwNjM1MzgyNzI2NjU2MzYtYmI1ZjYxYjAtNGE2Yi00NmIxLWFhOGQtMGM0NjEyYTcxMjhj\",\"API Key Secret\":\"l;o]A7<e8;C/<NGcmuN|oDO:cyXpJ<X,\",\"Customer ID\":\"72063538272665600\",\"Customer based URI\":\"https://config.zpatwo.net\"}},\"vendorName\":\"ZScaler\",\"mode\":\"MANAGE\",\"state\":\"DISCOVERY_IN_PROGRESS\",\"discoveredAt\":\"2025-11-05T11:26:25+02:00\",\"createdAt\":\"2025-10-12T12:00:01.819276Z\",\"updatedAt\":\"2025-11-05T11:26:25.714918Z\"}",
  "prevValue": null
}

- PLAT-17873: BE - authz workspace permissions check for new pop apis v2
  Details: there should be a new permissions check on the authz workspace of the user in the following apis:


	POST {{/orchestrator/2.0/pop-operations/deploy/
{envId}/{popId}/{vendorPolicyId}}}
# POST {{/orchestrator/2.0/pop-operations/override/{envId}
/
{popId}
/
{vendorPolicyId}
}}





</story_to_test>



--------------------------------------------------------------------------------

MANDATORY API STEP REQUIREMENTS (Use the API SPECIFICATIONS above)

--------------------------------------------------------------------------------

For ANY API-related test step, you MUST:

- Include HTTP method and EXACT path (e.g., POST /api/v1/policies)

- Include auth details if required (e.g., Bearer token, client ID)

- Include parameters with exact names and types (path/query)

- Include request body JSON with EXACT field names from schema, with realistic example values

- State expected response code(s) and key response fields per schema

- Only use endpoints listed in API SPECIFICATIONS (do NOT invent endpoints)




================================================================================

‚ö†Ô∏è  MANDATORY BEFORE GENERATING TESTS:

================================================================================

In your reasoning section, you MUST:

1. EXPLAIN IN YOUR OWN WORDS: What does this feature do? What problem does it solve?

2. LIST FUNCTIONALITY TO TEST: Use the bullets above (Derived from Story + PRD)

3. ANALYZE ENGINEERING TASKS: List key subtasks and what they implement (APIs, UI, integrations)

4. LIST EVERY ACCEPTANCE CRITERION and map each to test(s)

5. EXPLAIN: What could break? What needs verification?

6. THEN AND ONLY THEN: Generate tests based on YOUR UNDERSTANDING



If you cannot explain the feature clearly, you cannot test it properly.

Examples below are for STYLE/TERMINOLOGY ONLY - not for copying scenarios.

================================================================================



<reference_examples>

Learn patterns and terminology from these examples, but TEST THE STORY ABOVE


<rag_grounding>

You have been provided with RETRIEVED CONTEXT from this company's actual data:
- Past test plans (learn their test structure and patterns)
- Company documentation (use their exact terminology)
- Existing test cases (match their style and detail level)
- Similar stories (apply the same testing approach)
- External API docs (copy exact request/response examples)
- Swagger/OpenAPI documentation (use exact endpoint paths, parameters, and schemas)

PRIMARY DIRECTIVE:
The STORY you're testing is your PRIMARY source. Retrieved examples are SECONDARY (for style/terminology only).

üö® DO NOT PATTERN MATCH FROM EXAMPLES!
Read the story. Understand the feature. Test what it actually does.

CRITICAL: You are testing PlainID's PBAC platform - demonstrate domain expertise:
- Use PlainID terminology naturally (not generically)
- Reference correct architectural components (PAP/PDP/PEP/POP/PIPs)
- Mention relevant workspaces in test context
- Show understanding of policy lifecycle and runtime flows
- Use PlainID-specific concepts: vendor IDs, policy promotion, deny reasons, entitlements

USAGE RULES:
1. Read the story description, acceptance criteria, and subtasks FIRST
2. Understand what the feature does before looking at examples
3. If swagger docs are provided ‚Üí use EXACT endpoint paths, parameters, schemas from the story's API
4. If examples show PlainID terminology ‚Üí use that terminology for YOUR story
5. If examples show test structure ‚Üí match that structure for YOUR feature
6. NEVER copy test scenarios from examples - generate scenarios from the STORY
7. Tests must map to acceptance criteria from the STORY
8. Test data must be relevant to the STORY's feature (not example features)

SWAGGER/OPENAPI CONTEXT:
When Swagger/OpenAPI documentation is provided:
- Use EXACT endpoint paths (e.g., /api/v1/policies/{policyId})
- Reference EXACT parameter names and types from the spec
- Include EXACT status codes from the documented responses
- Copy request/response schema field names verbatim
- Note authentication requirements from the security schemes

THINK: "How do we test things HERE?" not "How do I usually test things?"

If retrieved context lacks specific information you need, state:
"See [specific doc name] for exact [field/endpoint/structure]"
Do NOT invent or assume details not in the context.

</rag_grounding>


<retrieved_context>
=== COMPANY DATA (Retrieved from RAG) ===
This is your PRIMARY reference for test generation.


--- SIMILAR PAST TEST PLANS (Learn patterns from these) ---


1. Test Plan Example:
   Similarity: 0.75
   Story: PLAT-15596 - (2.3.2) - PAP - Policy 360¬∞ - Phase 2 - Add Vendor Compare View - Core capabilities
Components: PAP

Summary: The tests verify the functionality and user experience of the Vendor Compare View in PlainID's Policy 360¬∞, ensuring synchronization between PlainID and vendor-native policies, seamless reconciliation operations, and accurate display of policy relationships and indicators.

8 Test Cases:

1. Verify navigation to Vendor Compare View from Authorization Workspace
   Type: TestCaseType.FUNCTIONAL, Priority: PriorityLevel.CRITICAL, Risk: high
   Description: Ensure users can navigate to the Vendor Compare View from the Policies tab in the Authorization Workspace.
   Preconditions: User is logged into PlainID and has access to the Authorization Workspace.
   Steps (1 total):
      Step 1: Navigate to Authorization Workspace ‚Üí Policies menu ‚Üí Click on Vendor Compare View
         Expected: Vendor Compare View opens displaying relevant policies and assets.
         Test Data: User has access to the Authorization Workspace.
   Expected Result: User successfully navigates to the Vendor Compare View without errors.
   Tags: UI

2. Verify vendor policy selection reveals connected platform policies
   Type: TestCaseType.FUNCTIONAL, Priority: PriorityLevel.CRITICAL, Risk: high
   Description: Validate that when a vendor policy is selected, all linked platform policies are displayed correctly.
   Preconditions: Vendor policy exists with connected platform policie
   ----------------------------------------------------------------------

2. Test Plan Example:
   Similarity: 0.59
   Story: PLAT-13541 - (6.5) - PAP - Generic - Show Policy list by Application
Components: PAP

Summary: These tests verify the functionality of viewing and managing policies associated with an application in PlainID, including the correct display of the policies tab, retrieval of policies, search functionality, and link/unlink operations.

5 Test Cases:

1. Verify 'Policies' tab displays correctly on Application page
   Type: TestCaseType.FUNCTIONAL, Priority: PriorityLevel.CRITICAL, Risk: high
   Description: Validate that when a user navigates to an application's page, the 'Policies' tab is available and clickable, leading to the correct policies list view.
   Preconditions: User has access to the Application page and the application exists.
   Steps (2 total):
      Step 1: Navigate to Authorization Workspace ‚Üí Applications menu ‚Üí Select Application 'App-123'
         Expected: Policies tab is displayed on the Application page
         Test Data: Application ID: App-123
      Step 2: Click 'Policies' tab
         Expected: User is redirected to the policies list view for the application 'App-123'
         Test Data: Policies tab should display 'Policies Using this Application' title
   Expected Result: 'Policies' tab correctly leads to the policies view for the application
   Tags: UI

2. Verify policies associated with an application are retrieved and displayed correctly
   Type: TestCaseType.FUNCTIONAL, Priority: PriorityLevel.CRITICAL, Risk: high
   Description: Ensure th
   ----------------------------------------------------------------------

--- COMPANY DOCUMENTATION (Use this terminology) ---


1. Document: Policy 360¬∞ - Vendor Compare View
   Similarity: 0.78
   Title: Policy 360¬∞ - Vendor Compare View

none 1. Summary Policy 360&deg; introduces a dynamic, multi-view interface that delivers a comprehensive perspective on policy management. It empowers administrators and auditors with deep visibility and control, offering an interactive view of any policy along with related data, dependencies, and connections. As part of this initiative, we will introduce a new view focused on SaaS authorization management. This view will highlight relationship between policies managed within the platform and those in the vendor system including discrepancies, while enabling reconciliation operations. 2. Problem statment Currently, SaaS authorization management is fragmented across two catalogs in the platform, creating inefficiencies and poor visibility. In the Authorization Workspace , policy authors can create, update, and delete policies, but cannot view synchronization status. In the Orchestration Workspace , users see discrepancies between platform and vendor in a side-by-side view and can deploy or override policies - but must switch contexts. Complex many-to-many relationships between platform and vendor policies lack any visibility. This results in a non-intuitive, disjointed user experience. 3. High level solution Enhancing the policy management experience with deep visibility and seamless reconciliation: Visualize the relationship between PlainID policies and their vendor-native counterparts Gain transparency into policy synchronization status between plainid and the vendor Streamline authoring workflows by exposing side-by-side comparisons in vendor language within the Authorization Workspace Enable reconciliation operations such as policy deployment and override - all from a single, unified view 4. Detailed Requirements 4.1 Figma Design reference: Figma file Prototype: Figme file 4.2 Navigate to vendor compare view The Vendor Compare View will be available only for policies used in SaaS authorization management (orchestration). This includes both native and structured policies. When creating a new policy from wizard in case vendor compare view is available (any saas authorization management policy) user should land on vendor compare, if not then user should land on the map same as today 4.3 Overview on vendor compare view The view is designed to demonstrate the relationship between policies in the platform, vendor policies, and associated protected assets. Upon navigation, the user should see: Platform Policy &ndash; The selected policy, with a clear visual indication - &quot;Current&quot; Assets &ndash; A list of protected assets with counters, showing the actual single asset linked to the policy. (Rulesets should be ignored.) Relevant icons should be displayed as per the Figma design. logically behavior should be as follows in case policy is connected to multiple asset types some has direct asset connected some has only rulesets - only asset types with direct assets should be displayed on vendor compare along with the connected direct assets in case policy is connected to asset types but non of them is connected to a single asset - all asset types will be presented with logic described above, an generic state icon will be displayed the title below the icon should be the display name of the connected asset type in case policy is incomplete and what step is empty or policy is native a generic icon will be displayed, the title below the icon will be &ldquo;undefined&rdquo; Examples of behavior based on policy types: Masking Policy - Columns or tags linked to the policy. Row Access Policy - Associated table asset. (Currently uses empty state logic - to be resolved when table asset support is added.) General Policies with a direct asset - (e.g., Zscaler) Display connected assets. Vendor Policies &ndash; List of all vendor policies connected to the PlainID policy. Note: at this point should not display vendor icon on the card since we do not support reuse will always be the same icon Connecting Lines &ndash; Visualize relationships between policies and assets. Note that different assets may be connected to different vendor policies, and this should be considered as part of the solution. Currently, one-to-many relationships are not supported, so only one vendor policy will be displayed. However, both FE and BE infrastructure should prepare for this use case as it will be added Known limitations: There are a few scenarios when we will not be able to currently display the relationship between the object displayed on the asset and the vendor policy in case a new policy created using a new asset type generated by the user and not by discovery (databricks, snowflake) relationship can&rsquo;t be displayed before the deploy in case a policy is connected to action and asset type with no asset or ruleset (masking policy - snowflake and databricks) PBI - display connection to all asset types were true is displayed instead of actual dax Currently a fallback was done if we can&rsquo;t tell to what vendor policies an asset type is linked to, display links to all vendor policies. - this should be addressed when we will support one to many 4.4 Browsing Vendor Compare View Objects in the Vendor Compare View are clickable, allowing users to drill down for additional details. Assets as Filters Users can click an asset to highlight it. If additional policies are connected to that asset (e.g., multiple platform policies linked to a single vendor policy, common in data vendors with multiple case statements), all connected policies will appear, including incomplete or inactive ones (see Indications section). Multi-select is supported: clicking again unselects the asset, hiding non-current platform policies. Vendor policies and connected assets remain visible at all times. Hovering over the asset counter provides the option to Select All or Unselect All . Vendor Policies as Selectable Objects Selecting a vendor policy will also reveal additional connected platform policies (all platfrom policy connected to that vendor policy should be displayed). Where relevant, the order attribute will be displayed (details in designated section). All lines connected to the vendor policy are highlighted, while others are grayed out. Vendor policy details will be shown at the bottom, replacing the current display details tab (edit only - on create remains available in the details tab, enhancements will be introduced as part of the policy authoring experience) full behavior details in designated section An option to navigate to the Policy Diff will be available (new terminology replacing today&rsquo;s &ldquo;policy side-by-side&rdquo;). Full behavior details are provided in the designated section. Platform Policy Navigation Hovering over a platform policy in the display reveals a navigation option. Clicking it navigates the user to that policy&rsquo;s Vendor Compare View, with the relevant connected vendor policy/asset already selected based on the filter chosen in the original navigation that resulted in this policy being displayed. 4.5 Default view If only one vendor policy is available in the display, it should be automatically selected when the user enters this view. If multiple vendor policies are available, no filter will be selected by default. 4.6 Policy indications Policy cards will display clear indicators to highlight synchronization status, policy type, and state, with consistent tooltips. The look, feel, and placement of these indicators should align with the experience already available in the policy catalog. Platform Policy Cards: Incomplete policy indicator with tooltip Inactive policy indicator with tooltip Restrictive policy indicator with tooltip Vendor Policy Cards: Pending deployment flag with tooltip Vendor change detected flag with tooltip Deployment failed flag with tooltip Multiple flags may appear on a single vendor policy. Precedence and behavior must follow the established flag logic already implemented and described here: Discovery &amp; Reconciliation Flows . Additionally same as today if one of those flags exists than also the POP will be flag with &ldquo;Policy discrepancies&rdquo; indication Policy catalog If a vendor policy card includes a flag, the same flag (with tooltip) is inherited and should also appear in the Vendor Compare View and in the Policy Catalog. This can result having a single flag with multiple tooltips in the policy catalog itself: In case there are two tooltips both should appear: https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1033-46505&amp;p=f&amp;t=8P3DIAELIDZnL66p-0 In case there are 3 or more tooltips generic tooltip should appear &ldquo;Policy discrepancies&rdquo; once user will navigate into the policy he will see the different flags on the different views with relevant tooltips 4.7 Support large amounts The system must support large numbers of platform policies, connected assets, and PlainID policies. High-volume scenarios &ndash; For example, in PBI, a single policy may connect to many tables (by default, all tables defined within the DS are connected to any policy generated in PBI). In Databricks or Snowflake, each protected asset generates a single policy. This may result in a single customer having one policy with many case statements, and therefore multiple platform policies. Display behavior &ndash; When large numbers of objects are displayed, a vertical side-scroll should be available for the entire view. Navigation &ndash; Users should be able to pinch, zoom in, and zoom out, with expected behavior matching the interactions demonstrated in the Figma design. 4.8 Vendor Policy details When a vendor policy is selected in the display, its details (currently shown in the Details tab under POP details) will now appear. Presenting POP details in the vendor policy context simplifies authoring, especially when supporting many-to-many relationships between platform and vendor policies. This replaces the existing details presentation (only for edit), for create details will remain in the Details tab until further enhancements to the d ata policy authoring experience. Viewing and Editing &ndash; Users will be able to view and manage all POP details directly. On edit, a popup form containing all fields will open. Behavior (e.g., editable fields, dropdowns) should follow the existing generic form logic managed at the policy schema level, consistent with vendor-specific PRDs. Back-end Management &ndash; Although details are shown in the vendor policy context, they are managed at the platform policy level in the back end. Therefore: In cases of multiple platform policies linked to one PlainID policy: All POP details (except Order - see designated section) must remain identical. Updates made from the Vendor Compare view should automatically apply to all relevant connected platform policies. When updating metadata from PAC, today only the direct platform policy is updated, causing data inconsistency. Going forward, the system must ensure all associated platform policies with the same vendor policy ID anchor are also updated. This means that if there is an Order attribute with a vendor policy ID as its anchor, the system must check for associated policies and update them accordingly. Since policy creation is not being updated now, users will remain responsible for setting consistent POP details during creation. This will be enhanced in future iterations of the data policy authoring experience. In cases of one platform policy linked to multiple PlainID policies FUTURE Purple This design also supports managing metadata for such scenarios. Upon selecting each vendor policy, its relevant metadata will be displayed. 4.9 Order When a vendor policy is selected, the Order attribute should be displayed alongside the related platform policies. Sorting &ndash; Platform policies will be sorted in ascending order. The current policy will not necessarily appear at the top. Inactive policies have no order value but should still appear, listed last. Managing order &ndash; Users should be able to adjust the order via drag-and-drop or a dropdown menu. The behavior, available values, and logic must remain consistent with the generic implementation defined here: Policy Schema &ndash; Order Attribute . When to display order : If the anchor of the order attribute is the vendor policy id (e.g., Snowflake, Databricks), order should be shown and managed directly on the platform policy card, since it determines the internal sequence of those policies. If the anchor is any other option (e.g., in Zscaler, the anchor is the application), order should be displayed and managed in the vendor policy details. In some cases (e.g., PBI), no order attribute is defined as part of the vendor schema, and therefore it should not be displayed. 4.10 Policy Diff view The Policy Diff View (previously called Policy Side-by-Side ) is designed to provide clear visibility into synchronization status between the platform and the vendor, shown in the vendor&rsquo;s native language. Access &ndash; The Policy Diff View will now be available directly from the Vendor Compare View, leveraging the same functionality with a modernized UI. Users can navigate to it from the vendor policy context, either by hovering over the vendor policy in the display or from the Details tab. Layout &ndash; Once opened, the Policy Diff View will be displayed full screen, with breadcrumbs for context and an &ldquo;X&rdquo; button to return to the Vendor Compare View. The title should include the vendor policy name and the relevant application icon for visibility. Available Tabs : Compare Code Tab &ndash; Platform policy (left) vs. vendor policy (right). Flags for Pending Deployment and Vendor Changes Detected shown when relevant. Indicators at the section and row level are demonstrated in the Figma but will not be implemented at this stage. FUTURE Purple Options to Accept Platform Changes (Deploy) and Accept Vendor Changes (Override) will be available when POP is in manage mode. Option to accept changes at the section level shown in Figma but not currently implemented. FUTURE Purple Last operation performed with success or failure status and timestamp indication will be displayed in the top-right corner: Platform Changes Applied / Failed to Apply Platform Changes Vendor Changes Applied / Failed to Apply Vendor Changes On failure, users can view and copy the detailed error message. Code will be displayed in collapsible sections, allowing single or multi-section expand/collapse. Section titles will be unified between both sides with aligned scrolling. Section Titles &ndash; Microcopy Updates &ndash; Section titles should be updated to be more concise and user-friendly. Updates should be applied per vendor: Zscaler - 6.1 Zscaler Policy sections Power BI - 6.1 PowerBI Policy sections Snowflake Row - 6.2 Snowflake Policy sections - Row access policies Masking 6.1 Snowflake Policy sections - Tag masking policies , 6.3 Snowflake Policy sections - Column masking policies Databricks - Row - 6.1 Databricks Policy sections - Row access policies Masking - 6.2 Databricks Policy sections - Column masking policies Policy Could Not Be Translated &ndash; If a platform policy cannot be translated due to errors or incorrect authoring, user should still be able to navigate to the policy diff. The vendor policy should still display, and the platform side should have an error flag next to it tooltip should show the error: &ldquo;Policy could not be translated.&rdquo; Audit Tab &ndash; A new tab will display all operations performed on the vendor policy, consistent with the administration audit report. Records include: Accept Vendor Changes Accept Platform Changes Policy Discovered FUTURE Purple Policy Updated from Discovery FUTURE Purple Behavior, look, and feel must match the existing audit tab. Records will be filtered by vendor policy ID. M-APIs &ndash; Management APIs for Accept Platform Changes (Deploy) and Accep
... [truncated for budget]
   ----------------------------------------------------------------------

2. Document: PORCH - POP Main - Vendor policy -  Right Panel (SBS)
   Similarity: 0.71
   Title: PORCH - POP Main - Vendor policy -  Right Panel (SBS)

1 6 false list false 1. General The Policies Tab is a key capability in the Orchestration flows - it allows the user to view the policy details - PlainID Policy (A), and the Vendor Discovered Policy(B) - in the vendor&rsquo;s native policy code as demonstrated in the full flow in Policy generic PRD https://plainid.atlassian.net/wiki/spaces/PM/pages/2973663249/PORCH+-+Policy+-+Discover+Map+Manage+-+Generic+Behavior#1.-Summary In this tab the user can view a side-by-side comparison of the policies, with an indication of the differences between the policies, and the ability to reconcile the differences. 2. Figma Available in Figma: https://www.figma.com/file/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;node-id=4010%3A8960&amp;mode=design&amp;t=sje8y2ACjTh3Co7f-1 3. Detailed requirements 3.1 Triggers The right panel is accessible from multiple locations and has several functions: Trigger Behavior Click on a Vendor Policy Card Navigate the user to the right panel Policy tab Click on an Object Card (not implemented) Navigate the user to the right panel Objects tab Click on Add Identity Source (not implemented) Navigate the user to the Add Identity Source form/tab Click on an existing Identity Source (not implemented) Navigate the user to the Identity Source form/tab 3.2 Form structure 3.2.1 Title and layout Layout Microcopy Description side popup Title Icon + Policy Name Show Policy name: in case both policies are available show the name of deployed policy (policy B ) if only suggested Policy available (Policy A) than show Policy A name Icon will not always appear only in case of mapping inconsistency will appear Policy A title Suggested Policy Shows code section of the policy available in authZ WS translated to vendor language Policy B title Deployed Policy shows code sections of the policy as it was fetched from the vendor in the discovery Deploy Suggested Policy button Deploy suggested Policy tooltip: &ldquo;This action will deploy the Policy to the vendor tenant&ldquo; Button availability button availability dependent on the POP mode Learn mode - Button does not appear Manage mode - Button appears Expected behavior upon deploy defined in: https://plainid.atlassian.net/wiki/spaces/PM/pages/4088365147/Discovery+Reconciliation+Flows#Deploy-single-Policy---Reconciliation an audit record with Operation deploy should be available once this operation is initiated Override Suggested Policy button Override suggested Policy tooltip: &ldquo;This action will override the suggested Policy displayed in Plainid tenant&ldquo; Button availability button availability dependent on the POP mode Learn mode - Button does not appear Manage mode - Button appears Expected behavior: Clicking this button will initiate override of the policy available in the Authorization Workspace by the Policy discovered available on the vendor tenant. (opposite operation than the deploy) upon click a prompt message will appear: &ldquo;This action will override the Policy currently available in the Authorization Workspace. Are you sure you want to proceed?&ldquo; an audit record with Operation Override should be available once this operation is initiated This operation will be a-sync meaning, once click user will be able to close side panel and success toast will appear once operation is done Drak\light mode toggle 3.2.2 Code sections view the policy view will be divided to Multiple section, for each vendor different sections will be available however the presentation will be generic by default all sections will appear open when a user click to open the right panel a vendor specific PRD will be available to define the sections orders, section type and name convention and more Layout Description Title &lt;Section&gt; - &lt;Name&gt; Code Expression (in vendor format) Collapse button Should be available per section collapse all\ XXX button Available in each side 3.2.3 Side by side layout: The goal of the side by side is to be able to compare between both Policies for that need to support the following: there can be cases where there is section available only on one of the policies - need to fill in an empty code block on the other side same section can have a different length between policies. need to align each section to be side by side 3.2.4 Empty states: there are cases when there will be empty sate either on suggested policy or discovered policy side, the following message should be available on empty state. Scenario Trigger Microcopy Suggested Policy is empty Note: deploy suggested policy button should be available also in empty state Policy deleted from authZ WS (to deploy delete) Policy available in authZ WS in-active state Policy is unavailable. Policy was deleted or is Inactive. To delete this Policy&nbsp;from vendor side, click &quot;Deploy Suggested Policy&quot;. Deployed Policy is empty New Policy was created on Plainid. Policy was deleted from vendor side No Policy exists&nbsp;on vendor side. Click &quot;Deploy Suggested Policy&quot; to secure access. To delete suggested Policy&nbsp;from the Platform, click &quot;Override Suggested Policy&quot;. - not shown at this point since override is not implemented yet
   ----------------------------------------------------------------------

3. Document: Policy Schema
   Similarity: 0.71
   Title: Policy Schema

1. Summary The ability to manage metadata on policies is essential for improving management processes and enhancing policy visibility. Additionally, as part of introducing policy orchestration capabilities into the platform, we need to support managing different policy metadata based on the vendor. Supporting an adaptive policy experience and accommodating customer requirements for customization can be achieved by defining schema templates, which is the focus of this PRD. 2. High level requirements Policy schema will be constructed from the following sections Section Name section use Available on Attribute list Owner Policy Details pre-defined attributes to manage all metadata required for plainid to support: PDP calculation adaptive policy authoring Visibility Always Fixed list of predefined attributes provided by PlainID Plainid POP Details Manages additional information specific to the target vendor optional, appears when policy is used for SaaS applications (orchestration) based on the selected application. In the future, when supporting reuse, this section will appear according to the number of applications selected. list of defined attributes per vendor POP\App generated from POP Custom Details Allows expansion of the policy schema to manage additional data for visibility, advanced search, certification process, etc. Optional, Appears when custom fields are defined by the user Attribute list defined by the end user. Environment 3. Details Requirements 3.1 Policy attribute form Field Description Type Available values Default Value Required Editable Max Length Allowed chars Display Name (Unique per owner) Will be used across the UI as the label for the attribute in the different forms Free txt NA Empty Yes Yes 100 All Unq Attribute ID (Unique per owner) Will be used across the APIs as the identifier for the attribute - for example in PaC Free txt NA should be auto-populated by name field as described in generic behavior https://plainid.atlassian.net/wiki/spaces/PM/pages/2501181510/Object+management+guideline#5.-UI%5CUX-experience---auto-populate-customer-defined-id Yes Yes 128 the definition is identical to HTML IDs (without the ordering requirement): letters (a-z, A-Z), digits (0-9), hyphens (&quot;-&quot;), underscores (&quot;_&quot;), colons (&quot;:&quot;), and periods (&quot;.&quot;). Validation regex: Pre defined list will define if field is inum or not toggle NA false yes yes if toggle was false and than changed to true upon next policy edit value will be cleared and user will be required to select value from list Type Data type of the attribute will define which field will appear in the policy form\ which validation should be conducted in PaC on this param Segment String Numeric - in case predefined list is true will be disabled Order - detailed behavior will be defined in a seprate PRD. till than should behave like numeric type Bolean (future) Date (future) String Yes Yes can change type to be string NA NA Values source In case predefined list is true should define where the list of values is coming from Segment Static list Discovered list List from external API (future, will require additional setting will be defined upon user behavior) NA when predefined list is true TBD NA NA Value list used to define the list of available values by the customer managing values should be consistent with generic behavior done in conditions - https://plainid.atlassian.net/wiki/x/vwDevQ each value will have and id and display relevant when values are from a static list - user will define the set of value (simular to org attributes) value inserted will be used for display and key relevant when values are discovered list (will be filled by the POP as part of discovery process) Free text, multivalue simular to the experience we have in SAP NA NA At least one value is required if the Static list is defined for values filed in case only one value is defined should be auto selected in the form Yes Should enforce input based on definitions of the attribute settings - type, max length etc Limit for amount of values that can be inserted 200 Required Define if this a required values for a Policy Toggle NA False Yes Yes NA NA Default value Value to be used by default For input when new policy is created. Default value can be a static value, or dynamic for example vendor policy name should sanitised and added with prefix Free txt NA Empty When an attribute defined as required true default value is required enforced on custom attributes only Yes Based on attribute settings: type max value\length multi vlaue allowed chars Can be updated Indication if attribute can be editable from the UI\PaC or not Note, attributes can be marked as &ldquo;No&rdquo; but still editable by orchestration service for example vendor policy id. in that case will not appear in the create (UI) and required will not be enforced on create (PaC) Segment No - this option should not be visible on custom attirbutes Only on Creation Always attribute which marked as editable &ldquo;No &rdquo; will appear disabled (same as internal assets) Always Yes Yes NA NA &nbsp;Multi Value Indication if multiple values can be used for input. Toggle NA false Yes Need to validate with R&amp;D behavior on change from true to false when policies already generated Yes Due to known limitation will not be editable at this point NA NA Length\Max Value Length will appear in case attribute type is string Max value will appear if attribute type is numeric - change in behavior when attribute is numeric we will not limit on length but the value since this is the limitation in EM Free txt NA Default Length - 64 Default Max value - 1,000,000 Yes Yes Max Value - can be between -2,147,483,647 up to 2,147,483,647 Length - between 1-9999 A llowed chars Defines which chars are allowed to be used in that attribute, this field will not be available on custom attributes form (can't be defined by end user but needed for orchestration) TBD by dev to use regex or other options TBD by dev to use regex or other options All will be the value defined for all custom attributes Yes Yes TBD by dev to use regex or other options TBD by dev to use regex or other options Available for Search Defines if the attribute can be used for search in the policy catalog future capability but indication should be managed now to avoid migration Toggle NA False Yes Yes NA NA Available for PDP Defines if the attribute can be included in the PDP response as additional policy metadata future capability but indication should be managed now to avoid migration Toggle - prompt when toggling off a custom attribute with Available for PDP true 'This custom attribute is configured to be Available for PDP and hence your PDP integration might use it. Are you sure you want to turn off PDP Availability ?` NA False Yes Yes NA NA D isplay Order ( Unique per owner) will determine the order of the attributes within the section Drag&amp;Drop simular to api matcher NA order based on creation yes yes NA NA Available for Sorting Defines if the attribute can be used for sorting in the policy catalog future capability but indication should be managed now to avoid migration Toggle NA False Yes Yes NA NA 3.2 Attributes uniqueness We need to manage the uniqueness of attribute IDs and display names. Since the policy is divided into three sections, uniqueness should be enforced per owner Uniqueness Check Details Predefined Attributes Not required. Predefined by PlainID and are not editable, so there&rsquo;s no need for a uniqueness check attributes are not touched by end user POP details Attributes Unique per vendor A decision is still pending on whether a uniqueness check is necessary for these attributes since not defined by end user These attributes are generated by the POP and defined based on product requirements. Custom Attributes Unique per environment. Custom attributes must be unique within each environment. Error Messages: &quot;An Attribute with that Name already exists. Try again with a different Name.&quot; &quot;An Attribute with that ID already exists. Try again with a different ID.&quot; 3.3 Policy details section first phase implementation No change in current behavior pre-defined attributes behavior consistent with current implementation as defined in https://plainid.atlassian.net/wiki/spaces/PM/pages/2375024653/Policy+in+Advanced+auth+WS#2.1-Step-1---Details future - manage attribute behavior not fixed in code but as predefined attributes as part of the schema (not exposed or editable by end user) 3.4 POP details section This section will appear only when Use Policy for is defined as SaaS application Available fields within this section will be based on the Policy schema defined for the vendor connected to the application selected (Snowflake, zscaler, powerBI) UI\UX Section Title: &ldquo;Fill in &lt;App Name&gt; POP Details&rdquo; Section icon: The icon based connected to the application will appear Figma https://www.figma.com/design/zXcaEVmHcGIuxwfymyBBus/Policy-schema?node-id=0-1&amp;node-type=CANVAS&amp;t=LY9w4B7LDWzjdiPM-0 Future in first phase only 1 application can be selected per policy, in the future we will support the ability to connect multiple applications than amount of POP details sections opened is per amount of applications selected 3.5 Custom details section Note: Supporting custom attributes will not be implemented in the first phase. High-Level Behavior for Custom Attributes: Environment Level Definition: Custom attributes will be managed (CRUD) at the environment level. PaC (Policy as Code) Reflection: Custom attributes will be included in the PaC process, allowing for export and import. PDP Interaction: Custom attributes will not be used in PDP (Policy Decision Point) calculations. However, they can be included in as additional metadata in PDP response for example in the Policy List endpoin t (based on indication at the attribute level) Vendor Translation: C ustom attributes will not be translated into the vendor's language for orchestration purposes. 3.6 PaC Policy as code is designed to support CRUD operations Export import between envs - CI\CD version control currently, only policy details section is represented in PaC. POP details as well as custom details should also be included in the structured rego supporting all available apis (import, validate, export, delete) example to the structured rego can be found as part of tech design: https://plainid.atlassian.net/wiki/spaces/ARCH/pages/2642575378/Policy+Structure+DSL-based#2.1.-Annotation and expected behavior detailed below: Sections Parameter details POP details currently we support connecting 1 app to a policy for orchestration but in the future we will support multiple apps per policy in that case section per application will be available pop details will be managed in structured rego under the specific application id based on the associated application in the list Custom details custom details will be displayed in the structured rego &quot;customAttributes&quot; which will contain attributes and their defined values Attributes: Attribute behavior is generic, should look the same for both custom and pop details. for each attribute we should include parameter and value as follows: Parameter Attribute id Value value structure should be based on the following setting on the filed: type multivalue behavior for value selected from list: for those values we manage id and display, the display value is the one consistent cross env and therefore should be the one appears in PaC id should be used only for translation. for example: condition values (zscaler), workspace\dataset (PowerBI) In case there is no uniqueness validation on the display value on the vendor (meaning there can be two values with the same display different id) will randomly select first value, this will currently be considered as known limitation Validations Validation of the structured rego should be against the policy schema, this section will detail all validations and expected behavior. in case additional validations are added should consult with product on microcopy Scenario Error Attribute id does not exist Unable to identify Attribute ID [attribute id]. Hint: Did you mean [list of attributed based on owner]? Value not valid - type Attribute ID [attribute id] is defined with type [] while the value provided is []. Hint: Types should be aligned. Value not valid - multivalue Attribute ID [attribute id] is defined as a single value while the value provided multiple values. Attribute ID [attribute id] is defined as a multi value while the value provided as single value. Value not valid - allowed chars The allowed characters for [attribute id] are []. You entered forbidden characters. Value not valid - max length The length of the [attribute id] must be [max length] characters or less. You entered [num of chars entered] characters. Value not valid - max value The value of the [attribute id] must be [max value] or less. You entered [value entered]. Value not valid - value not available on list (enum) Invalid value [] for [attribute ID]. Missing required for required attributes we support the ability to define defaults, those are defined to ease UI experience for policy authoring. in Pac wether a default defined or not required params are mandatory and must be sent if not sent an error will appear Missing required field [attribute id] for [application id]. Missing required field [attribute id] in customAttributes. param is not editable [attribute id] cannot be updated. Hint: Revert back to [original value] Export Policy to support version control and git integration we provide standardization and normalization to our structured rego, attribute order (custom, pop details) in structured rego should be based on the display order defined in the attribute metadata. this order is not enforced on the import but normalized after the export or in the import response. 3.7 Manage Policy from wizard Same validations as defined in https://plainid.atlassian.net/wiki/spaces/PM/pages/edit-v2/3540451329#3.6-PaC should also take place when managing a policy from the UI via wizard. error messages microcopy and behavior should be consistent with our generic forms behavior (for example assets) in case missing microcopy should approach product to get detailed error messeges 3.8 Admin audit Policy audit Behavior should be consistent with generic admin audit behavior for policy: any change to policy metadata (regardless of the section) should be considered as policy update operation all field should appear in the compare changes 3.9 Permissions Consistent with generic behavior in https://plainid.atlassian.net/wiki/spaces/PM/pages/2339536932 3.10 Advanced search Note: advanced search will not be exposed at this phase, but feature requirements should be taken under consideration in the tech design Objective: Implement an advanced search functionality for policies, allowing users to search based on various attributes within the policy metadata. This functionality should be similar to the existing search behavior available for organizations. Details: The available attributes for search will be determined by indications managed on the attribute form. The search should allow filtering and querying based on these attributes, ensuring that users can efficiently locate policies that meet specific criteria. 3.11 End to end flows behavior for adding new attributes with policies already avilable 3.11.1 Saas Application - Orchestration note all flows should be tested on all available vendors snowflake powerbi zscaler ( import with conditions will not work as expected not fully supported at the time) import for policy connected directly to a single asset will be supported dependent on PLAT-11360 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System Jira for all flows need to validate: policy view on map PaC admin audit changes reflected in PDP (out of scope at the moment orchestration policies are not dep
... [truncated for budget]
   ----------------------------------------------------------------------

4. Document: Policy 360¬∞ - Streamlined Policy Deploy
   Similarity: 0.70
   Title: Policy 360¬∞ - Streamlined Policy Deploy

none 1. Summary Policy 360&deg; introduces a dynamic, multi-view interface for comprehensive policy management. It empowers administrators and auditors with deep visibility and control, offering interactive views of policies, related data, dependencies, and connections. As part of this initiative we aim to simplify the user experience, making it easier to review and take relevant actions to synchronize policies between the platform and vendor. 2. Problem statment Currently, policy creation or updates in the platform are separated from vendor deployment. Even with Policy 360&deg;, users must navigate to vendor compare view and policy diff to deploy policies to vendors, causing a fragmented and less effective experience. 3. High level solution Enable streamlined operations for SaaS authorization management policies. After completing a CRUD operation (e.g., create, update, delete), users can choose to deploy immediately to the vendor (e.g., &quot;create and deploy&quot;). This will complement the existing option to only create a policy, allowing users to defer deployment when deeper review is needed or when working in higher environments with scheduled deployment windows. This shortcut is intended to streamline the overall process, with the feature primarily focused on simplifying policy authoring in lower environments where rapid implementation and testing are required. 4. Detailed requirements 4.1 CRUD via UI Figma link: figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=18-15638&amp;t=zU9EpcVyn1hiRWH8-4 As demonstrated in Figma, when generating policies the options Create and Create &amp; Deploy will be available when creating a policy via wizard, native, or code. For updates, the Update &amp; Deploy option will be available in the following scenarios: Updating the Details tab Updating from Rules view (who, what at the asset type level, when) Updating from Code view Updating from Native view Initiating a Delete Once the user selects an operation with deploy, a deploy will be automatically initiated after the operation completes successfully. If deployment fails, a Deployment Failed indication will appear on the policy, consistent with the existing behavior as if the deploy was initiated from the policy diff view. If a platform policy is connected to multiple vendor policies, the deploy should be initiated for all connected vendor policies. ( future Blue ) These options will be available only for SaaS authorization management policies. No change is expected for dynamic authorization service policies. 4.2 CRUD via APIs No changes to management APIs. To create and deploy via API, users should sequentially call the PAC API followed by the Deploy API . 4.3 Administration Audit As this is only a shortcut to deploy, no new functionality is introduced. If a user chooses to deploy in addition to the CRUD operation, an additional audit record will be created for the deploy, consistent with navigating to policy diff and initiating the deploy manually. 4.4 Permissions As already implemented in Policy 360&deg; - Vendor Compare View , this action should be available only to Authorization WS Admin .
   ----------------------------------------------------------------------

5. Document: Policy 360¬∞ - Auto Refresh
   Similarity: 0.68
   Title: Policy 360¬∞ - Auto Refresh

none 1. Summary Policy 360&deg; introduces a dynamic, multi-view interface for comprehensive policy management. It empowers administrators and auditors with deep visibility and control, offering interactive views of policies, related data, dependencies, and connections. As part of this initiative we aim to simplify the user experience, making it easier to review and take relevant actions to synchronize policies between the platform and vendor. 2. Problem statment Many current operations&mdash;such as Discovery , Accept vendor changes , and Accept platfrom changes &mdash;are asynchronous. At present, the system does not provide any indication when these operations are completed. This lack of feedback impacts multiple areas within the UI, including: Policy diff view Lists of available policies and flags Discovery status indications Additionally, the UI is not automatically refreshed upon the completion of these operations. As a result, demos and user experiences often require manual refreshes, leading to confusion, delays, and an overall suboptimal experience. 3. High level solution The solution leverages two existing services already connected within the platform: Temporal Service Internal Notification Service (currently used for auto-refresh in other platform areas) These services will be utilized to trigger automatic UI refreshes upon the completion of relevant asynchronous operations. This approach ensures that data displayed across the interface remains current and consistent without requiring manual user action. 4. Detailed requirements This section outlines the relevant operations and specifies which UI areas should be refreshed upon their completion. Operations may be triggered from the UI , API , or Scheduler . For scheduled operations (e.g., &ldquo;Accept Platform Changes&rdquo; - policy deploy), a single notification will be sent once the operation completes, even if multiple policies are affected within that batch. Operation Area Expected result Discovery Orchestration WS - Discovery indication on the POP card The discovery indication should disappear. Orchestration WS - Discovery indication on main form Updated to display the latest discovery date. Orchestration WS - Vendor objects tab Refreshed to display the updated list of all discovered objects. Environment Dashboard Widgets refreshed to display the new data matrix. Authorization WS - policy catalog list Refreshed to show the latest list of policies and flags such as &ldquo;Vendor Changes Detected.&rdquo; (TBD if already implemented) Accept platfrom changes (Deploy) Accept vendor changes (override) Authorization WS - Policy 360 - Policy diff Should be refreshed: if deploy is success - displaying the deployed policy to the vendor on the right side as well as clearing all relevant flags if policy deploy fails - displaying policy deployed failed flag along with actual policies available within the platform Authorization WS - policy catalog list Should be refreshed displaying new list of policies as well as clearing flags such as vendor changes detected and displaying new flags like deployment failed
   ----------------------------------------------------------------------

6. Document: PORCH - POP Main - Vendor Object -  Right Panel
   Similarity: 0.68
   Title: PORCH - POP Main - Vendor Object -  Right Panel

1. General As part of the discover an map processes for each vendor we identify the identity, assets and policy setup in the vendor and provide visibility to what we have discovered within our platform. This PRD will detail the expected behavior of the discovered objects right panel within the orchestration WS to provide the following: visibility to the vendor object metadata provide additional operations (vendor specific) in case the discovered object can be used as an identity source 2. Right Panel Variants as defined in the generic PRD for discover&amp;map assets: PORCH - Assets - Discover &amp; Map - Generic behavior we define per vendor if the discovered objects is an Asset (for example zscaler) or an Asset Type (for example power bi, snoflake GBQ). in the generic discovery behavior different end to end flows defined for assets vs asset types, in the same way also the presentation of the object right panel should be based on what is the discovered object. Note: this is a generic behavior not vendor specific that is dependent on the type of the discovered object 3. Discovered Object is an Asset Type This section will detail the expected behavior of object side pop when the discovered object is asset type (Table) 3.1 Figma https://www.figma.com/file/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;node-id=5306-11015&amp;mode=design&amp;t=ebab0VEhDp5wfx4D-0 3.2 Discovered object details A table presenting all the discovered columns (map to an attribute will be available). Note: all discovered columns from vendor should be presented including columns which we do not translate to an attribute since type is not supported (for example Boolean, date) Column Value Name The name of the column as discovered on the vendor Type The type of the discovered column as discovered from the vendor (vendor terminology) 3.3 Used as identity information source indication In some vendors the discovered object can be used also as an identity information source. in this case we would like to provide indication and control for that in the right panel. Note: this indication will not be available for all vendors (this is vendor dependent) 3.3.1 Toggle expected behavior Label Tooltip Type Default value Editable Is the table used as an Identity Information Source? Determines whether it will be possible to use columns within this tables in Rules as part of the Policy logic. Toggle Based on discovery, in case table was identified as identity source and aux was generated indication should be true when POP is in manage\enforce mode 3.3.2 Correlation Rule When toggle will be defined as yes a correlation rule will be visible, the details will either be automatically filed or when defining new the user will need to define the rule correlation rule is required, and editable, there can be only a single rule etc' - the behavior of the correlation rule is identical to the behavior as correlation rule behaves in aux as defined in Identity WS - Updates (external identities) only update in behavior is the list of available values within the drop downs: Name Type Editable Possible values Default value Validation Plainid Attribute Drop down Yes All attributes available in the WS (template) connected to the POP Empty Required Operator View only NA Equals Equals NA Source Attribute Drop down Yes list of available columns within the table currently avilable Empty Required 3.3.3 Update toggle The user will be able to update the toggle, this to support the use case to define a new discovered table as identity source. when customer will be move to manage\enforce mode he will potentially stop created policies from vendor and will do it from plainid platform. in this case when new tables will be created we will not have the policy logic to relay on to identify new table as potential identity source. UI\UX experience: once a user changes the toggle it will trigger a conformation popup, only based on the selection in the confirmation popup will trigger the post action resulted from the change it will not be possible to conduct an update while pop is in discovery process in that case upon save an error will appear: &ldquo;Unable to save changes while POP is in discovery.&ldquo; Change Conformation POP up (appear when user initiate save) User select to Proceed User select to cancel false to true Title: Create Identity Information Source Message: Using this table as an Identity Information source means that the table columns will be used within the Rules as part of the Policy logic. Do you want to proceed? Buttons: Proceed (Primary)/Cancel will trigger the flow as if an additional identity source was idetified as part of discovery this includes the creation of an AUX and attributes based on that table expected behavior identical to generic flow 2 in: PORCH - Identity attribute\source - Discover &amp; Map - Generic behavior Aux\attributes should be generated based on the vendor specific detailed behavior (identical to aux creation on discovery) Toggle changes back to false true to false Title: Delete Identity Information Source Message: Disabling the use of this table as an Identity Information source means that the table columns cannot be used within the Rules as part of the Policy logic.&nbsp; If columns have already been used, this change may result in mapping inconsistency within the Policy . Do you want to proceed? Buttons: Proceed (Primary)/Cancel Will trigger the flow as if we identify as part of the discover the table was deleted from vendor - delete of an AUX\attributes expected behavior identical to generic flow 8 in PORCH - Identity attribute\source - Discover &amp; Map - Generic behavior Toggle changes back to true 3.3.4 behavior in vendor main form based on indication when a table will be used as identity source a different color indication will be visible in POP main form as defined in figma additional an additional filter will be available, defined in vendor specific PRD 3.3.5 Audit Resource Action Owner Table Create identity source \ Delete identity source\ Update identity source POP an additional audit record for the aux creation\edit by the POP will appear same as if this was done from discovery 3.3.5 Permissions consistent with behavior defined in Orchestration - Workspace only WS admin can change the toggle 3.4 Flows Scenario Expected behavior 1 As porch WS admin i can browse vendor tab in POP when discovered object is an asset type righ panel is available for relevant vendors an indication for identity source + filter is available 2 As porch WS admin i in policy right panel i can change the identity source toggle on right panel in relevant vendors when POP is not in learn mode aux will be created\deleted based on change 3 As porch WS viewer i can browse vendor tab in POP when discovered object is an asset type righ panel is available i am not able to update identity source toggle in case available 4 As porch WS admin i am able to update correlation rule for table used as identity source aux correlation rule updated as expected translation of the policies works as expected considering the new correlation 4. Discovered Object is an Asset This section will detail the expected behavior of object side pop when the discovered object is an asset TBD
   ----------------------------------------------------------------------

7. Document: PDP - Support CombinedMultiValue in assetContext- tech design
   Similarity: 0.67
   Title: PDP - Support CombinedMultiValue in assetContext- tech design

Service code name: theruntime BE developer: QA: PM: Feature Owner: 1 7 1. Introduction Important points: 10 10 complete No DB migration 11 11 complete No Breaking changes 12 12 complete No deploy all since there are no changes in redis data 13 13 complete No UI changes 1.1. High-Level Design When using assetContext in the PDP request, evaluation of the asset sent as context is done as a first step on the assets flow, filtering out policies which doesn&rsquo;t meet the asset context rules. With the remaining policies the calculation flow continues on the other requested asset types. When using the combinedMultiValues in PDP request, identities are handled in a way that multi values coming from identity agents preserve the relationship between them. Currently when using asset context with combined multi value the relationship between the identity attributes are not preserved during policies evaluations and assets calculations This story is designed to close this gap. 1.2. Actors 14 14 complete Application calling PDP 15 15 complete API Authorizer calling PDP 1.3. Impact on existing customer types 16 16 complete API 17 17 complete PAA 18 18 complete Authorizers 1.4. Behavior in different deployment scenarios 19 19 complete SaaS 20 20 complete Hybrid 21 21 complete On prem 1.5. Behavior in different partnership scenarios 22 22 complete Policy Mng 23 23 incomplete B2B 24 24 complete On prem 1.6. Behavior in different versions 25 25 incomplete v1 26 26 incomplete v2 27 27 incomplete v3 28 28 complete v4 29 29 incomplete v5 1.7. Behavior in different request types 30 30 complete token 31 31 complete permit-deny 32 32 complete resolution 33 33 incomplete userlist -not supported 34 34 incomplete policies -not supported 1.8. Architecture Java language Vertx. (PDP) 2. Functional Requirements Product requirements PRD: assetContext - PDP enhancement V4 - Support Combined values calculation Story: PLAT-8847 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System Jira https://plainid.atlassian.net/issues/PLAT-11012?jql=ORDER%20BY%20created%20DESC PDP - Support CombinedMultiValue in assetContext 2.1. End-to-End Flows/Processes &nbsp; Changes of existing flows: In combined multi value: while evaluating asset context valid policies: Evaluate each policy according to asset attributes (given in context) No need to validate conditions since it was already evaluated by the policies identity evaluations policy resource types contains asset resource type- regular asset flow policy actions contains asset action- regular asset flow policy asset rules valid without entity. according to asset attributes- regular asset flow policy asset rules valid with entity. according to asset attributes Evaluate each valid policy identity permutation save for each policy it&rsquo;s valid permutations per asset context While merging asset contexts calculations merge by resource type+ policy-valid permutations While calculating other resource types rule set use the policy asset context valid permutations 3. Detailed Design 3.1. Overview Check scope Authorization Extract scope policies Extract request parameters from body including useOptimizedAssetContextResponse Extract asset contexts field For each item extract these fields and construct an AssetContext object: resourceType - mandatory action - if not sent-&gt; ACCESS path - if not sent check asset attributes assetAttributes are sent if asset is virtual or the attributes can be sent in request-&gt;continue evaluation as a virtual asset Else Throw missing asset ID assetAttributes are not sent throw missing asset ID assetAttributes- if not sent check path path is sent Asset is external/ internal retrieve attributes from source by the path and continue Asset is virtual-&gt; continue with path attribute as virtual asset path is not sent Throw missing asset ID if key exists return response with key and an empty asset context object, else return response with asset context object and an empty key Add each item to a map by a asset context generated id Check if request in cache include assetContext array in cache key include useOptimizedAssetContextResponse For each asset context remove asset context key from cache key Extract identity data from data sources Evaluate which policies are valid according to identity-roles+conditions Check if the asset context map exists Yes Group by all asset contexts by asset type Open a new Thread for each asset type and execute in parallel each asset type asset contexts evaluation, which includes: For each asset context of asset type, check if asset context data is valid if not set an empty response with an error If asset type is not virtual and for each asset context that no asset attributes are sent in request-extract all assets data from source by list of asset contexts paths For all asset contexts that were not retrieved from provider- set an empty response with an error &ldquo;Asset not Found&rdquo; Open a new Thread for each &ldquo;valid asset context&rdquo; evaluate which policies are valid according to asset data: combined multi value=false: policy conditions- no need policy resource types contains asset resource type policy actions contains asset action policy asset rules valid according to asset attributes evaluate asset rules with entity. using full entity combined multi value=true: For each policy extract only valid permutations and check 4.v Save for each asset context a map of policy and relevant valid permutations If asset context has no valid policies- calculate an empty response and set the output For all remaining asset contexts, combine results and group by the asset context by their valid policies and suited permutations if combined multi value =true Open a new Thread for each &ldquo;valid policies&ldquo; permutation -select first asset context call to asset matcher with asset resource type and valid policies (by identity and asset) - Create a map of policy-action-asset filter skip asset context resource type If combined multi value=true- extract permutations by asset contextId and policy Calculate Identity Auth response (without include identity and context) access token permit-deny resolution For each asset context with the same &ldquo; valid policy- permutations pairs &rdquo; permutation- set the same calculation output Combine results from all the threads under data Calculate response useOptimizedAssetContextResponse=false- return old structure- output per asset context useOptimizedAssetContextResponse=true- group by the asset context by the output Add include entity and context to response if needed No- as current behavior- backwards compatibility call to asset matcher with valid policies (by identity) Create a map of policy-action-asset filter Calculate Identity Auth response Audit and return response 4. Errors list No change from previous asset context implementation 5. Non-Functional Requirements 5.1. Known issues and Technical debts Performance will increase per policy* asset context* number of permutations per &ldquo;valid policy&rdquo; 6. Test plan Automation Integration tests in PDP Unit tests in PDP Load and performance tests Regression tests no change from current behavior in v3 without asset context token permit-deny resolution no change from current behavior in v3 with asset context token permit-deny resolution no change from current behavior in v4 without asset context token permit-deny resolution New logic applies on v4 with asset context token permit-deny resolution Multi asset context policy with several resource types Uses case in story: Use of entity attributes in asset filter so that asset context validation: will filter out invalid policies will filter out invalid permutations in valid policies Check that the response will return the right merged response Policy access type restricted allowed
   ----------------------------------------------------------------------

8. Document: PORCH: Preliminary Topics Log
   Similarity: 0.66
   Title: PORCH: Preliminary Topics Log

Link to Release Notes (Working Drafts) Preliminary Topics for Release Notes (First Draft Prep) November Product Manager/ R&amp;D (as needed) Links to topics to publish Approved for Publishing Feature Name Feature Details Doc Owner PRD link/JIRA Numbers Internal Check PLAT-6266 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-6273 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-6282 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7600 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7601 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7602 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7603 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7604 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7605 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7164 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Product Manager/ R&amp;D (as needed) Links to topics to publish Approved for Publishing Feature Name Feature Details Doc Owner PRD link/JIRA Numbers Internal Check &nbsp;Hod &nbsp; &nbsp; &nbsp;NodeJS SDK Update &nbsp;Update documentation: Remove the following line/paragraph: Update the following line to reflect the actual version of the downloaded SDK: Remove the following line: Provide a sample NodeJS App that uses the SDK Provide sample request and response Add examples for using jwt in the request to the pdp &nbsp;Nur &nbsp; PLAT-5853: AuthZ - NodeJS SDK - Update documentationIN DEVELOPMENT 129 incomplete &nbsp;. &nbsp;Documentation is ready to be published. Met with Sergey and was told what to change exactly. &nbsp; &nbsp; REST Translator - Support Dynamic Headers use REST translator for data integration with dynamic values in headers sent to the REST source. When we use PIP with REST endpoints, we want the flexibility to transfer dynamic parameters to the REST endpoint on the customer data source side to influence what data is fetched back from the PIP. We already have this capability in the URL - and now we will have this capability in the headers dynamically. Nur - Admin Guide - PAP Docs. Look for REST translator in Doc360 should go there PLAT-7009: PIP - REST translator - support Dynamic HeadersDONE 130 incomplete &nbsp;internal &nbsp;Ready for review in RNs Documentation not ready &nbsp;Hod &nbsp; &nbsp; &nbsp;Expanding PIP Model Size &nbsp;Expand the limit of 65k chars to 4MB to accommodate much longer Model DDLs and many more Views definitions &nbsp; &nbsp;Nur PLAT-6101: PIP - expand model size limit to 4MbDONE &nbsp; 131 incomplete &nbsp;internal &nbsp;Write in internal notes Documentation not ready &nbsp; &nbsp; PAA and PIP Management Audit Events Needs documentation information - not RN details the release includes audit logging for the PAA and PIP settings we deployed last release. I think PRD audit section should give you the needed details. I am not sure how we document auditing but I assume we don&rsquo;t go into much details, pleae check. Nur PLAT-7371: PAA &amp; PIP Management - Complete Audit tasksDONE 132 incomplete &nbsp;internal Done in October 15th Hot Fix Internal RN. Documentation is not complete yet. &nbsp; &nbsp; PAA Health Fix RNs needed for detailed release notes I asked for more details from RD in the ticket. Also, for the RN it should stay high level. Something like - Improved PAA health checks to support different deployment configuration, including FQDN based communication between services. But it needs to be validated with RD first. Nur PLAT-6667: PAA components health check are blocked when sampled by IPDONE 133 incomplete &nbsp;internal Technical release notes too. &nbsp; &nbsp; &nbsp; &nbsp; AD Data Fetching Performance Improvements &nbsp;'plainid-azure' Translator I asked Birman to share details on the new capabilities. &nbsp; &nbsp; &nbsp; For the documentation we will need to add to plainid-azure translator new translator properties that enhance the ability to control the data fetching from AAD. Nur PLAT-7568: 'plainid-azure' Translator - AAD Data Fetching Performance ImprovementsDONE 134 incomplete &nbsp;internal Under review &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Delegated Admin/Partner Manager Product Manager R&amp;D Feature Name Feature Details PRD link/JIRA Numbers Internal &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PORCH October 15th Hot Fix Topics: Product Manager/ R&amp;D (as needed) Links to topics to publish Approved for Publishing Feature Name Feature Details Doc Owner PRD link/JIRA Numbers Internal Check PORCH Discover Now https://plainid.atlassian.net/l/cp/pfAehjES Paula PLAT-7241 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 127 incomplete Oct 3 Red PORCH Vendor Policy Tab in Learn Mode https://plainid.atlassian.net/wiki/spaces/PM/pages/2957148166/PORCH+-+POP+Main+-+Right+Panel#PORCH---POP-Main---Right-Panel---Vendor-Policies-Tab Paula PLAT-6996 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 128 incomplete Oct ? Red Product Manager/ R&amp;D (as needed) Links to topics to publish Approved for Publishing Feature Name Feature Details Doc Owner PRD link/JIRA Numbers Internal Check Tsahi PORCH 6. PORCH - Power BI - Policy - discover &amp; map Discovering and mapping policy information for Microsoft Power BI PLAT-6282 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 125 incomplete Oct 3 Red Tsahi PORCH 3. PORCH - Power BI - Identity - discover &amp; map PLAT-6266 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 126 incomplete Oct ? Red PLAT-6894 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Product Manager/ R&amp;D (as needed) Links to topics to publish Approved for Publishing Feature Name Feature Details/PRD Link Doc Owner PRD link/JIRA Numbers Internal Check TE Rating PLAT-4495 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-4674 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Tsahi PORCH PRD Link: https://plainid.atlassian.net/l/cp/5f9vNKYV visual designs available here - https://www.figma.com/file/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;node-id=3447%3A11043&amp;mode=design&amp;t=hNie3VLMUQOoxXfE-1 (Also updated in the PRD) Paula PLAT-6139 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 112 incomplete 2 Red Tsahi PORCH 4. PORCH - PowerBI - Assets - discover &amp; map PORCH - Power BI - Discover &amp; Map - Asset Type Paula PLAT-6273 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 103 incomplete 3 Red Tsahi PORCH PRD: https://plainid.atlassian.net/l/cp/5f9vNKYV vendor policies tab page design can be found here - https://www.figma.com/file/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;node-id=3447%3A10478&amp;mode=design&amp;t=SGToLkC1HClJdYQv-1 (also updated in the PRD) Paula PLAT-6565 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 111 incomplete 2 Tsahi PORCH PRD: https://plainid.atlassian.net/wiki/spaces/PM/pages/2937192453/Asset+Type+generated+from+POP PORCH - Asset Type - Discover &amp; Map - Generic behavior the expected on going behavior of an asset type generated\updated as part of discovery process of a POP within the eco system of the Platform Out of scope: Rulesets - should support creation of new rulesets within the template but creating rulesets locked from pop will be done as part of a separate story (Policy translation) https://plainid.atlassian.net/wiki/spaces/PM/pages/2937192453/Asset+Type+generated+from+POP#4.2.4-Rulesets Paula PLAT-6666 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 105 incomplete 3 Red Tsahi PORCH Create POP (likely part of page Managing POPs (more procedure than concept with gif) Paula PLAT-6757 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 107 incomplete 2 Red Tsahi PORCH PRD: https://plainid.atlassian.net/wiki/spaces/PM/pages/2940207105/Zscaler#3.1.2--PORCH---Zscaler---Discover-%26-Map---Managed-Assets PORCH - Zscaler - Discover &amp; Map - Asset Type\Assets Paula PLAT-6758 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 102 incomplete 2 Red Tsahi PORCH https://plainid.atlassian.net/l/cp/X1z8iQrV Paula PLAT-6759 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 104 incomplete 2 Red Tsahi PORCH Discover and map identities (concept and procedure) Paula PLAT-6761 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 108 incomplete 3 Red Tsahi PORCH PORCH - Application\Scope generated from POP PORCH - Generic - Discover &amp; map - Application and Scope Paula PLAT-6798 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 101 incomplete ? Red Tsahi PORCH PRD: 6. PORCH - Zscaler - Policy - discover &amp; map &amp; translate Paula PLAT-6895 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 110 incomplete 2 Red Tsahi PORCH PORCH - Zscaler - Manage Policy Paula PLAT-6896 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 118 incomplete PLAT-6973 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-6975 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-6975 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Tsahi PORCH PORCH - POP Main - Right Panel - Vendor Policies Tab Paula PLAT-6996 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 114 incomplete 2 Red Tsahi PORCH PORCH - POP Main - Right Panel - Vendor Objects Tab - no other details now Paula PLAT-6997 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 115 incomplete 2 Red Tsahi PORCH PRD Link: https://plainid.atlassian.net/wiki/spaces/PM/pages/2956886046/PORCH+-+POP+Main+-+Vendor+Objects#Govern---Manage-and-Un-Manage-Vendor-Objects PORCH - Generic - POP Main - Govern/un-govern vendor objects Paula PLAT-6998 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 113 incomplete 3 Red Tal PORCH - Generic - Logo URL - identity attributes and source PAP updates NEW Paula PLAT-7449 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA PLAT-7064 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Tsahi PORCH Update the max length of the POP name to 50 characters. Paula PLAT-7078 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 116 incomplete 1 Red Tsahi PORCH To support PaC export and import of policies between environments, we want to expose the POP ID in the POP details right panel - to allow the user to copy the ID, and use it when importing the policies to a new environment. Paula PLAT-7155 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA 117 incomplete 1 Red PLAT-7159 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA Porch Paula PLAT-7164 5d574b86-8ab0-3809-b5cb-69a9b04cf41c System JIRA OUT
   ----------------------------------------------------------------------

9. Document: Policy 360¬∞
   Similarity: 0.66
   Title: Policy 360¬∞

1 6 true none list true Introduction &amp; Problem Statement A Policy is a logical object that defines the relationship between an Identity and one or more Assets, governed by a set of rules. Given the complexity and varying contexts in which Policies are created and consumed, a single, static representation is insufficient. Organizations require multiple perspectives to effectively understand and manage Policies. Currently, the platform lacks the flexibility to present these diverse views, resulting in limited usability and reduced operational efficiency. High Level Solution There is a need to introduce an enhanced policy representation that supports multiple views to better address diverse use cases. These views will offer a clear and intuitive way to present Policies, enabling users to make more informed actions. Product Release Product Message 760 Introducing Policy 360&deg; - A Multi-Perspective Policy View We&rsquo;re excited to announce the release of Policy 360&deg; , a powerful enhancement to how Policies are presented and understood across the Platform. Policies define the relationship between Identities and Assets through a set of governing rules. However, a one-size-fits-all view doesn&rsquo;t reflect the reality of how different teams - from developers to security and business stakeholders - need to interact with and interpret Policy data. Policy 360&deg; introduces a dynamic, multi-view interface that brings a comprehensive perspective to Policy management. Enhanced Usability : Navigate and act on Policies with greater speed and confidence. Empowers stakeholders with insight-driven control over access governance. Design https://www.figma.com/design/CSyYVqqsVEbT8LeOIMAKOt/Policy-360---UI?node-id=1-83&amp;p=f&amp;t=4JIOh7Q6jekFlRhs-0 Detailed Requirements The following section describes the detailed requirements for each one of the new Policy views along with their required UI flows. Some of the Policy views are existing within the Platform and there is not change in their current behavior. The following requirements detail the behavior of existing Policies. The behavior of creation of a Policy, considering the new view will be detailed as well. Generic Behavior Clicking the Edit button will enable edit mode. During this time, the button will be hidden. Once you click Save or Cancel, the Edit button will reappear. Policy Overview The new Policy interface will include a header/strip at the top of the screen that presents key information related to the Policy currently being edited or viewed. Functional actions as renaming Policy, associate new Application to the Policy will be done from the Details view. Information items Policy Name Associated Applications Policy State - Active / Inactive Access Type - Access / Restrictive Issue indication - Incomplete Policy Mapping inconsis tency FUTUre Blue Vendor Compare indications FUTUre Blue Policy Sta tus - Draft / Approved FUTUre Blue Last update - Data &amp; Time of last update done to the specific Policy Application Association Associated Application icons will be displayed at the top. As a default, maximum 4 Applications will be displayed. If there are more than 4 Applications connected to the Policy, a plus icon will be displayed along side the other Applications. Upon hover, list of rest of the Applications will be displayed. Issue Indication Indication icon will be displayed on the view tab. E.g. in case of Policy is incomplete, indication should be displayed on Rules view and as well on the specific building blocks tab. In case there multiple issues, the indication should be displayed on each one of the relevant views. Upon hove, the relevant issue message should be displayed. The indication icon will be displayed when one of the following is detected: Policy is incomplete Mapping inconsistency (SaaS Applications) FUTUre Blue Vendor Compare indications FUTUre Blue Indication icon should be displayed on Policy card within the Catalog. Upon hover, indicate the relevant issue: e.g. &ldquo;Policy incomplete&rdquo;. Policy state Policy state will be displayed as a toggle (current behavior). No change in functional behavior, as defined in: Policy State . Access Type Access Type indication will be displayed. Edit of the Access Type will be done from the Details page (current behavior). No change in functional behavior. Additional Access Types will be expended in the future and not part of Policy 360 initiative. Policy View Types All view types will be displayed as tabs, allowing users to easily navigate between them. This tabbed interface will help users gain a clearer understanding of the Policy by exploring it from multiple perspectives. The following section displays the available views and their displayed order within the UI (from left &rarr; right). Details The Policy Details View is utilizing the current Details tab within a Policy. No change in current look &amp; feel or functionalities. Rules The Policy Rules View is utilizing the current WHO, WHAT &amp; WHEN views within a Policy. No change in current look &amp; feel or functionalities. Code The Policy Code View is an existing view within the current Policy experience that enables users to visualize the policy logic in a structured Rego format and export it as a file. While this view is valuable for understanding the underlying logic, it is currently read-only, limiting users who need to make direct edits. Therefore, there is a need to extend the capabilities of the Code View to support editing, validation, and saving of Policy changes. Save Code as Draft future Purple An additional capability is the ability to save code as a draft. This feature allows users to create and save a draft version of a Policy&rsquo;s code for future use. Note, a single draft only can be saved. note As this is a future capability, the following requirements should ignore any Save as Draft flows and not display this button until this functionality will be accomplished. As this is a future capability, the following requirements should ignore any Save as Draft flows and not display this button until this functionality will be accomplished. View Users will be able to navigate to the Code View and review the Policy Structured Rego (current behavior, no change) An enabled Edit button will be displayed at right side of the code block. Draft code should not be visible on view mode. Light/Dark Mode toggle should be deprecated. Edit New Green An Edit button will be displayed at right side of the code block. Upon click on Edit, the whole code within the block becomes editable. The edit button is hidden. The following buttons displayed at the bottom of the page: Validate Code - as disabled Save - as disabled Save as Draft - as disabled Import File - as disabled Cancel - as enabled Upon editing the block, e.g. adding a character, the buttons above become enabled. Upon click on Validate Code, the code will be validated. If validation errors were found, error should be displayed in a window at the bottom of the page. As well as the code should be highlighted with the problematic areas (current behavior, as defined in: PaC- End to End flows ). Upon click on Save as Draft: A Code draft will be saved and original Code will be displayed in view mode. The edit Policy must have the Policy ID of the current Policy being edited. There is no option to replace/edit the Policy ID . In case Policy ID is not the same, operation should be cancel and error message should be displayed: &ldquo; The Policy ID differs from the ID of the Policy being edited &rdquo;. As long there is a Draft associated within the Code, the original code will be displayed in view mode, and the draft code in edit mode. Upon editing the draft code: A label indicates the draft code will be displayed at the top. All buttons should be enabled. Save Draft - the existing draft will be overwritten. Remove Draft - the existing draft should be removed, user should return to view mode and the original code should be displayed. Cancel - user should return to view mode and the original code should be displayed. Validate Code - draft code should be validated If there are no validation errors, Save button should be enabled. If there are validation errors, should be displayed similarly to original code flow. Import New Green Upon click on Import File, Users will be able to load a file that will replace the existing Policy with a new one. The uploaded rego must have the Policy ID of the current Policy being edited. There is no option to replace/edit the Policy ID . In case Policy ID is not the same, operation should be cancel and error message should be displayed: &ldquo; The Policy ID in the imported file differs from the ID of the Policy being edited &rdquo;. In case Policy ID is similar, any other operation should be allowed, similarly to the Edit Flow. The behavior should be consistent with Edit Flow. Upon loading the file, Users should be able to edit the Code and Validate &amp; Save. Note, Import Policy capability is already exist within the homepage. The requirement is to add similar capability for a given Policy. There shouldn&rsquo;t be any behavior change in the existing Import capability. Native phase 2 The Policy Native View currently exists within the Orchestration Workspace, where it displays SaaS Application Policies in their native language, such as SQL for Snowflake and Databricks, and DAX for Power BI. In the new Policy experience, there is a need to relocate this view into the central Policy interface. This change aims to eliminate unnecessary context switching and improve navigation by consolidating all relevant views in one place. The Native View will adopt a design similar to the Code View, enabling users to edit and save native Policy code directly within the interface. As detailed in: Policy 360&deg; - Native View . Vendor Compare FUTURE Purple The Vendor Compare View is a new addition derived from the orchestration SBS views. It enables users to see how a single PlainID Policy is translated into the vendor&rsquo;s native Policy language, which may result in multiple vendor-side policies. This view improves understanding of how centralized Policies are implemented on the vendor side. As detailed in: Policy 360&deg; - Vendor Compare View . Advanced Rules FUTURE Purple (Temporary Name) In the current experience, the rules defined within a Policy are only accessible by navigating into the associated Building Blocks. This navigation leads to frequent context switching, reduced efficiency, and limited comprehension of the Policy as a whole. Users are unable to view or analyze the full set of rules in a centralized manner. To address this, a new Builder View is needed, one that provides a consolidated and visual representation of all rules within a Policy. This view will allow users to quickly understand the logic, relationships, and structure of the rules in a single glance, improving clarity, efficiency, and overall usability. Map The Policy Map View is utilizing the current Policy Map as defined in: Policy Map - High level requirments . As of today the Map View shows a strip with additional metadata related to the Policy. As this information will be managed in Policy Overview section , this strip should be removed from Map View. Audit As part of the new Policy interface, there is a need to introduce the ability to quickly view the history log and audit trail related to the Policy currently being reviewed. Currently, accessing this information requires navigating to separate pages, which disrupts user flow and reduces efficiency. This view leverages the existing Audit data displayed within the Administation Audit page. Upon click the Audit tab, an audit trail table related to the Policy will be displayed. The displayed data should be derived and displayed similarly to Administration Audit Events as defined in: Administration Audit Detailed . Audit events should be sorted by date, showing the latest events at the top. The following columns should be displayed in the following order (left &rarr; right): Event ID Date &amp; Time User Operation Source Upon click on the Audit event, a side panel with more details should be opened (current behavior). For Update Policy operations, a compare changes button will appear upon hover. Upon click, a side panel should be displayed along with the full comparison report for this audit log. Users will be able to adjust the columns displayed within the Audit view by clicking on the columns icon button, and checking the desired columns. Users will be able to search within the Audit data future Purple . Users will be able to filter the Audit data future Purple . Existing Capabilities Export/ Delete Policy In the current Policy experience, users have the ability to export a policy as code or delete a policy from any point within their navigation flow. As part of the new Policy interface, these capabilities will be retained without any changes to their functionality or user experience. B2B (SAP) The Following Views should be displayed: Details Rules Assets Automated Assignments Conditions Availability Audit The content of each one of the page should have no change in functionality. Create Policy Flow Creation of Policies will be through the Policy Wizard (current behavior), or Code (Import Code - current behavior). As of current behavior, these two flows are being done through separate buttons. The requirement is to consolidate this flow and by that to improve experience. A plus icon button within the Policy Catalog will allow the creation of new Policy. Upon hover the button, tool tip will be displayed: &ldquo;Create Policy&rdquo;. Upon click, a menu will be opened with the following options : From Wizard From Code Upon click From Wizard, the creation flow of Policy should be similar to current behavior (no change). Upon click From Code, the creation flow of Policy should be similar to flow described above: https://plainid.atlassian.net/wiki/spaces/PM/pages/4314464261/Policy+360#Code . Users should be able to write, paste, import a new code block. The loaded Code can be either initiate a creation of a new Policy of edit of existing Policy. Validate button should validate the Code syntax (current behavior, no change) &ldquo;Call to Action&rdquo; button as Create Policy should have similar behavior to current (button microcopy is dynamic - depends on the flow - could be Create Policy, Update Policy, Create/ Update Incomplete Policy &hellip;). Permissions As this new look and feel applies to the Policy experience and navigation within a Policy, access permissions should remain consistent with current behavior. Tenant Admins and AuthZ WS Admins are allowed to edit and delete the Policy. AuthZ WS Viewers are allowed to view the Policy, including all its new views, but are not permitted to edit or delete it. As defined in: https://plainid.atlassian.net/wiki/spaces/PM/pages/2339536932/Permissions#1.-General . Save as Draft is a new functionality that must be enforced by permission as well. It should be available only to Tenant Admins and AuthZ WS Admins, in alignment with other edit actions. Audit Audit should follow the generic guidelines as defined in: Policy in Advanced auth WS . Save as Draft TBD, should be audited- remove, edit of the draft. User Flows Note to QA: these are sample flows, please expand the covering in your tests. Flow Expected Behavior As an AuthZ WS admin, i would like to navigate to a Policy and review the Policy overview section. Policy overview is displayed. The name of the policy is displayed along with the associated application/s logos. User can change policy state. User can see the policy access type. User can click on 3 dot button and export the policy as code or delete it. upon click on delete, a pop-up message should be displayed (current behavior). Last update is visible. Policy overview is not editable. As an AuthZ WS admin, i would like to navigate to a Policy and review the 
... [truncated for budget]
   ----------------------------------------------------------------------

10. Document: PORCH - POP Management
   Similarity: 0.66
   Title: PORCH - POP Management

1. General This document will cover aspects of managing POPs - Policy Orchestration Points within Orchestration WS This is a generic PRD details the generic behavior, vendor-specific PRD will be available to detail customized areas 2. Figma Visual designs are available in figma - https://www.figma.com/file/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;mode=design&amp;t=f407J8CMkqOttvpP-1 3. Detailed Requirements 3.1 Create\Update New POP Trigger - Click on the &ldquo;Add Policy Orchestration Point&rdquo; Button 3.1.1 Generic Fileds The POP form will be customized per vendor to contain the relevant fields, this section details the generic fields that will always be available in the POP form Label Section Type Possible values Required Default Value Validations Editable Hint/Help Vendor General Settings Vendors Logo matrix The list of vendors is dependent of the vendor licenses purchased by the customer Yes NA On creation Display Name General Settings Text field NA Yes Vendor # Name of the vendor - after selecting the vendor and consecutive number for example &ldquo;Zscaler 1&rdquo; Name is unique per ENVIRONMENT additional validations as defined in generic PRD: Object management guideline Yes updated to POP name should trigger update to application\scope as defined in PORCH - Application\Scope - Discover &amp; Map - Generic behavior should not trigger update to other objects using POP such as identity attributes etc' POP ID General Settings Text field NA Yes should be auto-populated by name field as described in generic behavior Object management guideline allowed chars : the definition is identical to HTML IDs (without the ordering requirement): letters (a-z, A-Z), digits (0-9), hyphens (&quot;-&quot;), underscores (&quot;_&quot;), colons (&quot;:&quot;), and periods (&quot;.&quot;). Validation regex: [a-zA-Z0-9_:.-]+ (No change) Max length: 128 chars Unique: Per env - case sensitive Yes updated to POP id should trigger update to application id PORCH - Application\Scope - Discover &amp; Map - Generic behavior Description General Settings Text field NA No empty additional validations as defined in generic PRD: Object management guideline Yes Identity Workspace Associated Workspaces Dropdown List of Identity Workspaces available in the env, ordered alphabetically Yes if one WS available auto selected. if multi WS available empty On creation In the future we will consider allowing changing workspaces, or associating multiple workspaces Define which Identity Workspace is used for Identity Sources and Dynamic Groups Authorization Workspace Associated Workspaces Dropdown List of Authz Workspaces available in the env, ordered alphabetically Yes if one WS available auto selected. if multi WS available empty NA On creation In the future we will consider allowing changing workspaces, or associating multiple workspaces Define which Authorization Workspace is used for Asset Types and Policies Orchestration setting Note: this section will not be visible in create mode only in edit since pop must be created in learn mode Mode defines the mode of the POP will impact the discovery process as well as the policy deployment behavior as defined in PORCH - Policy - Discover &amp; Map &amp; Manage - Generic Behavior Segment There are 3 possible values but the list of possible values will be vendor dependent. Learn, Manage, Enforce Yes Learn NA Yes 3.1.2 Test connection The user can click on Test Connection to check the connectivity, prerequisites, and requirements for connecting to a Policy Orchestration Point vendor. The system will provide clear indication of issues, including a link to the documentation portal for the Policy Orchestration Point, if possible to a specific vendor definitions. The test connection is vendor specific and also dependent on the mode since includes also permissions check since on the one hand we want to work with list permissive, but on the other hand in some vendor the required permissions very based on mode (for example power BI) vendor specific behavior will be detailed in vendor PRD The test connection is required when: creating a new POP when updating a POP: changing between modes updating the connection settings In case the user did not initiate a test connection by himself before the save\create, when he clicks on the create\save before we preform the operation we should conduct a test connection on his behalf before we actually proceed with the action: in case test connection is successful we preceded to create\save in case test connection is failed: save\create does not take place we show the detailed error within the the error box as if the user clicked on the test connection himself 3.1.3 Post-conditions A POP is created, available in the WS POP list The newly created POP orchestration settings are set to the default settings. The process for fetching objects from the vendor, according to the orchestration, and connection settings, is triggered. 3.1.5 define discovery scope Use Case We provide the capability to define multiple POPs for the same vendor within a single tenant, primarily to enable separation of duties in policy management by connecting different POPs to different authorization services (authZ WS). Currently, when a POP is created, we discover and manage all objects based on the permissions of the user specified in the connection settings. To achieve this separation of duties, customers are required to create separate service accounts for each POP in each environment. However, customers have expressed that managing separate service accounts at scale can be burdensome. They would prefer the option to reuse the same service account within an environment for multiple POPs, with the ability to narrow the discovery range beyond the permissions granted. Expected behavior: To allow the discovery scope to be defined within the connection settings, this will be an optional configuration. If not specified, the current behavior will remain, with the discovery range according to the permissions granted to the user. This document serves as a general PRD outlining the generic behavior. For each vendor, a specific PRD will determine if discovery scope configuration is supported, the applicable parameters, and any associated error messages. Details behavior: an optional query builder should be available (behavior simular to simulator but with query builder) The discovery scope will appear at the top of the test connection section Set Discovery Scope button should be available tooltip (Not supported): Discovery Scope: Defines the set of resources accessible for discovery based on specified set of rules. If left undefined, discovery defaults to the permissions of the connected user. upon click a query builder will be opened: Parameter Operator Value Supported relationship Rules limit Drop down of available params will be defined per vendor. if only one parameter available should be selected by default Drop down of available operators will be defined per vendor. default should be equals Free txt, should be validated as part of text connection (detailed behavior specified below) Future - will be defined per vendor: And only OR only And + OR Currently limit will be 1. feature limit of rules can be defined per vendor this setting will not be editable after create, if discovery scope was defined it can&rsquo;t be changed, if not defined than will not be possible to set it up. when defining discovery range as part of test connection\permissions should validate: value defined within the rule is valid user defined in connection settings has the relevant permissions to the range defined detailed error messages and behavior will be specified in vendor specific PRD 3.1.4 Update POP settings When any asynchronous operation disables the &quot;Discover Now&quot; button and displays a spinner on the POP card (e.g., during discovery or mode change), updates to POP settings should also be blocked: UI: Upon navigation, the Settings page should be view-only. API: POP M-API calls should return an error: &ldquo;Cannot update POP while an action is in progress.&rdquo; 3.2 Delete POP Phase 1 : provide only api for QA, not available to end user Phase 2: provide the ability for the end user to delete POP, all associated objects are permanently deleted UI\UX experience: the ability to delete POP will be available in the POP kabab menu by clicking on &ldquo;Delete POP&rdquo; the following confirmation popup should appear: Title: Delete Policy Orchestration Point Body: This action will delete the POP and associated Policies and objects that were generated by the POP on the Platfrom. Note, this action does not delete Policies on &lt;vendor name&gt;. Buttons: Delete (primary), Cancel During the delete process a spinner indicating delete is in process will appear on the POP card Expected behavior in this phase all objects generated by the POP should be deleted, this is the full detailed list including dependencies POP Scope Application Policy + Building blocks DG Rulesets (deleted as part of asset type no need to delete one by one) Conditions Asset type - includes: attributes actions rulesets internal assets (when relevant) identity sources - AUX identity attributes - can be deleted only after building blocks, and AUX are deleted condition templates (either deleted or just de-activate) including values TBD if implemented Policy schema including values Not implemented yet Note: in case there is an object that could not be deleted should not fail the delete POP process, should proceed with the delete object will currently remain in the UI as an orphan. Validation: it will not be possible to delete a POP while there is a discovery process in progress: UI - button should be disabled upon hover the following tooltip (no supported at this point) should appear: &ldquo;Cannot delete POP while discovery is in progress&ldquo; API - user will get an error: &ldquo;Cannot delete POP while discovery is in progress&ldquo; Phase 3 (not implemented): Provide an option for the user if to keep objects generated from the POP or delete all 3.3 Delete env As part of this PRD we are defining a new managed object POP - need to make sure as part of delete env flow POPs are deleted 3.4 POP cards visibility The list of POPs will show the configured POPs, organized alphabetically. The POP card consists of the following UI elements Element Description POP Vendor Logo Visual representation of the vendor logo with a hint which includes the vendor name POP Name Determined by the user in the creation of the POP, can be edited by the user, and is unique in an environment POP Mode - Not implemented Learn, Managed, Enforced POP Status Indicator - Not implemented Indicates the status of the POP, specifically for errors/issues indication - when everything is ok - nothing is shown The list of statuses is described below. Discovery in progress indicator show on card discovery in-progress indication Figma - https://www.figma.com/proto/cFZn7nMBDmm1yqmpcTrCiZ/Policy-Orchestration?type=design&amp;node-id=3801-10033&amp;t=Y0egAh8b7dbO8kKA-0&amp;scaling=scale-down&amp;page-id=1758%3A8454 Tooltip - Discovery in progress POP search will be done by the POP name. available filters (out of scope in phase 1): Filter name Description Priority All [Default] Shows a list of all the POPs in the workspace 0 Errors Show a list of POPs that have issues/errors in them 0 Reconciliation Shows a list of POPs that have issues that need to be manually reconciled by the user Consider making this a default filter when the POP is in Operation (after classification was done). 4 Learn Mode Show a list of POPs that are in learn mode 1 Managed Mode Show a list of POPs that are in managed mode 1 Enforced Mode Show a list of POPs that are in enforced mode 3 Next to each filter show an indication of the number of POPs that the filter is applicable to. 3.5 Audit all CRUD operations should be presented based on generic audit behavior Resource Action Owner Compare changes POP Create, Update, Delete , Discover, Deploy Orchestration Workspace present on update Note: upon delete audit record displayed will be only for the POP not for all the objects deleted as a result from that 3.6 permissions as defined in Orchestration - Workspace available operations should be based on permissions defined in the WS 3.7 Management APIS TBD 3.8 Limits Maximum POPs per Orchestration workspace is 20. need to change to 40
   ----------------------------------------------------------------------

--- SIMILAR PAST STORIES (Apply same approach) ---


1. Story: PLAT-15596
   Story: PLAT-15596 - (2.3.2) - PAP - Policy 360¬∞ - Phase 2 - Add Vendor Compare View - Core capabilities

Description: PRD review recoding:

Share link: https://zoom.us/rec/share/PW7uM6pj0dgRQZAonIJ6av77JvSGiWydlxu5yjJLmK1gUJasHGJGEgNSVTDjUUOa.ckFTexIm5yew1giB 

Passcode: $@4q1Dex

Q&A session recording

Share link: https://zoom.us/rec/share/ws-rgum6o-DXGjaKoCkjslL9whIXUw9oNUAOCwmhNjZgmNUehDOwDU0RT2IMRpt4.Uzx3G9tao8eAKolT 

Passcode: pDw0.6Z3

PRD review recording take 2:

Share link: https://zoom.us/rec/share/5UFGcDQIvs3BlQ_h12lp4LB_3KWTKbnwmLrB9R0VwzRbnQLFD62OWBN9bACAlOkz.dFTuvbMV5-js9uvt 

Passcode: &Y3%7i9@

Story scope

Introducing Vendor compare view into policy 360.


	Visualize the relationship between PlainID policies and their vendor-native counterparts
	Gain transparency into policy synchronization status between plainid and the vendor
	Streamline authoring workflows by exposing side-by-side comparisons in vendor language within the Authorization Workspace
	Enable reconciliation operations such as policy deployment and override - all from a single, unified view



Detailed requirements

https://plainid.atlassian.net/wiki/spaces/PM/pages/4483022849/Policy+360+-+Vendor+Compare+View 


Shadow policies - detailed as part of 4.11 is not in scope for that story will be implemented in a designated story


FE Notes

list of functionalities which can be completed at the end:


	change order using drag and drop
	zoom in out and pinch
	Policy diff view will not open on a full screen - side menu will still be visible (unlike figma)



Acceptance criteria


	behavior validated on both new and existing POPs from different vendors
	behavior validated for different types of policies (masking, row, general)
	behavior validated for use cases when multiple platform policy are connected to single vendor policy
	behavior validated with large amount of polices in the display
	Updated behavior and terminology for audit and permissions validated
	Update pop details (including order) via UI or PAC works as expected
	no regression for flags, reconciliation actions, schedualer, etc'
	No regression for policies used for dynamic authorization service



Acceptance Criteria: behavior validated on both new and existing POPs from different vendors
	behavior validated for different types of policies (masking, row, general)
	behavior validated for use cases when multiple platform policy are connected to single vendor policy
	behavior validated with large amount of polices in the display
	Updated behavior and terminology for audit and permissions validated
	Update pop details (including order) via UI or PAC works as expected
	no regression for flags, reconciliation actions, schedualer, etc'
	No regression for policies used for dynamic authorization service
   ----------------------------------------------------------------------

2. Story: PLAT-13541
   Story: PLAT-13541 - (6.5) - PAP - Generic - Show Policy list by Application

Description: Summary

This story introduces a new UI capability that enables users to view a list of policies associated with a specific application. Similarly to other policy lists fetched for building blocks, this capability should increase visibility and efficiency when working in the Platform. 

Detailed Requirements

This capability will be done directly from the specific Application page when clicking on Policies tab within the Application (similar behavior to conditions). 


	Once a user navigates to an application, the ‚ÄúPolicies‚Äù tab is displayed
	Once the user clicks on it, a new page of all the connected Policies needs to open.
Page Title: ‚ÄúPolicies Using this Application‚Äù
Sub Title: ‚ÄúList of Policies that use this Application. Hover on a Policy and click Manage to edit it‚Äù.
	Policies tab should be located under API Mappers.
	Search bar should be available.
	In case no Policies are connected this Application, an empty state should be displayed (should be generic).



Acceptance Criteria


	Requirement is met.
	The behavior should be executed in the same way as other policy list features in the system.
	Verify scenarios of link/unlink of Applications from Policies.
	Verify Paging.
	Verify permissions and audit



Acceptance Criteria: Requirement is met.
	The behavior should be executed in the same way as other policy list features in the system.
	Verify scenarios of link/unlink of Applications from Policies.
	Verify Paging.
	Verify permissions and audit
   ----------------------------------------------------------------------

--- EXTERNAL API DOCUMENTATION (Use exact endpoints/payloads) ---

Requirements for test data:
‚Ä¢ Copy EXACT JSON structures from documentation - do NOT modify
‚Ä¢ Include ALL required fields shown in examples
‚Ä¢ Use actual field names and data types
‚Ä¢ If JSON example shown, include it verbatim in test steps
‚Ä¢ NO generic placeholders like '<token>' or 'Bearer <value>'
‚Ä¢ If exact payload unavailable: state 'Reference [doc name] for payload'


1. API Doc: Deploy Policy to Vendor
   Source: https://docs.plainid.io/apidocs/deploy-pop-policy-to-vendor
   Similarity: 0.59
   Source: https://docs.plainid.io/apidocs/deploy-pop-policy-to-vendor
Title: Deploy Policy to Vendor

Content:
Search 
 CTRL+K

Powered by
 Deploy Policy to Vendor 
 Published on Jun 29, 2025 
 2 minute(s) read 
 Export PDF 
 Print 
 Prev 
 Next 
Post
/orchestrator/1.0/pop-operations/deploy/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
Deploy Policy to Vendor by Environment ID, POPID, and Vendor Policy ID. You can find the Vendor Policy ID using the 
Get Vendor Policy IDs by POP
 API. 
Notice
Accessing the APIs is through a dedicated domain/URL, according to your
PlainID Tenant Location
United States (US)
 -

https://API.us1.plainid.io
Canada (CA)
 -

https://api.ca1.plainid.io
Europe (EU)
 -

https://api.eu1.plainid.io

Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Important note about headers
Refer to the headers below to modify
 your cURL sample. Check if the following headers are in the sample, if not,
 ensure you add it to your cURL sample before pasting into your API tool. 

Headers
 *Required 
 
 
Header
 
Value

cURL Line
 
 
 
Accept
`application/json`

`-H"Accept: application/json"`
 
 
Content Type
`application/json`

`-H"Content-Type: application/json"`
 
 
cURL
 Sample Guidelines
 
In order for the relevant parameters to appear in the cURL sample, you can input the values in the interactive API console on the right in the Try It or Code Sample tabs. You can then copy the cURL sample from the Code Sample tab in the correct format.
 
Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special
 characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Security
HTTP
Type 
bearer
For more details about Administration API Authentication, check out the Authentication APIs documentation 
 Provide your bearer token in the Authorization header when making requests to protected resources. 
 Example: 
Authorization: Bearer 123

Path parameters
envId
string
Required
Environment ID. You can find the Environment ID in your Environment Settings.

popId
string
Required
POP ID. You can find the POP ID using the 
GET List of POPs API
 or through the UI under your POP settings.

Pattern
^POP[0-9A-Z]{11,13}$

vendorPolicyId
string
Required
Vendor Policy ID. You can find the Vendor Policy ID using the 
Get Vendor Policy IDs by POP
 API or through the UI. To locate the Vendor Policy ID through the UI, refer to 
SaaS Management Vendors
.

Responses
204
POP Policy deployed successfully.

400
Bad Request

application/json

{
 "errors": [
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
 ]
}
Expand All
object 
Response object

errors 
Array of object (Error) 
object 
code
string 

id
string 

status
integer 

name
string 

message
string 

args
object 
path
string 

404
Vendor Policy Not Found

application/json

{
 "errors": [
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
 ]
}
Expand All
object 
Response object

errors 
Array of object (Error) 
object 
code
string 

id
string 

status
integer 

name
string 

message
string 

args
object 
path
string 

500
Internal Server Error

 Was this article helpful? 
 Yes 
 No 

=== JSON EXAMPLES ===
[
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
]

[
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
]

[
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
]

[
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
]
   ----------------------------------------------------------------------

2. API Doc: SaaS Authorization Management
   Source: https://docs.plainid.io/docs/saas-authorization-management
   Similarity: 0.59
   Source: https://docs.plainid.io/docs/saas-authorization-management
Title: SaaS Authorization Management

Content:
SaaS Authorization Management Overview

SaaS Authorization Management
 provides out-of-the-box support to leading SaaS vendors. It enables the 
Platform
 to integrate with SaaS vendors to provide standardization and centralized authorization management while supporting distributed deployment across the organization‚Äôs technology stack.

Integration with the vendors is accomplished through Policy Orchestration. This service is designed to discover, map, and manage authorization policies of SaaS vendors by utilizing their native capabilities using available APIs.

PlainID‚Äôs Policy Administration Point connects to the SaaS Application and discovers existing policies.

Administrators manage and create access control Policies within PlainID‚Äôs dashboard.

New and updated Policies are then pushed back to the SaaS application.

Policy Orchestration ensures that different authorization and access policies are implemented, enforced, and coordinated effectively to achieve the desired security controls while maintaining consistency and avoiding conflicts.

Once vendor objects and policies are discovered and represented in the Platform, like all policies available within the Platform, they can be viewed as code in structured Rego or visually represented in the Policy Map.

Prerequisite

Ensure an Orchestration Workspace is already created. See 
Managing POPs
 to learn more.

SaaS Authorization Management Process

A high-level overview of the 
SaaS Authorization Management
 process includes:

Discovery of Policies
 from the target platform

Display of Policies
 in a unified language

Management of Policies
 from the platform

Monitoring of changes
 in Policies

The solution helps streamline the process of policy creation, enforcement, and updates, making it easier to maintain a secure and compliant environment:

Automate and Streamline:
 By centralizing policy management and automation, organizations can reduce manual efforts required to enforce policies across various systems.

Ensure Consistency
: Policy orchestration ensures that policies are consistently applied across different parts of the organization, preventing discrepancies and security gaps.

Compliance and Governance
: Helps organizations adhere to regulatory requirements and internal governance standards by automating the enforcement of relevant policies.

Visibility and Monitoring
: Provides monitoring and reporting, allowing organizations to track policy enforcement and identify potential issues or violations.

Adaptability
: Facilitates quick updates and adjustments to policies in response to changing business needs, security threats, or regulatory changes.

Risk Management
: By consistently enforcing security and compliance policies, organizations can better manage and mitigate risks related to data breaches, unauthorized access, and other threats.

Learn Mode vs Manage Mode

In PlainID's Orchestration flows, Learn Mode and Manage Mode serve distinct purposes for the gradual onboarding and management of new Policy Orchestration Points (POPs) to the Platform. This section outlines the workflows, key differences, and the impact of both modes.

Discovery Flows

The diagram below depicts the interaction between the Authorization Workspace, Orchestration Workspace, and the Vendor Tenant in both Learn and Manage Mode:

Learn Mode

Comprehensive Visibility
: Provides full visibility into the Policies, Assets, and Identity setup available in the vendor Tenant.

Native Representation
: Captures data in its original vendor language within the Orchestration Workspace.

Standardized Translation
: Translates this data into standardized PlainID representation, such as Policy maps and structured language.

Consistency:
 Ensures a clear, consistent view of Policies, Templates, and values across different Environments.

Manage Mode
:

Policy Management
: Enables the ability to manage and deploy Policies seamlessly from Plain ID to the vendor tenant, ensuring streamlined Policy enforcement.

Policy Reconciliation
: Supports side-by-side comparisons of Policies to identify discrepancies and ensure alignment between PlainID and the vendor Tenant.

Ongoing Maintenance
: Focuses specifically on maintaining policies to ensure they remain up-to-date, accurate, and consistent across Environments.

Learn Mode vs Manage Mode: Detailed Comparison

The table below shows how changes in the vendor Tenant are reflected in PlainID's Orchestration and Authorization Workspaces:

Orchestration Workspace Learn Mode

Orchestration Workspace Manage Mode

Authorization Workspace Learn Mode

Authorization Workspace Manage Mode

Asset Template/Assets

‚úì

‚úì

‚úì

‚úì

Identity Template

‚úì

‚úì

‚úì

‚úì

Values

‚úì

‚úì

‚úì

‚úì

Policies

‚úì

‚úì

‚úì

X

Difference Summary

Identity Templates, Asset Templates, and Values: Fully synchronized in both Learn and Manage Mode across all Workspaces since they are not managed in PlainID.

Policies:

Learn Mode: Full synchronization across Authorization WS and Orchestration WS.

Manage Mode: Policies are synchronized only in the Orchestration WS for visibility and reconciliation, ensuring full transparency. In Manage Mode, Policies are not overwritten in the Authorization WS, maintaining control. The Policy panel in the Orchestration WS allows side-by-side comparisons with the vendor Tenant to highlight differences for reconciliation.

By distinguishing between Learn Mode and Manage Mode, PlainID's Orchestration flows enable seamless onboarding and long-term management of POPs. The ability to discover, compare, and reconcile Policies ensures that organizations can maintain alignment and precision as their Environments evolve.

Current Authorizers that support SaaS Authorization Management include:

Microsoft Power BI

Zscaler ZPA

Snowflake

Databricks

Refer to the relevant documentation or contact PlainID for information on these Authorizers.
   ----------------------------------------------------------------------

3. API Doc: Managing Policies
   Source: https://docs.plainid.io/docs/managing-policies-1
   Similarity: 0.58
   Source: https://docs.plainid.io/docs/managing-policies-1
Title: Managing Policies

Content:
Policies define 
who
 can access 
what
, 
when
, and under which conditions. They can be created using the 
Policy Wizard
, by writing them in 
Rego
, or by inserting 
Native code
 in the Authorization Workspace.

Once created, Policies can be 
managed
 in two the* 
Policy Catalog
, which is the central repository for all Policies. Here you can view, update, export, or delete Policies, as well as 
create new Policies
 and 
activate or deactivate Policies
. The Policy Catalog also provides visibility into how Policies are connected to Actions, Rulesets, and Dynamic Groups, making it easier to trace and maintain dependencies

Click on a Policy in the Authorization Workspace to manage it. When managing Policies, you can see:

Applications
 ‚Äì Applications connected to the Policy

Access Type
 ‚Äì Whether the Policy allows or restricts access

Policy State
 ‚Äì Current status (
Active
 or 
Inactive
)

Last Update
 ‚Äì The most recent modification timestamp

You can also use the three-dot menu to 
Export
 Policy code or 
Delete
 a Policy.

Active
 Policies are included in Authorization decisions, while 
Inactive
 Policies are ignored. Policy State is Environment-specific. By default, Policies are 
Active
 when created or imported.

To change a Policy State:

1. Select the Policy.

2. Toggle 
Active/Inactive
 from the title bar.

For more details, see:

Managing Dynamic Groups

Managing Actions

Managing Rulesets

Policy Views

After creating a Policy (see 
Creating Policies
), the next step is to manage your Policy. Policy Views gives users a complete picture of how a Policy is defined and applied, with options to edit specific parts as needed.

Click on a Policy in the Authorization Workspace to open the Policy Views screen. Policy Views includes the following tabs:

Details

Rules
 (Who, What, When)

Code

Map

Audit

Each tab provides a different way of understanding or updating a Policy.

Details

In the 
Details
 tab, you can view or edit:

Policy Name

Description

Access Type
 ‚Äì whether the Policy allows or restricts access

Connected Applications

The 
Policy ID
 is read-only.

Note:
 An inactive Policy is excluded from authorization decisions.

Rules

The 
Rules
 tab defines the core logic of a Policy, structured into:

Who
 ‚Äì The Dynamic Groups (identities) to which the Policy applies.

What
 ‚Äì The Asset Types, Actions, and Rulesets that specify what resources can be accessed and how.

When
 ‚Äì The Conditions that define when access is allowed or restricted.

Who

The WHO section allows users to view and manage the 
Dynamic Groups
 linked to the Policy.

Click 
Edit
 to add, remove, or update groups.

Create a 
new Dynamic Group
 directly while editing.

For details on creating Dynamic Groups, see 
Policy Wizard
.

What

The 
What
 section controls access to resources. It connects 
Asset Types
, 
Actions
, and 
Rulesets
, allowing you to configure exactly what users can do with a given Asset.

Click 
Edit
 to add, remove, or update Asset Types.

Asset Types
 ‚Äì The categories of resources governed by the Policy.

Actions
 ‚Äì The operations that can be performed on the Assets (for example, view or manage). Actions are linked to Asset Types and can be customized for each.

Rulesets
 ‚Äì Collections of rules that define the permitted or denied Actions on Assets.

You can edit an existing Ruleset to update its logic or conditions. See 
Managing Rulesets
 for more information.

When

The 
When
 section adds context to your Policy by defining 
Conditions
. These are evaluated at runtime to determine whether access should be granted.

Click 
Edit
 to:

Add a new Condition

Search and filter existing Conditions

Update existing Conditions to refine access rules. See 
Managing Conditions
 for more information.

Conditions
 can include constraints such as:

Date and time restrictions

IP address ranges

Conditions are powerful for applying context-aware logic to Policies. For example, you might allow access 
only during business hours
 or 
only from specific networks
.

Map

The 
Policy Map
 provides a visual representation of all Policy components. Click objects for more information about each object.

The map displays:

WHO ‚Äì Dynamic Groups
 The Dynamic Groups that are granted or denied access.

WHEN ‚Äì Conditions:
 Contextual restrictions such as date/time, IP address, or identity attributes.

WHAT ‚Äì Assets:
 Assets and Rulesets, which can be expanded for details and editing.

WHAT ‚Äì Applications:
 Applications through which access is provided, including any configured logos.

Inactive Policies are grayed out in the map and excluded from decisions.

Code

The 
Code
 tab shows the Structured Rego definition of the Policy. Developers and advanced users can:

Edit the code directly

Import an updated Structured Rego file

Validate syntax

For creating new Structured Rego-based Policies, see 
Creating Policies
.

Updating, Exporting, and Deleting Policies

Policies in Structured 
Rego
 can be updated to promote consistency between Environments.

Only valid Policies can be imported.

An 
Inactive
 Policy in the source Environment becomes 
Active
 by default in the target Environment.

Updating a Policy

To update an existing Policy with Structured Rego:

Select the Policy in the 
Authorization Workspace
.

Open the 
Code
 tab.

Click 
Edit
.

Paste updated code or import a file.

Validate
 the code.

Click 
Update Policy
.

If errors are highlighted in the Structured Rego code section, correct them in the editor, then re-import and re-validate.

See our 
Structured Rego
 documentation for more information.

Exporting a Policy

Any Policy in the Catalog can be exported as Structured Rego.

Select the Policy.

Click the three dots (
‚ãÆ
) on the top right.

Select 
Export
.

Exporting does not change Policy State. An Inactive Policy becomes Active by default when imported elsewhere.

See our 
Export Policy API
 and 
Structured Rego
 documentation for more information.

Deleting a Policy

Deleting a Policy removes only the Policy itself. The underlying objects (Assets, Rulesets, Actions, Dynamic Groups) remain intact.

Select the Policy.

Click the three dots (
‚ãÆ
) on the top right.

Select 
Delete
.

Policies can also be deleted using the 
Delete Policy API
.

Audit

The 
Audit
 tab provides a history log of Policy changes, including:

Event ID
 ‚Äì Unique identifier for each event

Date
 ‚Äì When the event occurred

User
 ‚Äì Who initiated the event (email address, 
anonymous
, or POP ID if triggered by Orchestration)

Operation
 ‚Äì The action performed (Create, Update, Invite, etc.)

Operation Source
 ‚Äì The system or method that performed the operation

To filter columns
, use the 
Column Display
 dropdown.

Clicking on an event opens a side panel with more details. For 
Update
 events, a 
Compare Changes
 button is available to highlight what was modified.
   ----------------------------------------------------------------------

4. API Doc: Get Vendor Policy IDs by POP
   Source: https://docs.plainid.io/apidocs/get-policy-vendor-ids
   Similarity: 0.58
   Source: https://docs.plainid.io/apidocs/get-policy-vendor-ids
Title: Get Vendor Policy IDs by POP

Content:
Search 
 CTRL+K

Powered by
 Get Vendor Policy IDs by POP 
 Published on Jun 29, 2025 
 1 minute(s) read 
 Export PDF 
 Print 
 Prev 
 Next 
Get
/orchestrator/2.0/pops/{envId}/{popId}/policies
This is an API to get a list of Policies by Environment and POP ID. You can find the POP ID using the 
GET List of POPs API
 or through the UI under your POP settings. 
Notice
Accessing the APIs is through a dedicated domain/URL, according to your
PlainID Tenant Location
United States (US)
 -

https://API.us1.plainid.io
Canada (CA)
 -

https://api.ca1.plainid.io
Europe (EU)
 -

https://api.eu1.plainid.io

Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Important note about headers
Refer to the headers below to modify
 your cURL sample. Check if the following headers are in the sample, if not,
 ensure you add it to your cURL sample before pasting into your API tool. 

Headers
 *Required 
 
 
Header
 
Value

cURL Line
 
 
 
Accept
`application/json`

`-H"Accept: application/json"`
 
 
cURL
 Sample Guidelines
In order for the relevant parameters to appear in the cURL sample, you can input the values in the interactive API console on the right in the Try It or Code Sample tabs. You can then copy the cURL sample from the Code Sample tab in the correct format.
 
Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special
 characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Security
HTTP
Type 
bearer
For more details about Administration API Authentication, check out the Authentication APIs documentation 
 Provide your bearer token in the Authorization header when making requests to protected resources. 
 Example: 
Authorization: Bearer 123

Path parameters
envId
string
Required
Environment ID. You can find the Environment ID in your Environment Settings.

popId
string
Required
POP ID. You can find the POP ID using the 
GET List of POPs API
 or through the UI under your POP settings.

Pattern
^POP[0-9A-Z]{11,13}$

Query parameters
filter[name]
string
Filter by Policy Name.

limit
number
Limit for pagination.

Minimum
1
Maximum
1000
Default
50.0

offset
number
Offset for pagination.

Minimum
0
Default
0.0

Responses
200
List of POP-related Policies

application/json

{
 "data": [
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432",
 "name": "Role1",
 "type": "ALLOW"
 },
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20441",
 "name": "Role2",
 "type": "ALLOW"
 }
 ],
 "meta": {
 "limit": 50,
 "offset": 0,
 "total": 2
 }
}
Array of object 
object 
data 
Array of object (VendorPolicy) 
object 
vendorPolicyId
string 

name
string 

type
string 

meta
object (meta) 
Response Meta

total
integer 
Total number of records

limit
integer 
Limit the number of records returned

offset
integer 
The starting point for return of records

401
Unauthorized

500
Internal Server Error

 Was this article helpful? 
 Yes 
 No 

=== JSON EXAMPLES ===
{
 "data": [
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432",
 "name": "Role1",
 "type": "ALLOW"
 },
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20441",
 "name": "Role2",
 "type": "ALLOW"
 }
 ],
 "meta": {
 "limit": 50,
 "offset": 0,
 "total": 2
 }
}

{
 "data": [
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432",
 "name": "Role1",
 "type": "ALLOW"
 },
 {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20441",
 "name": "Role2",
 "type": "ALLOW"
 }
 ],
 "meta": {
 "limit": 50,
 "offset": 0,
 "total": 2
 }
}
   ----------------------------------------------------------------------

5. API Doc: Override PlainID Policy
   Source: https://docs.plainid.io/apidocs/override-plainid-policy
   Similarity: 0.56
   Source: https://docs.plainid.io/apidocs/override-plainid-policy
Title: Override PlainID Policy

Content:
Search 
 CTRL+K

Powered by
 Override PlainID Policy from Vendor 
 Published on Jul 6, 2025 
 2 minute(s) read 
 Export PDF 
 Print 
 Prev 
 Next 
Post
/orchestrator/1.0/pop-operations/override/env/{envId}/pop/{popId}/policy/{vendorPolicyId}
Override PlainID Policy from Vendor by Environment, POP and Vendor Policy IDs. You can find the Vendor Policy ID using the 
Get Vendor Policy IDs by POP
. 
Notice
Accessing the APIs is through a dedicated domain/URL, according to your
PlainID Tenant Location
United States (US)
 -

https://API.us1.plainid.io
Canada (CA)
 -

https://api.ca1.plainid.io
Europe (EU)
 -

https://api.eu1.plainid.io

Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Important note about headers
Refer to the headers below to modify
 your cURL sample. Check if the following headers are in the sample, if not,
 ensure you add it to your cURL sample before pasting into your API tool. 

Headers
 *Required 
 
 
Header
 
Value

cURL Line
 
 
 
Accept
`application/json`

`-H"Accept: application/json"`
 
 
Content Type
`application/json`

`-H"Content-Type: application/json"`
 
 
cURL
 Sample Guidelines
 
In order for the relevant parameters to appear in the cURL sample, you can input the values in the interactive API console on the right in the Try It or Code Sample tabs. You can then copy the cURL sample from the Code Sample tab in the correct format.
 
Using HTML Encoded Special Characters

Use HTML encoded patterns when working with values that contain special
 characters like spaces, dashes, etc. Refer to this 
HTML URL Encoding Reference
 for a full list.
 

Security
HTTP
Type 
bearer
For more details about Administration API Authentication, check out the Authentication APIs documentation 
 Provide your bearer token in the Authorization header when making requests to protected resources. 
 Example: 
Authorization: Bearer 123

Path parameters
envId
string
Required
Environment ID. You can find the Environment ID in your Environment Settings.

popId
string
Required
POP ID. You can find the POP ID using the 
GET List of POPs API
 or through the UI under your POP settings.

Pattern
^POP[0-9A-Z]{11,13}$

vendorPolicyId
string
Required
Vendor Policy ID. You can find the Vendor Policy ID using the 
Get Vendor Policy IDs by POP
.

Responses
204
PlainID Policy overridden successfully.

400
Bad Request

application/json

{
 "errors": [
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
 ]
}
Expand All
object 
Response object

errors 
Array of object (Error) 
object 
code
string 

id
string 

status
integer 

name
string 

message
string 

args
object 
path
string 

404
Vendor Policy Not Found

application/json

{
 "errors": [
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
 ]
}
Expand All
object 
Response object

errors 
Array of object (Error) 
object 
code
string 

id
string 

status
integer 

name
string 

message
string 

args
object 
path
string 

500
Internal Server Error

 Was this article helpful? 
 Yes 
 No 

=== JSON EXAMPLES ===
[
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
]

[
 {
 "code": "ORC-027",
 "id": "E880D0",
 "status": 400,
 "name": "PopDoesNotBelongToEnvironment",
 "message": "Pop [POP1P00XFYS0NVJ] does not belong to Environment [ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8]",
 "args": {
 "0": "POP1P00XFYS0NVJ",
 "1": "ec3ff4ee-81f9-4e7f-9037-6fa9fde62cc8"
 }
 }
]

[
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
]

[
 {
 "code": "ORC-25",
 "id": "ECD872",
 "status": 404,
 "name": "VendorPolicyNotFoundError",
 "message": "Vendor Policy by ID [role_0b9192e5-6b04-4350-a781-021878c04689_20432] was not found",
 "args": {
 "vendorPolicyId": "role_0b9192e5-6b04-4350-a781-021878c04689_20432"
 }
 }
]
   ----------------------------------------------------------------------

6. API Doc: Creating Policies
   Source: https://docs.plainid.io/docs/creating-policies
   Similarity: 0.56
   Source: https://docs.plainid.io/docs/creating-policies
Title: Creating Policies

Content:
The Policy Wizard is an easy, visual way to create Policies in the 
Platform
. Before creating a new Policy, you must have created at least one 
Asset Type
 with at least one 
Application
 connected to it. Some objects (like Dynamic Groups and Conditions), can be created while creating a new Policy.

During the Policy creation process, you need to specify whether this new Policy is used for Dynamic Authorization Services or for 
SaaS Policy Management
. Once a Policy has been created, it is listed in the Policy Catalog and can be viewed as code, visually in the Policy Map, exported, edited, and/or deleted.

How to Create Policies

In the Authorization Workspace, you can choose to create a Policy by selecting one of the options after clicking the Plus Button 

From Wizard
 to start creating a Policy using the Policy Wizard. Refer to our guide in the 
Policy Wizard
 for more information.

From Code
 to import or insert a file containing the Policy Code. For more information, refer to 
Policies in Rego
.

From Native
 to paste Policy Code in the vendor language. For more information, refer to 
Native Policies
.

Policy Wizard

To create a Policy with the Policy Wizard:

Choose an Authorization Workspace from the Environment side-panel.

In the Policies tab, click the 
+
 icon.

Select 
From Policy Wizard
. The New Policy Wizard is displayed.

In the 
Fill in Policy Details
 screen, enter a 
Name
 for the Policy (required).

In the 
Generate Policy ID
 section, select whether you want to input a 
Custom ID
 or an 
Auto Generated ID
 (one that the Platform creates). The Policy ID must be unique per Environment. It is used as the leading ID in the CRUD API for Policy Management (for more information, see 
Policy Management APIs
).

If you selected 
Custom ID
, the Policy ID field appears as an editable field. Enter the new Policy ID in the field. The maximum number of characters for this field is 128.

If you selected 
Auto Generated ID
, a GUID is automatically set as the Policy ID.

Once the Policy is saved, the Policy ID can no longer be changed.

Enter a 
Description
 for the new Policy (Optional).

Select the 
Access Type
. Options are 
Allow
 or 
Restrict
.

Allow
 grants access rights to the Identity, if all other aspects of the Policy settings match.

Restrict
 denies access based on the Policy settings.

Select whether you're using the Policy for the 
Dynamic Authorization Service
 or 
SaaS Applications
.

Select the Application/s to connect to this Policy.

Click 
Continue
 to advance to the 
Who Step
.

Who Step

The Wizard advances to the 
WHO
 step, in which you select the Dynamic Groups which will be given access (or denied access) for this Policy.

In the 
Select Dynamic Groups for this Policy
 screen Select one or more Dynamic Groups to which you have Admin Permissions or Create a new Dynamic Group by clicking 
New Dynamic Group
.

For more information, see 
Creating a Dynamic Group in the Policy Wizard
.

Click 
Continue
.

What Step

The Wizard advances to the 
WHAT
 step where you can select which 
Assets Types
 you wish to associate with this Policy.

To add Assets to the Policy
:

Select an 
Asset Type
 from the drop-down. The list of Asset Types depends on which Application you chose to connect to the Policy.

Click on 
Select Rulesets
. A side panel opens where you are required to select at least one Ruleset to use in relation to the selected Asset Type and Action/s. You can also 
create
 a Ruleset from this panel.

After selecting your Ruleset/s, click Manage Rulesets to open the Ruleset side panel if required.

Select the 
Assets
 to use in this Policy

To add 
another
 Action-Ruleset/Asset combination to the Policy, click 
Add Combination
. Note: This button is disabled if no Actions or only one Action is associated with the Asset Type.

To remove a combination, click on 
Remove Combination

Click Save. If you wish to add 
another Asset Type
, click 
Add Asset Type
 and go over the points in Step 1.

Click 
Continue
.

When Step

The wizard advances to the 
WHEN
 Step where you can select which 
Conditions
 you wish to associate with this Policy.

To create a condition
:

Select the checkbox next to existing Conditions or click the 
+ New Condition
. A side panel opens.

Fill in the Connection details section according to the relevant Condition.

Click Save.

Ensure that the relevant Condition is selected in the list of Conditions.

Conditions can also be predefined in the Assets and Conditions section of the Authorization Workspace.

Click 
Done
. The Policy is created and the Policy Map for the new Policy opens.

To manage existing Policies (edit, delete, or add Asset Types), see
 
Managing Policies
.

Note:

By default, all new Policies have a Policy State of Active. This means that they are considered when calculating the authorization decision. For more information, see 
Managing Policies
.

Creating a New Dynamic Group in the Policy Wizard

While creating a new Policy, you may discover that you need to create a new Dynamic Group to help define the Policy. You do not need to exit the Wizard to accomplish this.

After entering the new 
Policy Name
, 
Description
 and 
Access Type
, you click 
Continue
, select the relevant Dynamic Group. If you don't see the Dynamic Group, you have the option of creating a new Dynamic Group from within the Wizard.

To create a new Dynamic Group in the Policy Wizard
:

Click 
New Dynamic Group
. The New Dynamic Group side panel opens.

In the 
Workspace Name
 field, select the Workspace in which you want the Dynamic Group created.

In the 
Fill in the Dynamic Group Details
 section, enter the 
Name
 and the 
Description
 (optional).

In the 
Define Dynamic Group Rules
, define a set of Rules based on existing Identity Attributes by selecting an 
Attribute
, selecting an 
Operator
, and providing a 
Value
. As needed, use the 
And
 and/or 
OR
 options to add additional Rules.

Click 
Save
. The Dynamic Group is created in the specified Identity Workspace and added to the list of available Dynamic Groups to be used in the Policy.

Click 
Continue
 and begin selecting Assets for the new Policy, as detailed above.

Policies in Structured Rego

Policies in structured 
Rego
 can be imported and copied into the Platform to promote Policies between Environments. This can be done in the 
Authorization Workspace
 or using the 
Import/Export Policy APIs
. Only valid Policies can be successfully imported.

Note:
 A Policy that is 
Inactive
 in the source Environment will, by default, be 
Active
 when imported into a new Environment. Updating an existing Policy via import does not affect its current Policy State. To deactivate the Policy in the target Environment, see 
Managing Policies
.

Prerequisites for Importing Policies

The following objects are required in the target Environment for successful import and proper Authorization calculation:

Identity Templates with relevant Identity Attributes defined in the Identity Workspace Settings.

Asset Templates with associated Asset Attributes and Actions defined in the Asset Type Settings.

Required for Policies to be considered in access decisions:

Asset Types used in the Policy must be connected to an Application defined in the Authorization Workspace.

The relevant Application must be connected to a Scope defined in the Environment settings.

Without these connections, Policies can be imported successfully but will not factor into access decisions. Connections can be defined before or after import.

Creating a New Policy In Rego

To import Policy code in Rego:

Select the relevant 
Authorization Workspace
.

Ensure the 
Policies
 section is open.

Click on the 
Plus button
 

Click 
From Code
 to open the 
Create Policy from Code
 screen.

Import a 
.rego
 file by:

Pasting the Rego code
 in the input field.

Dragging and dropping
 the file into the input field.

Clicking Import File
 on the bottom of the page to upload a file.

You can also import or drag and drop a JSON file containing Rego code
.

Optionally, 
Download Sample File
 to guide you on Policy creation.

After importing, review and edit any errors highlighted in the wizard.

Click 
Validate
 to check the code.

Click 
Create Policy
 to finalize the new Policy.

Native Policies

Importing Native Policies allows you to create and manage Policies directly in a POP vendor‚Äôs native language instead of Rego. This is particularly useful for SaaS applications that support native Policy definitions, enabling you to bring existing logic into the Platform without translation. See 
Snowflake
 or 
Databricks
 Native Policy Support articles for a guide on Policy, tag, table, and column function parameters.

PlainID strongly recommends implementing Policies with tags, table, and column mapping
.

Creating a New Native Policy

To create a new Native Policy
:

In the 
Authorization Workspace Policy screen
, click the 
Plus (+)
 button.

Select 
From Native
. A new Native Policy screen opens.

Enter a 
Label
 for the Policy.

In the 
Generate Policy ID
 section, choose one of the following:

Custom ID
 ‚Äì Create your own unique Policy ID. Enter it in the field (maximum 128 characters).

Auto Generated ID
 ‚Äì The Platform automatically generates a GUID.

The Policy ID must be unique per Environment and is used as the primary identifier in the 
Policy Management APIs
.

Enter a 
Description
 for the Policy (optional).

Select the 
Application
 that supports native Policies.

Provide the 
POP connection details
. For more information, see 
SaaS Management Vendors
.

In the code screen, 
paste
 the Native Policy code in the input field. Refer to Snowflake and Databricks documentation for more information on vendor languages.

File upload and validation for Native Policies 
is not available yet
.

Add tables, tags, and columns as needed per vendor language. More information on how to use them are available in the 
Snowflake
 or 
Databricks
 Native Policy Support articles.

Row Access Policies
 ‚Äì Define the Policy logic and specify the relevant tables.

Masking Policies
 ‚Äì Define the Policy logic and specify the tags or columns to be masked.

Click Create to finalize the new Native Policy.

Check out the video below for an explanantion of the value of Native Policies and a detailed guide on creating Native Policies.
   ----------------------------------------------------------------------

7. API Doc: SaaS Management Vendors
   Source: https://docs.plainid.io/apidocs/saas-management-vendors
   Similarity: 0.55
   Source: https://docs.plainid.io/apidocs/saas-management-vendors
Title: SaaS Management Vendors

Content:
This article provides instructions on how to configure different vendors with your Policy Orchestration Points (POP) and how to locate the 
Vendor Policy ID
 according to each vendor. Users will need to modify and add the credential objects as listed in the POP API Documentation according to their preferred vendor. These credentials are acquired from the vendors and are used as parameters in the POP APIs.

Power BI

This section outlines the parameters required for integrating Power BI with your system. It provides a detailed explanation of the general parameters necessary for authentication and access, as well as the optional Discovery Scope Parameters used to customize user permissions and Workspace or Dataset discovery.

General Parameter Table
:

Parameter

Description

Value

authenticationMethod

Authentication Method

"service_principal"

clientID

Power BI Client ID

string

clientSecret

Power BI Client Secret

string

secretKey

The Secret Key of the External Secret Store. 
Replaces clientSecret
. 
 Only for use with 
External Secret Stores
. 
 
Note: If opting to use a Secret Key, ensure that your Client Secret is set in your External Secret Store.

string

secretStore

The Store ID of the External Secret Store as set in 
Managing Secret Stores
.

string

tenant

Power BI Tenant ID

string

discoveryScopeRule

Optional
 parameter that allows users to specify user permissions and definitions during Discovery based on Workspaces and Datasets. 
See the Discovery Scope Parameter Table below for specific parameter information.

JSON Array

Discovery Scope Parameter Table
:

Parameter

Description

Value

hierarchyScopeKey

Defines where the Discovery is based 
 Valid values: 
 - 
workspace
 
 - 
dataset

string

operator

Defines the operator for the Discovery. 
 Valid Values: 
 - 
IN
 
 - 
NOT_IN
- 
EQUALS
- 
NOTEQUALS

string

value

Specifies the name of the Workspace or Dataset on which the Discovery is based. 
 
When using a Dataset, ensure it is formatted as follows, with the Workspace name
:
["workspace.dataset"]

array

Power BI Credentials Examples

Workspace Example
:

...
{
 "popConnectionCredentials": {
 "authenticationMethod": "service_principal",
 "credentials": {
 "clientID": "84f8n492-f2ce-446b-bace-6df750c2e8c9",
 "clientSecret": null, //For use with PlainID Internal Store.
 "secretKey": "john-powerbi", //replaces clientSecret when using External Secret Stores.
 "secretStore": "azure", //Store ID
 "tenant": "0d417611-5b17-425e-a5b9-7b98e1aa24b8",
 "discoveryScopeRule": {
 "OR": [
 {
 "AND": [
 {
 "hierarchyScopeKey": "workspace",
 "operator": "EQUALS",
 "value": ["workspace1"]
 }
 ]
 }
 ]
 }
 }
}
}
...

Dataset Example

...
{
 "popConnectionCredentials": {
 "authenticationMethod": "service_principal",
 "credentials": {
 "clientID": "84f8n492-f2ce-446b-bace-6df750c2e8c9",
 "clientSecret": null, //For use with PlainID Internal Store.
 "secretKey": "john-powerbi", //replaces clientSecret //replaces clientSecret when using External Secret Stores.
 "secretStore": "azure", //Store ID
 "tenant": "0d417611-5b17-425e-a5b9-7b98e1aa24b8",
 "discoveryScopeRule": {
 "OR": [
 {
 "AND": [
 {
 "hierarchyScopeKey": "dataset",
 "operator": "EQUALS",
 "value": ["workspace.dataset"]
 }
 ]
 }
 ]
 }
 }
}
}
...

Zscaler

Parameter

Description

Value

authenticationMethod

Authentication Method

"client_credentials"

API Key

Zscaler API Key

string

API Key Secret

Zscaler API Secret

string

Customer ID

Zscaler Customer ID

string

Customer based URI

Zscaler URI

string

Zscaler Credentials Example

...
 "popConnectionCredentials": {
 "authenticationMethod": "client_credentials",
 "credentials": {
 "API Key": "NzIwNTkwMjQyNjIwMzc1Nzg0OTIwOGFjMmUtYjE1OS00NDg4LTllZmQtYTExY2IzZjI0ZWIw",
 "API Key Secret": null,
 "Customer ID": "72059024269137504",
 "Customer based URI": "https://config.zpabeta.net"
 }
 },
...

Snowflake

Parameter

Description

Value

authenticationMethod

Authentication Method. 
 This is automatically set to 
"key_pair_authentication"
.
 Refer to the Snowflake documentation on 
Using key-pair authentication
 for information on how to set up Key Pair authentication and retrieve the private key to use in the POP Connection Credentials.

"key_pair_authentication"

computeWarehouse

Compute Warehouse

string

privateKey

Private Secret Key

string

port

Snowflake Server Port

integer

secretKey

The Secret Key of the External Secret Store. 
Replaces 
privateKey
. 
 Only for use with 
External Secret Stores
. 
 
Note: If opting to use a Secret Key, ensure that your Client Secret is set in your External Secret Store.

string

secretStore

The Store ID of the External Secret Store as set in 
Managing Secret Stores
.

string

server

Snowflake Account Server

string

Existing POPs using Basic Authentication

For 
existing
 POPs using Basic Authentication. PlainID recommends migrating to Key Pair Authentication. Please note that once migrated, reverting to Basic Authentication is not supported.

Snowflake Credentials Examples

Key Pair Authentication Example
:

...
"popConnectionCredentials": {
 "authenticationMethod": "key_pair_authentication",
 "credentials": {
 "secretStore": "aws", //Store ID
 "computeWarehouse": "compute_wh",
 "port": 443, 
 "server": "en14622.us-central-99.snowflakecomputing.com",
 "secretKey": "john-keypair-snowflake" //replaces privateKey when using External Secret Stores
 "privateKey": ---BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCDKgwggSkAgEAAoIBAQDPXCe7Cr4FDSPml\n04JPDLMBCRHW2R+JIsivYUNUkI4SDF2CydeMw41lPhp4iLldVd7Zgwl4RGvvjxed+Q\nDUqQrWjeuGGW....3g\nHvIliGQqZkACN6n4GcaCZHJJudxZDisDQsIvOQlWuloZ9blkYp34Qnw+0umu1n1Y\nvHs5vuqB7DD2341Xpg+xNLVL\n-----END PRIVATE KEY-----\n"} //For use with PlainID Internal Store
 }
}
...

Databricks

Parameter

Description

Value

authenticationMethod

Authentication Method

"service_principal"

Host

Databricks Workspace Host URL

https://adb-1234567890123456.7.azuredatabricks.net/

Client ID

Service Principal Client ID

abcd1234-5678-90ef-ghij-1234567890kl

Client Secret

Service Principal Client Secret

s3cr3tK3y9876543210exampleabcdef123456

secretKey

The Secret Key of the External Secret Store. 
Replaces clientSecret
. 
 Only for use with 
External Secret Stores
. 
 
Note: If opting to use a Secret Key, ensure that your Client Secret is set in your External Secret Store.

string

secretStore

The Store ID of the External Secret Store as set in 
Managing Secret Stores
.

string

Warehouse ID

SQL Warehouse Identifier

abc123ef456gh789ij01

Databricks Credentials Example

...
 "popConnectionCredentials": {
 "authenticationMethod": "service_principal",
 "credentials": {
 "Client ID": "31844d10-84af-4931-8c05-427f1894e598",
 "Client Secret": "null", //For use with PlainID Internal Store
 "Host": "https://adb-3194995835232616.16.azuredatabricks.net/",
 "secretKey": "john-databricks", //replaces clientSecret when using External Secret Stores
 "secretStore": "azure", //Store ID
 "Warehouse ID": "36d1918d74ca0e82"
 }
 },
...

Vendor Policy ID

Depending on the vendor, the location and format of the Vendor Policy ID may vary:

Databricks, Snowflake, Zscaler

For these vendors, the 
Vendor Policy ID
 is displayed in the 
Policy Details
 panel. You can use this value directly when managing or troubleshooting vendor-side policies.

Power BI

For Power BI, the Vendor Policy ID is generated using a concatenation format:

role_<datasetID>_<roleId>

Example:

role_3e93e93w-8fs7-8sf8-83d8-9d8s6f6g7h82_19283

In this format:

role
 is static

datasetID
 refers to the unique identifier of the Power BI dataset.

roleId
 refers to the specific role applied to that dataset.

=== JSON EXAMPLES ===
[
 "workspace.dataset"
]

{
 "AND": [
 {
 "hierarchyScopeKey": "workspace",
 "operator": "EQUALS",
 "value": [
 "workspace1"
 ]
 }
 ]
}

{
 "AND": [
 {
 "hierarchyScopeKey": "workspace",
 "operator": "EQUALS",
 "value": [
 "workspace1"
 ]
 }
 ]
}

{
 "AND": [
 {
 "hierarchyScopeKey": "dataset",
 "operator": "EQUALS",
 "value": [
 "workspace.dataset"
 ]
 }
 ]
}

{
 "AND": [
 {
 "hierarchyScopeKey": "dataset",
 "operator": "EQUALS",
 "value": [
 "workspace.dataset"
 ]
 }
 ]
}

{
 "authenticationMethod": "client_credentials",
 "credentials": {
 "API Key": "NzIwNTkwMjQyNjIwMzc1Nzg0OTIwOGFjMmUtYjE1OS00NDg4LTllZmQtYTExY2IzZjI0ZWIw",
 "API Key Secret": null,
 "Customer ID": "72059024269137504",
 "Customer based URI": "https://config.zpabeta.net"
 }
}

{
 "authenticationMethod": "client_credentials",
 "credentials": {
 "API Key": "NzIwNTkwMjQyNjIwMzc1Nzg0OTIwOGFjMmUtYjE1OS00NDg4LTllZmQtYTExY2IzZjI0ZWIw",
 "API Key Secret": null,
 "Customer ID": "72059024269137504",
 "Customer based URI": "https://config.zpabeta.net"
 }
}
   ----------------------------------------------------------------------

8. API Doc: Orchestration Workspace
   Source: https://docs.plainid.io/docs/orchestration-workspace
   Similarity: 0.55
   Source: https://docs.plainid.io/docs/orchestration-workspace
Title: Orchestration Workspace

Content:
The Orchestration Workspace is designed to represent all current connections to SaaS Applications and list all Policy Orchestration Points (POPs) available within the Environment.

SaaS Authorization Management
 provides out-of-the-box support to leading SaaS vendors and is managed within the Orchestration Workspace.. It enables the Platform to integrate with SaaS vendors to provide standardization and centralized Authorization management while supporting distributed deployment across the organization‚Äôs technology stack.

The Orchestration Workspace is used to 
discover
, 
map
, and 
manage
 SaaS vendor authorization policies using the vendor's native APIs. It allows your organization to centralize control over Policies originating in third-party applications, while still respecting the structure and constraints of each vendor's authorization model.

Each Orchestration Workspace includes:

A list of 
Policy Orchestration Points (POPs)
 that define the integration between your 
Platform
 Tenant and a specific vendor tenant.

A view of the 
Vendor Policies and Objects
 discovered through the connection.

Tools to 
discover
, 
manage
, and 
sync
 Authorization Policies between systems.

Additional Information

For more on POPs, see 
Managing POPs
.

For details on supported vendors and authorizers, see 
SaaS Authorization Management
.

Permissions

The Permissions tab enables you to apply access rights to various levels of the 
Platform
. There are two levels of access permissions:¬†
Admins¬†
have full administrative capabilities within the Environment
 to create, modify, and delete entities at that level
Viewers
 
have access to a full 
view¬†
of all data-related objects managed within the Environment.
Note: Permissions can¬†
only¬†
be defined when using an external IDP.
¬†
¬†Changes affecting Permissions may take up to 15 minutes to take effect in the Platform.
For more information, see
¬†
 
Platform Permissions
. 

Creating an Orchestration Workspace

To begin using 
SaaS Authorization Management
, you first need to 
create an Orchestration Workspace
. By default, Environment do not have an Orchestration Workspace. They must be created manually.

Once you have created the Orchestration Workspace, you can manage POPs. Initially, when an Orchestration Workspace is created, the Workspace will be empty, as no POPs have been created yet. Refer to 
Managing POPs
 for instructions on how to create a POP.

Workspace Layout and Actions

When accessing an Orchestration Workspace, you can:

View and manage all POPs
 connected to the Workspace.

Initiate a 
Discovery Process
 to retrieve authorization-related data, such as Roles, Resources, and Policies, from the vendor.

Browse discovered Vendor Policies and Objects, including seeing a 
side-by-side comparison of PlainID and Vendor Policies
 in their 
native terminology
.

Identify changes made by the vendor since the last sync through warning indicators.

Deploy Policies from PlainID to the vendor.

This streamlined environment helps ensure consistency and traceability across authorization models, regardless of the vendor‚Äôs native structure.
   ----------------------------------------------------------------------

9. API Doc: About PAAs and PIPs
   Source: https://docs.plainid.io/docs/about-paas-and-pips
   Similarity: 0.54
   Source: https://docs.plainid.io/docs/about-paas-and-pips
Title: About PAAs and PIPs

Content:
PAA and PIP Settings

PAA and PIP settings are categorized into both global (Tenant) and Environment levels.

Environmental PAA and PIP settings
 are accessible to designated administrators and viewers, whereas 
Global PAA and PIP settings
 are accessible and administrable exclusively by tenant administrators.

PAA

For a variety of reasons, an organization may prefer to have their Policy Decision Point (PDP) as close as possible to their business applications. These reasons may include any or all of the following:

Increase performance

Decrease latency (downtime, delays, etc.)

Increase security

Prevent sending sensitive organizational data over the Internet

To achieve these goals, you can host components of the Authorization Platform within your network (LAN or Cloud provider such as AWS, Azure, Google Cloud etc.) by configuring one or more PAAs (Policy Authorization Agents) wherever you wish to host it.

A Policy Authorization Agent is a set of microservices or components that are deployed in your environment.
 It can be hosted on a local network (delivering increased performance and security, decreased latency and timeouts, etc.) or it can be in a datacenter physically located in close proximity to your organization (also decreasing latency, etc.).

Once you create a PAA, the PAA is listed on the Policy Authorization Agents screen. Each PAA is represented by a Policy Authorization Agent Card.

The PAA consists of the following components:

Hybrid Agent
, responsible for communicating with the Authorization Platform and the Customer-hosted hybrid components.

PIP (Policy Information Point)
, responsible for connecting with the various data sources (databases, REST APIs, user repositories, etc.)

PDP (Policy Decision Point)
, responsible for providing the runtime authorization decisions, connecting to the Organization's Applications, services and APIs.

Built-in REDIS
, used for local caching and database (in Production environments, it is recommended that you use a managed REDIS)

Redis Cluster Mode
Redis Cluster Mode is currently not supported. 

Sample PAA Workflow

When an organization is maintaining multiple Environments (for example, Staging and Production), it is recommended that a PAA be configured for each Environment, each with its own connection strings.

In this scenario, the decision-making workflow can involve (for example):

An Application requesting an authorization decision from the local PDP.

If Identity information is required, the PDP contacts the local PIP to retrieve Identity data from the local data sources.

The PIP data is returned to the PDP, which sends the decision back to the Application.

All communication is managed locally, increasing performance and security, protecting sensitive information, and decreasing latency.

Supported Architectures

The PAA can work in a customer-hosted environment through the use of the following tools:

Kubernetes-based deployment (standard Helm Chart)

Standalone (Binary/Service)

End-to-End Workflow

An end-to-end workflow of configuring a Policy Authorization Agent to manage communication and authorization decisions locally would include the following steps:

Create a PAA

Download the PAA bundle

Install and configure the PAA

Defining a Data Source

Defining a View for the Data Source

Assign the PAA to an Environment and/or Scopes

Create a new Asset Type

Associate the Asset Type Attributes

For more information, see 
Managing Policy Authorization Agents
.

Viewing Policy Authorization Agent Details

At any time, you can view details of a PAA by clicking on the PAA Card in the Policy Authorization Agents screen (
Tenant Settings > Policy Authorization Agents
).

The Policy Authorization Agent Details side panel opens, displaying the following information:

Name of the Policy Agent (which is editable, enabling you to change it, if needed)

Agent ID number

Click 
Copy
 to copy the Agent ID number.

Click 
Save
 if you changed the PAA name.

Policy Authorization Agent Cards

Multiple PAAs can be created within a Tenant. Each PAA is listed in the Policy Authorization Agent list, located on the Policy Authorization Agent tab of the Tenant Settings screen.

The first PAA card that appears on the Policy Authorization Agent tab is the built-in PAA that contains a PDP component (Cloud-based Authorization Platform with all components hosted in the Cloud). Additional PAAs appear in alphabetical order, each containing the following information:

PAA Name

PIP icon
, which is visible when the PAA is connected to one or more PIPs. If no PIPs have been connected to this PAA, the PIP icon is not displayed.

PDP icon
 indicates that a PDP has been connected to the PAA.

Download
 button enables you to download an installation bundle for the PAA. Bundle options include: 
Helm
 and 
Standalone
.

PAA and PIP Administration Audit

Users can access PAA and PIP Admin Audit Events through the 
Administration Audit Reports
 article.
   ----------------------------------------------------------------------

10. API Doc: Managing the IDP Token Enrichment Service
   Source: https://docs.plainid.io/docs/managing-the-idp-token-enrichment-service
   Similarity: 0.54
   Source: https://docs.plainid.io/docs/managing-the-idp-token-enrichment-service
Title: Managing the IDP Token Enrichment Service

Content:
The PlainID IDP Token Enrichment Service integrates with Identity Providers (IDPs) to dynamically enrich users' Authorizations. During user authentication, entitlements calculated by PlainID policies are translated into claims and included in the JWT generated by the IDP, which is then used by Applications.

This Authorization pattern enables seamless control over user access per authentication session, without requiring the user or the Application to interact with the PlainID platform or be aware of the dynamic policy calculations. This ensures that your organization's access rules are applied transparently.

You can read more about this Authorization pattern 
here
.

Many IDP providers connect to external data sources during user login to enrich token claims. PlainID acts as an enrichment provider by adapting to each IDP vendor‚Äôs proprietary configuration and mapping requirements, aligning them with PlainID‚Äôs request and response structures.

To leverage this pattern, 
deploy
 and 
configure
 the IDP Token Enrichment Service, 
connect your Applications to the PDP for Policy decisions
, and complete the integration with your organization‚Äôs IDP. This page provides details on how to deploy, configure, and maintain the IDP Token Enrichment Service. For IDP integration, refer to the relevant IDP vendor page in our documentation as well as the vendor's own documentation.

Token Enrichment Workflow Example

User requests to log into the Online Bank Portal.

The organization's Online Bank Portal application receives the login requests and sends a query to the IDP.

The IDP sends a query to the PlainID IDP Token Enrichment Service

The PDP calculates the decision.

The PDP returns a decision. Claims with the required values are then returned to the PlainID Token Enrichment Service, which enriches the JWT token and returns it to the organization's IDP.

The enriched JWT is returned to the Application, which uses the information in the enriched token to either allow or deny access to the Application.

PAP Prerequisites

To leverage the IDP Token Enrichment Service with your IDP, you must define the necessary authorization artifacts within the PlainID Dynamic Authorization Platform (PAP). The following artifacts are required to complete the integration:

Application

Represents the integration with your IDP.

Asset Type
 (linked to the Application)

Governs the authorizations or claims received based on Policies during the token enrichment process.

Scope
 (linked to the Application)

Acts as an integration object. Retain your Scope's 
Client ID
 and 
Client Secret
, as these need to be defined in the 
IDP Token Enrichment Service Configuration
.

Policies

Corresponding Policies must be created and linked to the Application and Asset type. These Policies define the business logic that dynamically determine the Authorizations enriched in the user token.

PAA (Policy Authorization Agent)

The Policy Authorization Agent
 must be downloaded, deployed, and operational within your infrastructure.

Note

PlainID fully supports Cloud integration for some IDPs. This requires a Claims Asset Type definition, in addition to defining your Authorizations as Claim Assets with pairs of 
claimKey
 and 
claimValue
 Attributes.

Contact PlainID Support for more details regarding this integration pattern.

IDP Prerequisites

IDP prerequisites and integration specifics are detailed in each IDP vendor page. You can refer to the following vendor pages for more information:

Okta

Auth0

Microsoft Entra ID

Ping

Note

If using any other IDP that supports external data source integration during the authentication flow and you wish to integrate with PlainID as an enrichment provider, please contact PlainID support.

IDP Token Enrichment Service in the Policy Authorization Agent (PAA)

The PAA deployment includes the IDP Token Enrichment Service as part of the service bundle. By default this service is disabled and if needed it should be enabled and configured.

To install or upgrade your IDP Token Enrichment Service:

K8s Helm Deployment

Download the Helm package for the relevant PAA.

In the downloaded Helm package, locate and open the 
values.yaml
 and 
custom-values.yaml
 files. Similar to other services, you can override configuration by copying relevant configurations from the 
values.yaml
 to 
custom-values.yaml
 and define there your preferred values.

In the 
values.yaml
 file, locate the 
idpWebhook
 section which includes:

The service enablement configuration flag

Other service operational configurations

Consult our Professional Services team if required.

A commented out 
config.yaml
 section with all 
configurations
 you need for the integration.

Copy the¬†
idpWebhook
¬†section to your 
custom-values.yaml

To enable the IDP Token Enrichment Service, set the 
idpWebhook: enabled:
 flag to 
true
.

Configure additional service operations as needed (refer to the 
Additional Configurations
 section).

Configure your IDP applications in the relevant section.

Standalone Deployment

Download the Standalone package for the relevant PAA.

To enable the IDP Token Enrichment Service:

Locate and open the 
plainid/init/aliases
 file.

Locate the 
function start_plainid_paa() {
 and 
function stop_plainid_paa() {
 functions.

Append 
start_idp-webhook
 and 
stop_idp-webhook
 to the end of the relevant sections.

To configure your 
IDP Token Enrichment Service integration
, locate the 
config.yaml
 file under 
idp-webhook\conf
 folder in your downloaded pack, configure additional service operations as needed, and setup your IDP applications.

Additional Configurations

Additional Configurations

For details on additional configurations, refer to 
IDP Token Enrichment Service Configuration Parameters
 section and copy the relevant parameters to your 
custom-values.yaml
 file and edit according to your IDP integration. Set up additional service operational configuration as needed and setup your IDP applications.

Configure Your IDP Token Enrichment Service Integration

The configuration for your IDP integration within the IDP Token Enrichment Service is handled through the 
config.yaml
 file for Standalone deployments, or by copying the relevant section from values.yaml to 
values-custom.yaml
 for Kubernetes Helm deployments.

These configurations define general service settings and details about the Applications integrated from your IDP, including how requests are processed and how PlainID dynamic authorizations will enrich claims. Detailed tables outlining the various configuration options and their explanations are provided in the following section.

External IDP Token Authentication

The IDP Token Enrichment Service supports authentication using an external IDP token, enabling secure, automated credential exchange for enriched authorization decisions.

By configuring the 
idpSources
 section, administrators can define trusted Identity Providers and securely retrieve tokens using stored client credentials, which are referenced via a secret manager. This approach enhances security by decoupling static secrets from the configuration and supports dynamic refresh using asyncRefresh. Applications consuming this token must be defined under the 
apps
 section, where each application links to a specific IDP via the 
idpSourceId
 key. This capability allows organizations to streamline integration with standards-based IDPs, reduce manual token management, and centralize access policy enforcement through the PDP Runtime.

IDP Token Enrichment Service Configuration Parameters

If using a Helm deployment, all configurations need to be set through the custom-values.yaml file in your package. Ensure that you copy the relevant parameters from the 
values.yaml
 and add it to your 
custom-values.yaml
.

General Parameters

KeyName

Required

Description

Value Examples

Default

Vendor-specific Required Parameters

http.port

Yes

The port that the IDP Token Enrichment service listens to

5001

8080

--

server.name

Yes

Name of the server

idp-hook

idp-webhook

--

server.auth.secret

No

This secret is used to allow the IDP to authenticate with the IDP Token Enrichment Service endpoint

--

--

--

runtime.host

Yes

Base URL of the PDP in your PAA

--

--

--

runtime.uri

Yes

Static value of the PDP endpoint used for token enrichment

/api/runtime/token/v3

--

--

runtime.timeout

No

Timeout for PDP Runtime requests

3s

--

--

runtime.ignoreSSL

No

Flag to ignore SSL certificate validation

false

false

--

log.format

No

Log format

text
 / 
json
 (for structured logging)

text

--

log.level

No

Log level

trace
, 
debug
, 
info
, 
warn
, 
warning
, 
error
, 
fatal
, 
panic

info

--

log.logTo

No

Log destination

console
 / 
file
 / 
rolling

console

--

log.filePath

Yes, if log.logTo has any of values: file, rolling

Log file location

/opt/plainid/logs/idpwebhook.log

--

--

log.maxSize

No

MaxSize is the maximum size in megabytes of the log file before it gets rotated.

10

100MB

--

log.maxAge

No

MaxAge is the maximum number of days to retain old log files based on the timestamp encoded in their filename.

14

The default is not to remove old log files based on age.

--

log.maxBackups

No

MaxBackups is the maximum number of old log files to retain.

5

The default is to retain all old log files (though MaxAge may still cause them to get deleted)

--

log.localTime

No

LocalTime is the local time zone.

true
, 
false
 (use UTC time)

false

--

log.compress

No

Compress determines if the rotated log files should be compressed using gzip.

true
, 
false
 (not to perform compression)

false

--

management.port

Yes

Port for management endpoint

8081

8081

--

Application Parameters

Integration with IDPs is based on applications, defined in the IDP and represent the business application that will consume the dynamic authorization via token enrichment, and configured in the Token Enrichment Service with the below parameters.

Note: Each Application the IDP Token Enrichment service needs to have individual Application configurations.

KeyName

Required

Description

Value Examples

Default

Vendor-specific Required Parameters

apps.<app>

Yes

The IDP Application name - must be an exact match and unique

--

--

--

apps.<app>.clientid

No

The PlainID Scope Client ID

PSIG6O4TLVZ6EJZRZJKT

--

Required for: 
 - 
Entra ID

apps.<app>.clientsecret

No

The PlainID Scope Client Secret

--

--

Required for: 
 - 
Entra ID

apps.<app>.entitytype

Yes

The Identity Type which will be used for the authorization calculation in PDP

User
, 
employees
 etc. 
Or any Identity Template ID defined in PlainID and used for the integration.

User

--

apps.<app>.userid

No

The JSON path to the user ID in the IDP request

$.Data.AuthenticationContext.User.UserPrincipalName

--

Required for: 
 - 
Entra ID

apps.<app>.claims

Yes

List of claims and the corresponding JSON Path mappings from the PlainID PDP Response

plainid: $.response[*].access[?(@.resourceType == "accounts")].path
 
See a full example in the 
Mapping the PlainID Policy Decision Response to Claims
 section below.

--

apps.<app>.includeidentity

No

Indicate to the PDP whether to include the Identity Attributes in the response

true
 
 
false

false

--

apps.<app>.resourcetypes

No

Resource types passed to PDP.
Resource Type is a representation of the Asset type governs the authorizations/claims one will get based on policies during the token enrichment flow.

Any valid resource type defined in the Authorization WS used for the integration

--

--

apps.<app>.parseResponseType

No

Switches to key value format in claims.

jsonpath
 / 
cloud
 (used for claims key value pairs in full cloud integration when applicable)

jsonpath

--

apps.<app>.tokentype

No

Used in claim parsing logic of Okta IDP

identity
, 
access

--

Required for:
 - 
Okta

apps.<app>.params

No

Additional params used for Okta IDP

--

--

Required for:
 - 
Okta

apps.<app>.idToken

No

Contains configurations needed for OIDC Token Verification.

--

--

Required for: 
 - 
Entra ID

apps.<app>.idToken.verify

No

Enable OIDC token verification

true
, 
false

false

Required for: 
 - 
Entra ID

apps.<app>.skipClientIDCheck

No

Skip JWT Audience (ClientID in OIDC terms) check (for testing purposes)

true
, 
false

false

Required for: 
 - 
Entra ID

apps.<app>.skipIssuerCheck

No

JWT Issuer check skip (for testing purposes)

true
, 
false

false

--

apps.<app>.idToken.iss

Yes, only if the idToken.verify is set to true

JWT Issuer

https://login.microsoftonline.com/c179854f-7b57-4eee-abb2-b34cbcf0626e/v2.0

--

Required for: 
 - 
Entra ID

apps.<app>.idToken.aud

Yes, only if the idToken.verify is set to true

JWT Audience

fe88b193-bb50-4c09-ade0-a2710dd9f5d7

--

Required for: 
 - 
Entra ID

apps.<app>.idpSourceId

Yes (for external IDP tokens)

Links the application to a defined 
idpSource
, enabling token acquisition using client credentials.

auth1

--

Required for: 
 - 
Any external IDP using token acquisition flow

apps.<app>.scopes

No

A list of scopes to request from the IDP during token acquisition. Useful for OIDC-compliant flows.

["openid", "profile", "email"]

--

Required for: 
 - 
Okta
, 
Auth0

apps.<app>.additionalParameters

No

Additional key-value pairs to send as part of the token request to the IDP.

grant_type: client_credentials

--

Often needed for: 
 - 
Keycloak
, 
Ping

apps.<app>.includeAccessToken

No

Include the raw access token as a claim or in the outbound Runtime request (useful for diagnostics or passthrough).

true
, 
false

false

--

apps.<app>.refreshThreshold

No

Specifies when to refresh the token before its expiration (in seconds). Useful when 
asyncRefresh
 is used.

300

60

--

Configuring Environment Variables

Users can set Environment Variables in their 
config.yaml
 to handle sensitive data (e.g., API keys) and manage configurations across different Environments.

Environment Variables Format

Every configuration value supports Environment Variables substitutions in the following format:

${ENV_VAR_NAME:<default_value>}

The 
default_value
 parameter is optional.

E.g. 
port: ${MANAGEMENT_PORT:8081}

Note: In the following example, there are two IDP Application configurations ("Bank Portal" and "Loans Approval")

Configuration Example

server:
 name: idp-webhook
 auth:
 secret: ${IDP_HOOK_AUTH_SECRET} # This secret will be used to allow the IDP to authenticate with the IDP Webhook endpoint (Optional)

http:
 port: ${IDP_HOOK_HTTP_PORT:8020}

management:
 port: ${IDP_HOOK_MANAGEMENT_PORT:8021}
 # if management endpoint path needs to be changed from the default /health:
 # prefix: ${IDP_HOOK_MANAGEMENT_PREFIX:/probes}

log:
 level: ${IDP_HOOK_LOG_LEVEL:debug} # possible values: trace, debug, info, warn, warning, error, fatal, panic
 format: ${IDP_HOOK_LOG_FORMAT:json} # possible values: json, text
 logTo: ${IDP_HOOK_LOG_TO:file} # possible values: console, file, rolling
 filePath: ${IDP_HOOK_LOG_FILE_PATH:logs/webhook.log} # only relevant if logTo is file or rolling
 # if logTo is rolling - use the following optional parameters to configure the rolling file appender
 # maxSize: 2
 # maxAge: 1
 # maxBackups: 5
 # compress: true
 # localTime: false

runtime:
 host: ${PDP_RUNTIME_HOST:https://demo.plainid.cloud}
 uri: /api/runtime/token/v3
 timeout: 3s
 
secretManager:
 apiClient:
 url: http://localhost:30090
 timeoutSeconds: 30
 cacheManager:
 defaultTtl: 3600
idpSources:
 - id: auth1
 url: https://auth.local.platform.test/auth/realms/policy/protocol/openid-connect/token
 clientId: "{{store=AWS_SECRETS_MANAGER_STORE,key=dummy-secret,jsonpath=$.clientId}}"
 clientSecret: "{{store=AWS_SECRETS_MANAGER_STORE,key=dummy-secret,jsonpath=$.clientSecret}}"
 asyncRefresh: true
 additionalParameters:
 grant_type: client_credentials

apps:
 Bank Portal:
 clientid: ${BANK_PORTAL_SCOPE_CLIENT_ID:PPWZYCOMXGNTHMGO8CIT}
 clientsecret: ${BANK_PORTAL_SCOPE_CLIENT_SECRET}
 entitytype: User
 tokentype: identity # possible values: identity, access
 includeIdentity: true
 userid: $.identity.claims.sub
 claims:
 plainid: $.response[*].access[?(@.resourceType == "assetExternal")].path
 FirstName_identity: $.identity.attributes.first_name

 Loan Approval:
 clientid: ${LOAN_APPROVAL_SCOPE_CLIENT_ID:PXY8GCMDLPKSNAFDAA7A}
 clientsecret: ${LOAN_APPROVAL_SCOPE_CLIENT_SECRET}
 entitytype: Main
 tokentype: identity # possible values: identity, access
 userid: $.identity.claims.sub
 claims:
 plainid: $.response[*].access[?(@.resourceType == "portal-permissions")].path
 FirstName_identity: $.identity.attributes.name
 
 devapp:
 clientid: PMCJSVFOR1IEUD3JLSYO
 entitytype: AccountsIdentitiesWS
 tokentype: identity
 idpSourceId: auth1
 claims:
 plainid: $.response[*].access[?(@.resourceType == "IdentitiesAssets")].path

 ...

Mapping the PlainID Policy Decision Response to Claims

When integrating the PlainID Policy Decision Point (PDP) with your Identity Provider (IDP), the Policy Decision Response returned by the PDP often contains valuable authorization data, like attributes or identity claims. Mapping these values correctly to the user‚Äôs token or claims in the IDP is crucial for ensuring that the right access permissions are granted.

To facilitate this mapping, you can use JSONPath Expressions, which allow you to extract specific data points from the PDP response and map them to claims within the IDP. Each expression corresponds to a particular set of information in the PDP response, which you can enrich the user‚Äôs token with during the token enrichment process.

PlainID Policy Decision Response Mapping Examples
:

Expression

Description

$.response[*].access[?(@.resourceType == "ProfileInformation")].attributes.BU

Get the Business Unit (
BU
) code from the 
ProfileInformation
 Assets included in the PDP Response

$.response[*].access[?(@.resourceType == "Accounts")].path

Get the Asset id (
path
) from the 
Accounts
 Asset Type Assets included in the PDP Response

$.response[*].access[?(@.resourceType == "InternalIDP")].attributes.AttText[*]

Get a multi-value set of Attributes from the 
InternalIDP
 Asset Type Assets included in the PDP Response

$.identity.attributes.user_role

Get the 
user_role
 Attribute from the identity included in the PDP Response 
Notice: To map identity Attributes, the 
includeIdentity
 must be set to 
true

Use-Case Decision Mapping Scenario

Below is a use-case scenario which includes a PDP Response Sample, Service mapping example, and a sample response derived from the sample and mapping example:

PDP Response Sample

Below is a sample response which contains the values that are extracted in the claim mapping process.

{
 "tokenValidity": 0,
 "response": [
 {
 "access": [
 {
 "path": "docE3",
 "attributes": {
 "EntitlementID": [
 "docE3"
 ],
 "EntitlementName": [
 "Documents Delete"
 ],
 "AppID": [
 "doc_portal"
 ]
 },
 "resourceType": "appsEntitlements",
 "actions": [
 {
 "action": "ACCESS"
 }
 ]
 },
 {
 "path": "docE2",
 "attributes": {
 "EntitlementID": [
 "docE2"
 ],
 "EntitlementName": [
 "Documents Move"
 ],
 "AppID": [
 "doc_portal"
 ]
 },
 "resourceType": "appsEntitlements",
 "actions": [
 {
 "action": "ACCESS"
 }
 ]
 },
 {
 "path": "docE1",
 "attributes": {
 "EntitlementID": [
 "docE1"
 ],
 "EntitlementName": [
 "Documents Read"
 ],
 "AppID": [
 "doc_portal"
 ]
 },
 "resourceType": "appsEntitlements",
 "actions": [
 {
 "action": "ACCESS"
 }
 ]
 }
 ]
 }
 ],
 "contextData": null
}

Service Mapping Example

This is an example of an IDP Token Enrichment Service configuration that the user can copy from the values.yaml and configure in the custom-values.yaml:

 apps:
 - TestIntegration:
 clientid: ********
 clientsecret: ***************
 entitytype: Sample_Identity
 claims:
 # plainid_app_id: $.response[*].access[?(@.resourceType == "appsEntitlements")].attributes.AppID[*]
 plainid_entitlement: $.response[*].access[?(@.resourceType == "appsEntitlements")].attributes.EntitlementName[*]

Sample Response

In the sample response, the plainid_entitlement claims mapping is shown with the relevant values.

{
 "plainid_entitlement": [
 "Documents Delete",
 "Documents Move",
 "Documents Read"
 ]
}

Maintenance

Users can regularly check the¬†
service logs
¬†to¬†monitor¬†for any errors or warnings and¬†use the 
health check endpoints
¬†to ensure the service is running properly.

Monitoring

Following is a list of known errors and troubleshooting tips:

Error: "
failed to locate app
"

Cause:
 The requested application in the IDP request is not found in the IDP Token Enrichment Service configuration.

Resolution:
 Check the application configuration section and verify that the app name is consistent in both the IDP and IDP Token Enrichment Service configurations.

Error: "
failed to GetToken
"

Cause:
 This error is typically caused by PDP Runtime issues or connection configuration problems.

Examples:

failed to GetToken: received status 400 and body: User is not a valid identity type

failed to GetToken: received status 401 and body: Invalid secret

failed to GetToken: failed to do runtime request: Post "http://10.7.66.13:8080/api/runtime/token/v3": dial tcp 10.7.66.13:8080: i/o timeout

Resolution:
 Review and correct any PDP Runtime or connection configuration issues. Ensure that the connection details and secrets are valid.

Log Management and Backup Procedures

To maintain the IDP effectively, it's important to monitor and manage log files regularly. This ensures that they do not consume excessive storage space. If necessary, adjust the log rotation settings to manage the log file growth more efficiently. Regular log monitoring will also help you catch any unusual activity or issues early.

In addition to log management, regularly back up your configuration files and any customizations you've made. This practice is essential for preventing data loss and ensuring you can quickly restore data in case of failure or misconfiguration.

Health Check

Health checks monitor the service's status and availability by exposing endpoints that return the current state of the service. These checks ensure the service is running properly and can differentiate between overall service availability (liveness) and its readiness to handle requests (readiness).

PAA Helm

By default, the management port configured is 9090.

management:
 port: ${MANAGEMENT_PORT:9090}
# if the management endpoint path needs to be changed from the default /health:
# prefix: ${MANAGEMENT_PREFIX:/probes}

The probe endpoints are:

Liveness
:

http://<IDP_HOOK_HOST>:9090/health

http://<IDP_HOOK_HOST>:9090/health/liveness

Readiness
:

-
http://<IDP_HOOK_HOST>:9090/health/readiness

PAA Standalone

By default, the management port configured is 8021.

management:
 port: ${IDP_HOOK_MANAGEMENT_PORT:8021}
# if the management endpoint path needs to be changed from the default /health:
# prefix: ${IDP_HOOK_MANAGEMENT_PREFIX:/probes}

The probe endpoints are:

Liveness:

-
http://<IDP_HOOK_HOST>:8021/health

-
http://<IDP_HOOK_HOST>:8021/health/liveness

Readiness
:

http://<IDP_HOOK_HOST>:8021/health/readiness

Logging

Logging is essential for monitoring service behavior and diagnosing issues. It provides detailed insights at various levels (trace, debug, info, warn, error, fatal), which helps track events and troubleshoot efficiently.

The service uses structured logging with configurable levels and formats.

Supported log levels:

trace

debug

info

warn

error

fatal

Formats:

JSON

Text

Configure logging in the 
log
 section of the configuration file or use 
environment variables
:

log:
 level: ${IDP_HOOK_LOG_LEVEL:debug} # possible values: trace, debug, info, warn, warning, error, fatal, panic
 format: ${IDP_HOOK_LOG_FORMAT:json} # possible values: json, text
 logTo: ${IDP_HOOK_LOG_TO:con
... [truncated for budget]
   ----------------------------------------------------------------------

=== END RETRIEVED CONTEXT ===
Token budget: 46058/175000 used
</retrieved_context>


</reference_examples>



<few_shot_examples>

‚ö†Ô∏è  THESE ARE STYLE EXAMPLES ONLY - DO NOT COPY THE SCENARIOS!
These show you HOW to write tests (structure, detail, terminology).
They DO NOT show you WHAT to test - that comes from the story above.

These examples demonstrate high-quality test cases across different domains:

=== EXAMPLE 1: API Feature (E-commerce) ===

Story: "Add gift card payment method to checkout API"

GOOD TEST:
{
  "title": "Verify checkout processes gift card payment and deducts balance correctly",
  "description": "Validate that API accepts gift card as payment method, verifies sufficient balance, processes payment, and updates gift card balance accordingly",
  "preconditions": "Gift card GC-2024-ABC123 exists with $100 balance. Cart total is $75.50",
  "steps": [
    {
      "step_number": 1,
      "action": "POST /api/v1/checkout with payload: {"cart_id": "cart-789", "payment_method": "gift_card", "gift_card_code": "GC-2024-ABC123"}",
      "expected_result": "API returns 200 OK with order confirmation and remaining gift card balance: $24.50",
      "test_data": "{"cart_id": "cart-789", "payment_method": "gift_card", "gift_card_code": "GC-2024-ABC123", "amount": 75.50}"
    },
    {
      "step_number": 2,
      "action": "GET /api/v1/gift-cards/GC-2024-ABC123/balance",
      "expected_result": "Balance shows $24.50 (original $100 - $75.50 purchase)",
      "test_data": "gift_card_code: GC-2024-ABC123"
    }
  ],
  "expected_result": "Payment processed successfully, gift card balance updated, order created",
  "priority": "critical",
  "test_type": "functional"
}

=== EXAMPLE 2: Access Control (SaaS) ===

Story: "Implement role-based document permissions"

GOOD TEST:
{
  "title": "Verify editor role can modify documents but cannot delete them",
  "description": "Validate that users with editor role have edit permissions but deletion is restricted to admin role",
  "preconditions": "User user_editor_1 has 'editor' role. Document doc_456 exists and is owned by admin",
  "steps": [
    {
      "step_number": 1,
      "action": "Authenticate as user_editor_1 and PUT /api/docs/doc_456 with updated content",
      "expected_result": "API returns 200 OK, document content updated successfully",
      "test_data": "{"doc_id": "doc_456", "content": "Updated by editor", "user": "user_editor_1", "role": "editor"}"
    },
    {
      "step_number": 2,
      "action": "Attempt DELETE /api/docs/doc_456 as user_editor_1",
      "expected_result": "API returns 403 Forbidden with error: 'Delete permission requires admin role'",
      "test_data": "{"doc_id": "doc_456", "user": "user_editor_1", "role": "editor"}"
    }
  ],
  "expected_result": "Editor can modify but not delete, permissions enforced correctly",
  "priority": "high",
  "test_type": "functional"
}

=== EXAMPLE 3: Pagination Feature (API) ===

Story: "Add cursor-based pagination to search endpoint"

GOOD TEST:
{
  "title": "Verify search returns paginated results with correct cursor for next page",
  "description": "Validate that search API returns page_size results and provides cursor token for retrieving next page",
  "preconditions": "Database contains 150 products matching query 'laptop'. Page size configured to 50",
  "steps": [
    {
      "step_number": 1,
      "action": "GET /api/v1/search?q=laptop&page_size=50",
      "expected_result": "API returns 50 results with 'next_cursor' token in response",
      "test_data": "{"query": "laptop", "page_size": 50}"
    },
    {
      "step_number": 2,
      "action": "GET /api/v1/search?q=laptop&page_size=50&cursor={next_cursor_from_step_1}",
      "expected_result": "API returns next 50 results (items 51-100) with another next_cursor",
      "test_data": "{"query": "laptop", "page_size": 50, "cursor": "eyJpZCI6MTAwfQ=="}"
    },
    {
      "step_number": 3,
      "action": "GET /api/v1/search?q=laptop&page_size=50&cursor={next_cursor_from_step_2}",
      "expected_result": "API returns final 50 results (items 101-150) with null next_cursor indicating end",
      "test_data": "{"query": "laptop", "page_size": 50, "cursor": "eyJpZCI6MTUwfQ=="}"
    }
  ],
  "expected_result": "Pagination works correctly across all pages, cursor navigation functions properly",
  "priority": "high",
  "test_type": "functional"
}

KEY PATTERNS TO LEARN (Style, NOT scenarios):
1. Test names describe WHAT is verified and UNDER WHAT CONDITIONS
2. Test data is CONCRETE - real IDs, real payloads, real values
3. Steps are SPECIFIC - exact endpoints, exact expected responses
4. Tests verify END-TO-END workflows, not just single operations
5. Business value is CLEAR - why does this test matter?

REMINDER: These are style examples. Your tests must be based on the ACTUAL story above,
not these examples. If your tests look like these examples but don't match the story,
you've done it wrong.

</few_shot_examples>



<reasoning_instructions>

üö® CRITICAL: You must PROVE you understand the story before generating tests.

MANDATORY REASONING STRUCTURE:

STEP 1: FEATURE UNDERSTANDING (Write this in plain English)
   - "This feature does: [explain what it does in 2-3 sentences]"
   - "The problem it solves: [explain the user problem/business need]"
   - "Key components involved: [list PlainID components: PAP/PDP/POPs/Authorizers/workspaces]"
   - "Functionality to test (bullets): [derive concrete behaviors from STORY + PRD (not generic)]"
   - If you cannot explain this clearly, you cannot test it!

STEP 2: ACCEPTANCE CRITERIA MAPPING (MANDATORY)
   - List EVERY acceptance criterion from the story
   - For EACH criterion, decide which test(s) cover it
   - Also map tests to the specific "Functionality to test" bullets where applicable
   - Format: "AC1: [criterion text] ‚Üí Test(s): [test names]"
   - If ANY criterion is missing a test, explain why or add the test
   - If no acceptance criteria provided, list what SHOULD be tested based on description

STEP 3: SUBTASK ANALYSIS (CRITICAL - Engineering tasks reveal implementation details!)
   - List key subtasks from "ENGINEERING TASKS" section
   - For EACH subtask, identify what it implements and what needs testing
   - Subtasks often contain:
     * API endpoints with request/response examples
     * UI components and their behavior
     * Integration points between services
     * Edge cases and error scenarios
   - Use subtask details to derive specific test scenarios

STEP 4: WHAT CAN BREAK? (Risk Analysis)
   - Based on the story description and subtasks, what could go wrong?
   - What integration points exist?
   - What PlainID components are affected (policies, POPs, authorizers, etc.)?
   - What are the failure scenarios specific to THIS feature?

STEP 5: TEST COUNT DECISION
   - How many acceptance criteria? (Primary driver!)
   - How many subtasks? (Each may need verification!)
   - How many failure scenarios identified above?
   - How many integration points?
   - DECIDE: How many tests needed? (Usually 1-3 tests per acceptance criterion + key failure scenarios + subtask coverage)
   - JUSTIFY: Why is this count appropriate for THIS specific story?

STEP 6: TEST STRATEGY
   - Happy paths: Which acceptance criteria cover normal workflow?
   - Error handling: What specific errors can this feature produce?
   - Integration: What PlainID components interact in this feature?
   - PlainID-specific: Which workspace(s), POPs, authorizers are involved?

VALIDATION CHECK:
   - Can I explain this feature clearly? (If no, re-read the story!)
   - Do my tests map to actual acceptance criteria?
   - Are tests specific to THIS feature (not generic)?
   - Do tests use correct PlainID terminology?

OUTPUT YOUR REASONING:
Write your analysis in the "reasoning" field.
If your reasoning doesn't explain the feature clearly, your tests will be wrong.
Examples are for STYLE only - test the ACTUAL story, not the examples.
</reasoning_instructions>



<generation_rules>

TEST COMPOSITION - THINK SMARTLY:
You are an experienced QA tester. Analyze the story and determine the RIGHT test count for robust coverage.

‚ö†Ô∏è  CRITICAL BALANCE:
- Quality over quantity - no filler tests
- But DON'T write too few if robustness requires more coverage
- Each test must provide UNIQUE value
- Ask: "Would these tests catch real production issues?"

BEFORE deciding test count, assess:
- How many components/services are touched?
- How many acceptance criteria exist?
- How many integration points are involved?
- What's the risk level (user-facing? data integrity? security implications?)
- How many subtasks exist?
- Are there multiple user workflows or just one?
- What could realistically break in production?

THEN determine appropriate test count (think smartly - no arbitrary limits):
- Trivial change (typo fix, label change): 2-3 focused tests if even needed
- Simple UI change (1 component, clear requirements): 4-6 focused tests
- Standard feature (2-3 components, moderate complexity): 7-12 tests  
- Complex integration (multiple services, many edge cases): 10-16 tests
- Critical/large story (payments, auth, data migration, multiple workflows): 15-20+ tests

Distribution should match complexity:
- Always cover: happy paths (primary workflows)
- Always include: error handling (realistic failures)
- For integrations: cross-service communication tests
- For complex logic: edge cases and boundary conditions
- For critical features: backward compatibility, data validation
- For risky features: DON'T skimp - comprehensive coverage is worth it

QUALITY GUIDELINES:
- Each test must be specific to THIS feature - no generic tests
- Each test must cover a DISTINCT scenario - no overlap or redundancy
- Better 8 excellent tests than 15 mediocre/repetitive ones
- But better 15 excellent tests than 8 tests that miss important scenarios
- Stop when coverage is robust - not before, not after

TEST NAMING CONVENTION:
‚úÖ GOOD: "Verify (service name here) returns 400 error when request missing required user_id field"
‚úÖ GOOD: "Verify policy export preserves custom resource IDs during environment migration"
‚ùå BAD: "Test API - Error Handling"
‚ùå BAD: "Happy Path Test"

Format: "Verify [specific behavior] [under specific conditions]"
Be descriptive and precise.

TEST DATA REQUIREMENTS (CRITICAL):
- Every test step MUST include populated test_data field
- PREFER: Copy exact JSON/payloads from retrieved documentation
- Use realistic values from company context (real IDs, actual field names)
- IF exact data unavailable: Reference specific documentation (e.g., "See Policy API spec for payload structure")
- NEVER use generic placeholders: <token>, <value>, Bearer <token>, TODO, FIXME

API STEP REQUIREMENTS (if API is involved in this story):
- Steps MUST include: HTTP method + EXACT path
- Include auth details if required (security scheme)
- Include parameters with exact names/types (path/query)
- Include request body JSON with EXACT schema field names and realistic example values
- Include expected response code(s) and key response fields
- Use ONLY endpoints relevant to THIS story (prefer those listed in API SPECIFICATIONS)
- Do NOT invent endpoints or fields not present in Swagger/API specs

GROUNDING IN CONTEXT:
- Use EXACT PlainID terminology from company docs (PAP, PDP, POP, PIPs, Authorizers, etc.)
- Reference SPECIFIC PlainID entities: policies, assets, subjects, resources, workspaces
- Mention correct workspace when relevant (Identity/Policy/Authorization/Orchestration)
- Use PlainID-specific concepts: vendor IDs, policy promotion, deny reasons, entitlements
- Reference SPECIFIC endpoints, fields, UI elements from story
- Match style and detail level of similar existing tests
- Base tests on subtasks and technical requirements
- If RAG provided examples, follow their patterns closely
- Tests should demonstrate deep understanding of PlainID's PBAC model

TEST STRUCTURE:
- Preconditions: Specific setup (not "user is logged in" - specify what data exists)
- Steps: Appropriate number of detailed, actionable steps with concrete examples
- Expected results: Specific, measurable outcomes
- Test data: Real examples or documentation references
- In the test description, explicitly mention which "Functionality to test" bullet and AC the test covers

TEST TYPE SPECIFICS (CRITICAL - DO NOT MIX):

UI/FRONTEND TESTS (test_type: 'ui' or tags include 'UI'):
Steps MUST use UI navigation language:
- "Navigate to [Workspace] ‚Üí [Menu] ‚Üí [Page/Item]"
- "Click [button/tab/link name]"
- "Enter/Select [field] with [value]"
- "Verify [UI element] displays [expected state/content]"
- "Check [message/indicator/icon] appears"

Example CORRECT UI step:
```
{
  "action": "Navigate to Authorization Workspace ‚Üí Applications menu ‚Üí Select 'App-123' ‚Üí Click 'Policies' tab",
  "expected_result": "Policies tab opens showing list of policies with search bar and paging controls",
  "test_data": "Application: App-123, Expected policy count: 5"
}
```

Example WRONG UI step (DO NOT DO THIS):
```
{
  "action": "GET /policy-mgmt/application/app-123/policies",  ‚ùå NO! This is API call, not UI!
  "expected_result": "API returns policies"  ‚ùå UI test should verify UI, not API response!
}
```

API/BACKEND TESTS (test_type: 'api' or 'integration'):
Steps MUST use API call language:
- "[METHOD] [endpoint_path] with [payload if POST/PATCH/PUT]"
- "Verify response code [200/400/etc] with [expected data structure]"
- "Verify response contains [specific fields]"

Example CORRECT API step:
```
{
  "action": "GET /policy-mgmt/application/app-123/policies?offset=0&limit=10",
  "expected_result": "API returns 200 OK with array of policy objects, each containing id, name, type fields",
  "test_data": "{"applicationId": "app-123", "offset": 0, "limit": 10, "sort": "name"}"
}
```

CRITICAL RULE: NEVER put API endpoints in UI test steps! NEVER put UI navigation in API test steps!

WHAT TO TEST:
‚úÖ User-facing functionality and workflows
‚úÖ Integration points between components
‚úÖ Error handling for realistic failure scenarios
‚úÖ Backward compatibility (if relevant to story)
‚úÖ Business requirement validation

WHAT NOT TO TEST:
‚ùå Generic security tests (SQL injection, XSS) - separate security suite
‚ùå Generic performance tests - separate performance suite  
‚ùå Infrastructure or deployment tasks
‚ùå Developer documentation or code quality
‚ùå Features unrelated to this story

FOLDER SUGGESTION:
Analyze story components/labels and match to provided folder structure. Use keyword matching to find best fit. If genuinely uncertain, return "unknown" with reasoning in your analysis.

</generation_rules>



<self_validation>

Before returning your test plan, verify each item:

‚ñ° Each test has clear business value tied to story requirements
‚ñ° Test names are descriptive (no "Happy Path" or "Test Case 1")
‚ñ° ALL test_data fields are populated (no null, no empty strings)
‚ñ° API steps (if any) include method, exact path, and payload/params derived from Swagger/API SPECIFICATIONS
‚ñ° Each test step references story-specific entities/fields from description/acceptance criteria
‚ñ° PlainID terminology used correctly (PAP/PDP/POP/PIPs/Authorizers/workspaces)
‚ñ° Tests demonstrate understanding of PlainID's PBAC platform
‚ñ° Correct workspace referenced when relevant (Identity/Policy/Authorization/Orchestration)
‚ñ° Tests are specific to THIS feature (not generic)
‚ñ° No placeholder data: no <>, no "Bearer <token>", no TODO
‚ñ° Test count matches story complexity (justified your reasoning)
‚ñ° Test coverage is ROBUST enough to catch real production issues
‚ñ° Test distribution matches complexity (happy paths, errors, edge cases as needed)
‚ñ° NO redundant/overlapping tests - each test covers distinct scenario
‚ñ° Quality over quantity, but not too few for complex/critical features

VALIDATION OUTPUT:
Include a validation_check object in your response with boolean flags:
- all_tests_specific: true/false
- no_placeholders: true/false  
- terminology_matched: true/false

If validation fails, revise the failing tests before returning.

</self_validation>



<output_format>
Generate your response as a JSON object matching the schema provided.
Include your reasoning, then the test plan, then validation check.
Ensure all required fields are populated with realistic values.
</output_format>
